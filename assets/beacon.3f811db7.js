import{J as ls,_ as $i,G as ds,K as us,N as fs}from"./main.7e0bf420.js";import{w as at,c as fo,r as ho,d as zn,a as nn,b as yt,e as bn,s as hs}from"./index.36f35538.js";function vs(i,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in i)){const a=Object.getOwnPropertyDescriptor(r,o);a&&Object.defineProperty(i,o,a.get?a:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}function er(i){return Object.keys(i)}var Et;(function(i){i.PENDING="pending",i.RESOLVED="resolved",i.REJECTED="rejected"})(Et||(Et={}));const wr=()=>{throw new Error("ExposedPromise not initialized yet.")};class Me{constructor(){this._resolve=wr,this._reject=wr,this._status=Et.PENDING,this._promise=new Promise((e,t)=>{this._resolve=r=>{this.isSettled()||(this._promiseResult=r,e(r),this._status=Et.RESOLVED)},this._reject=r=>{this.isSettled()||(this._promiseError=r,t(r),this._status=Et.REJECTED)}})}get promise(){return this._promise}get resolve(){return this._resolve}get reject(){return this._reject}get status(){return this._status}get promiseResult(){return this._promiseResult}get promiseError(){return this._promiseError}static resolve(e){const t=new Me;return t.resolve(e),t}static reject(e){const t=new Me;return t.reject(e),t}isPending(){return this.status===Et.PENDING}isResolved(){return this.status===Et.RESOLVED}isRejected(){return this.status===Et.REJECTED}isSettled(){return this.isResolved()||this.isRejected()}}var rn={},sn={},tr={},nr={},ir={},rr={};Object.defineProperty(rr,"__esModule",{value:!0});var _r=65536,ps=function(){function i(){this.isAvailable=!1,this.isInstantiated=!1;var e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}return i.prototype.randomBytes=function(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");for(var t=new Uint8Array(e),r=0;r<t.length;r+=_r)this._crypto.getRandomValues(t.subarray(r,r+Math.min(t.length-r,_r)));return t},i}();rr.BrowserRandomSource=ps;var or={};Object.defineProperty(or,"__esModule",{value:!0});var gs=at,Es=function(){function i(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof fo<"u"){var e=ho;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}return i.prototype.randomBytes=function(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");var t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");for(var r=new Uint8Array(e),o=0;o<r.length;o++)r[o]=t[o];return gs.wipe(t),r},i}();or.NodeRandomSource=Es;Object.defineProperty(ir,"__esModule",{value:!0});var ms=rr,ys=or,ws=function(){function i(){if(this.isAvailable=!1,this.name="",this._source=new ms.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new ys.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}return i.prototype.randomBytes=function(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)},i}();ir.SystemRandomSource=ws;(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=ir,t=zn,r=at;i.defaultRandomSource=new e.SystemRandomSource;function o(f,l){return l===void 0&&(l=i.defaultRandomSource),l.randomBytes(f)}i.randomBytes=o;function a(f){f===void 0&&(f=i.defaultRandomSource);var l=o(4,f),v=t.readUint32LE(l);return r.wipe(l),v}i.randomUint32=a;var c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function d(f,l,v){if(l===void 0&&(l=c),v===void 0&&(v=i.defaultRandomSource),l.length<2)throw new Error("randomString charset is too short");if(l.length>256)throw new Error("randomString charset is too long");for(var I="",k=l.length,K=256-256%k;f>0;){for(var V=o(Math.ceil(f*256/K),v),J=0;J<V.length&&f>0;J++){var oe=V[J];oe<K&&(I+=l.charAt(oe%k),f--)}r.wipe(V)}return I}i.randomString=d;function h(f,l,v){l===void 0&&(l=c),v===void 0&&(v=i.defaultRandomSource);var I=Math.ceil(f/(Math.log(l.length)/Math.LN2));return d(I,l,v)}i.randomStringForEntropy=h})(nr);(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=nr,t=at;i.PUBLIC_KEY_LENGTH=32,i.SECRET_KEY_LENGTH=32,i.SHARED_KEY_LENGTH=32;function r(R){var A=new Float64Array(16);if(R)for(var y=0;y<R.length;y++)A[y]=R[y];return A}var o=new Uint8Array(32);o[0]=9;var a=r([56129,1]);function c(R){for(var A=1,y=0;y<16;y++){var n=R[y]+A+65535;A=Math.floor(n/65536),R[y]=n-A*65536}R[0]+=A-1+37*(A-1)}function d(R,A,y){for(var n=~(y-1),u=0;u<16;u++){var w=n&(R[u]^A[u]);R[u]^=w,A[u]^=w}}function h(R,A){for(var y=r(),n=r(),u=0;u<16;u++)n[u]=A[u];c(n),c(n),c(n);for(var w=0;w<2;w++){y[0]=n[0]-65517;for(var u=1;u<15;u++)y[u]=n[u]-65535-(y[u-1]>>16&1),y[u-1]&=65535;y[15]=n[15]-32767-(y[14]>>16&1);var b=y[15]>>16&1;y[14]&=65535,d(n,y,1-b)}for(var u=0;u<16;u++)R[2*u]=n[u]&255,R[2*u+1]=n[u]>>8}function f(R,A){for(var y=0;y<16;y++)R[y]=A[2*y]+(A[2*y+1]<<8);R[15]&=32767}function l(R,A,y){for(var n=0;n<16;n++)R[n]=A[n]+y[n]}function v(R,A,y){for(var n=0;n<16;n++)R[n]=A[n]-y[n]}function I(R,A,y){var n,u,w=0,b=0,_=0,m=0,O=0,T=0,C=0,D=0,L=0,q=0,N=0,Q=0,z=0,ee=0,B=0,F=0,se=0,te=0,x=0,E=0,g=0,s=0,p=0,S=0,P=0,G=0,j=0,X=0,le=0,W=0,be=0,Y=y[0],ce=y[1],ae=y[2],ne=y[3],$=y[4],Z=y[5],ie=y[6],re=y[7],ue=y[8],fe=y[9],ve=y[10],ge=y[11],Ee=y[12],me=y[13],ye=y[14],we=y[15];n=A[0],w+=n*Y,b+=n*ce,_+=n*ae,m+=n*ne,O+=n*$,T+=n*Z,C+=n*ie,D+=n*re,L+=n*ue,q+=n*fe,N+=n*ve,Q+=n*ge,z+=n*Ee,ee+=n*me,B+=n*ye,F+=n*we,n=A[1],b+=n*Y,_+=n*ce,m+=n*ae,O+=n*ne,T+=n*$,C+=n*Z,D+=n*ie,L+=n*re,q+=n*ue,N+=n*fe,Q+=n*ve,z+=n*ge,ee+=n*Ee,B+=n*me,F+=n*ye,se+=n*we,n=A[2],_+=n*Y,m+=n*ce,O+=n*ae,T+=n*ne,C+=n*$,D+=n*Z,L+=n*ie,q+=n*re,N+=n*ue,Q+=n*fe,z+=n*ve,ee+=n*ge,B+=n*Ee,F+=n*me,se+=n*ye,te+=n*we,n=A[3],m+=n*Y,O+=n*ce,T+=n*ae,C+=n*ne,D+=n*$,L+=n*Z,q+=n*ie,N+=n*re,Q+=n*ue,z+=n*fe,ee+=n*ve,B+=n*ge,F+=n*Ee,se+=n*me,te+=n*ye,x+=n*we,n=A[4],O+=n*Y,T+=n*ce,C+=n*ae,D+=n*ne,L+=n*$,q+=n*Z,N+=n*ie,Q+=n*re,z+=n*ue,ee+=n*fe,B+=n*ve,F+=n*ge,se+=n*Ee,te+=n*me,x+=n*ye,E+=n*we,n=A[5],T+=n*Y,C+=n*ce,D+=n*ae,L+=n*ne,q+=n*$,N+=n*Z,Q+=n*ie,z+=n*re,ee+=n*ue,B+=n*fe,F+=n*ve,se+=n*ge,te+=n*Ee,x+=n*me,E+=n*ye,g+=n*we,n=A[6],C+=n*Y,D+=n*ce,L+=n*ae,q+=n*ne,N+=n*$,Q+=n*Z,z+=n*ie,ee+=n*re,B+=n*ue,F+=n*fe,se+=n*ve,te+=n*ge,x+=n*Ee,E+=n*me,g+=n*ye,s+=n*we,n=A[7],D+=n*Y,L+=n*ce,q+=n*ae,N+=n*ne,Q+=n*$,z+=n*Z,ee+=n*ie,B+=n*re,F+=n*ue,se+=n*fe,te+=n*ve,x+=n*ge,E+=n*Ee,g+=n*me,s+=n*ye,p+=n*we,n=A[8],L+=n*Y,q+=n*ce,N+=n*ae,Q+=n*ne,z+=n*$,ee+=n*Z,B+=n*ie,F+=n*re,se+=n*ue,te+=n*fe,x+=n*ve,E+=n*ge,g+=n*Ee,s+=n*me,p+=n*ye,S+=n*we,n=A[9],q+=n*Y,N+=n*ce,Q+=n*ae,z+=n*ne,ee+=n*$,B+=n*Z,F+=n*ie,se+=n*re,te+=n*ue,x+=n*fe,E+=n*ve,g+=n*ge,s+=n*Ee,p+=n*me,S+=n*ye,P+=n*we,n=A[10],N+=n*Y,Q+=n*ce,z+=n*ae,ee+=n*ne,B+=n*$,F+=n*Z,se+=n*ie,te+=n*re,x+=n*ue,E+=n*fe,g+=n*ve,s+=n*ge,p+=n*Ee,S+=n*me,P+=n*ye,G+=n*we,n=A[11],Q+=n*Y,z+=n*ce,ee+=n*ae,B+=n*ne,F+=n*$,se+=n*Z,te+=n*ie,x+=n*re,E+=n*ue,g+=n*fe,s+=n*ve,p+=n*ge,S+=n*Ee,P+=n*me,G+=n*ye,j+=n*we,n=A[12],z+=n*Y,ee+=n*ce,B+=n*ae,F+=n*ne,se+=n*$,te+=n*Z,x+=n*ie,E+=n*re,g+=n*ue,s+=n*fe,p+=n*ve,S+=n*ge,P+=n*Ee,G+=n*me,j+=n*ye,X+=n*we,n=A[13],ee+=n*Y,B+=n*ce,F+=n*ae,se+=n*ne,te+=n*$,x+=n*Z,E+=n*ie,g+=n*re,s+=n*ue,p+=n*fe,S+=n*ve,P+=n*ge,G+=n*Ee,j+=n*me,X+=n*ye,le+=n*we,n=A[14],B+=n*Y,F+=n*ce,se+=n*ae,te+=n*ne,x+=n*$,E+=n*Z,g+=n*ie,s+=n*re,p+=n*ue,S+=n*fe,P+=n*ve,G+=n*ge,j+=n*Ee,X+=n*me,le+=n*ye,W+=n*we,n=A[15],F+=n*Y,se+=n*ce,te+=n*ae,x+=n*ne,E+=n*$,g+=n*Z,s+=n*ie,p+=n*re,S+=n*ue,P+=n*fe,G+=n*ve,j+=n*ge,X+=n*Ee,le+=n*me,W+=n*ye,be+=n*we,w+=38*se,b+=38*te,_+=38*x,m+=38*E,O+=38*g,T+=38*s,C+=38*p,D+=38*S,L+=38*P,q+=38*G,N+=38*j,Q+=38*X,z+=38*le,ee+=38*W,B+=38*be,u=1,n=w+u+65535,u=Math.floor(n/65536),w=n-u*65536,n=b+u+65535,u=Math.floor(n/65536),b=n-u*65536,n=_+u+65535,u=Math.floor(n/65536),_=n-u*65536,n=m+u+65535,u=Math.floor(n/65536),m=n-u*65536,n=O+u+65535,u=Math.floor(n/65536),O=n-u*65536,n=T+u+65535,u=Math.floor(n/65536),T=n-u*65536,n=C+u+65535,u=Math.floor(n/65536),C=n-u*65536,n=D+u+65535,u=Math.floor(n/65536),D=n-u*65536,n=L+u+65535,u=Math.floor(n/65536),L=n-u*65536,n=q+u+65535,u=Math.floor(n/65536),q=n-u*65536,n=N+u+65535,u=Math.floor(n/65536),N=n-u*65536,n=Q+u+65535,u=Math.floor(n/65536),Q=n-u*65536,n=z+u+65535,u=Math.floor(n/65536),z=n-u*65536,n=ee+u+65535,u=Math.floor(n/65536),ee=n-u*65536,n=B+u+65535,u=Math.floor(n/65536),B=n-u*65536,n=F+u+65535,u=Math.floor(n/65536),F=n-u*65536,w+=u-1+37*(u-1),u=1,n=w+u+65535,u=Math.floor(n/65536),w=n-u*65536,n=b+u+65535,u=Math.floor(n/65536),b=n-u*65536,n=_+u+65535,u=Math.floor(n/65536),_=n-u*65536,n=m+u+65535,u=Math.floor(n/65536),m=n-u*65536,n=O+u+65535,u=Math.floor(n/65536),O=n-u*65536,n=T+u+65535,u=Math.floor(n/65536),T=n-u*65536,n=C+u+65535,u=Math.floor(n/65536),C=n-u*65536,n=D+u+65535,u=Math.floor(n/65536),D=n-u*65536,n=L+u+65535,u=Math.floor(n/65536),L=n-u*65536,n=q+u+65535,u=Math.floor(n/65536),q=n-u*65536,n=N+u+65535,u=Math.floor(n/65536),N=n-u*65536,n=Q+u+65535,u=Math.floor(n/65536),Q=n-u*65536,n=z+u+65535,u=Math.floor(n/65536),z=n-u*65536,n=ee+u+65535,u=Math.floor(n/65536),ee=n-u*65536,n=B+u+65535,u=Math.floor(n/65536),B=n-u*65536,n=F+u+65535,u=Math.floor(n/65536),F=n-u*65536,w+=u-1+37*(u-1),R[0]=w,R[1]=b,R[2]=_,R[3]=m,R[4]=O,R[5]=T,R[6]=C,R[7]=D,R[8]=L,R[9]=q,R[10]=N,R[11]=Q,R[12]=z,R[13]=ee,R[14]=B,R[15]=F}function k(R,A){I(R,A,A)}function K(R,A){for(var y=r(),n=0;n<16;n++)y[n]=A[n];for(var n=253;n>=0;n--)k(y,y),n!==2&&n!==4&&I(y,y,A);for(var n=0;n<16;n++)R[n]=y[n]}function V(R,A){for(var y=new Uint8Array(32),n=new Float64Array(80),u=r(),w=r(),b=r(),_=r(),m=r(),O=r(),T=0;T<31;T++)y[T]=R[T];y[31]=R[31]&127|64,y[0]&=248,f(n,A);for(var T=0;T<16;T++)w[T]=n[T];u[0]=_[0]=1;for(var T=254;T>=0;--T){var C=y[T>>>3]>>>(T&7)&1;d(u,w,C),d(b,_,C),l(m,u,b),v(u,u,b),l(b,w,_),v(w,w,_),k(_,m),k(O,u),I(u,b,u),I(b,w,m),l(m,u,b),v(u,u,b),k(w,u),v(b,_,O),I(u,b,a),l(u,u,_),I(b,b,u),I(u,_,O),I(_,w,n),k(w,m),d(u,w,C),d(b,_,C)}for(var T=0;T<16;T++)n[T+16]=u[T],n[T+32]=b[T],n[T+48]=w[T],n[T+64]=_[T];var D=n.subarray(32),L=n.subarray(16);K(D,D),I(L,L,D);var q=new Uint8Array(32);return h(q,L),q}i.scalarMult=V;function J(R){return V(R,o)}i.scalarMultBase=J;function oe(R){if(R.length!==i.SECRET_KEY_LENGTH)throw new Error("x25519: seed must be "+i.SECRET_KEY_LENGTH+" bytes");var A=new Uint8Array(R),y=J(A);return{publicKey:y,secretKey:A}}i.generateKeyPairFromSeed=oe;function pe(R){var A=e.randomBytes(32,R),y=oe(A);return t.wipe(A),y}i.generateKeyPair=pe;function M(R,A,y){if(y===void 0&&(y=!1),R.length!==i.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(A.length!==i.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");var n=V(R,A);if(y){for(var u=0,w=0;w<n.length;w++)u|=n[w];if(u===0)throw new Error("X25519: invalid shared key")}return n}i.sharedKey=M})(tr);var an={},$n={};Object.defineProperty($n,"__esModule",{value:!0});var Ze=zn,Gi=at,_s=20;function As(i,e,t){for(var r=1634760805,o=t[3]<<24|t[2]<<16|t[1]<<8|t[0],a=t[7]<<24|t[6]<<16|t[5]<<8|t[4],c=t[11]<<24|t[10]<<16|t[9]<<8|t[8],d=t[15]<<24|t[14]<<16|t[13]<<8|t[12],h=857760878,f=e[3]<<24|e[2]<<16|e[1]<<8|e[0],l=e[7]<<24|e[6]<<16|e[5]<<8|e[4],v=e[11]<<24|e[10]<<16|e[9]<<8|e[8],I=e[15]<<24|e[14]<<16|e[13]<<8|e[12],k=2036477234,K=t[19]<<24|t[18]<<16|t[17]<<8|t[16],V=t[23]<<24|t[22]<<16|t[21]<<8|t[20],J=t[27]<<24|t[26]<<16|t[25]<<8|t[24],oe=t[31]<<24|t[30]<<16|t[29]<<8|t[28],pe=1797285236,M=r,R=o,A=a,y=c,n=d,u=h,w=f,b=l,_=v,m=I,O=k,T=K,C=V,D=J,L=oe,q=pe,N,Q=0;Q<_s;Q+=2)N=M+C|0,n^=N<<7|N>>>32-7,N=n+M|0,_^=N<<9|N>>>32-9,N=_+n|0,C^=N<<13|N>>>32-13,N=C+_|0,M^=N<<18|N>>>32-18,N=u+R|0,m^=N<<7|N>>>32-7,N=m+u|0,D^=N<<9|N>>>32-9,N=D+m|0,R^=N<<13|N>>>32-13,N=R+D|0,u^=N<<18|N>>>32-18,N=O+w|0,L^=N<<7|N>>>32-7,N=L+O|0,A^=N<<9|N>>>32-9,N=A+L|0,w^=N<<13|N>>>32-13,N=w+A|0,O^=N<<18|N>>>32-18,N=q+T|0,y^=N<<7|N>>>32-7,N=y+q|0,b^=N<<9|N>>>32-9,N=b+y|0,T^=N<<13|N>>>32-13,N=T+b|0,q^=N<<18|N>>>32-18,N=M+y|0,R^=N<<7|N>>>32-7,N=R+M|0,A^=N<<9|N>>>32-9,N=A+R|0,y^=N<<13|N>>>32-13,N=y+A|0,M^=N<<18|N>>>32-18,N=u+n|0,w^=N<<7|N>>>32-7,N=w+u|0,b^=N<<9|N>>>32-9,N=b+w|0,n^=N<<13|N>>>32-13,N=n+b|0,u^=N<<18|N>>>32-18,N=O+m|0,T^=N<<7|N>>>32-7,N=T+O|0,_^=N<<9|N>>>32-9,N=_+T|0,m^=N<<13|N>>>32-13,N=m+_|0,O^=N<<18|N>>>32-18,N=q+L|0,C^=N<<7|N>>>32-7,N=C+q|0,D^=N<<9|N>>>32-9,N=D+C|0,L^=N<<13|N>>>32-13,N=L+D|0,q^=N<<18|N>>>32-18;Ze.writeUint32LE(M+r|0,i,0),Ze.writeUint32LE(R+o|0,i,4),Ze.writeUint32LE(A+a|0,i,8),Ze.writeUint32LE(y+c|0,i,12),Ze.writeUint32LE(n+d|0,i,16),Ze.writeUint32LE(u+h|0,i,20),Ze.writeUint32LE(w+f|0,i,24),Ze.writeUint32LE(b+l|0,i,28),Ze.writeUint32LE(_+v|0,i,32),Ze.writeUint32LE(m+I|0,i,36),Ze.writeUint32LE(O+k|0,i,40),Ze.writeUint32LE(T+K|0,i,44),Ze.writeUint32LE(C+V|0,i,48),Ze.writeUint32LE(D+J|0,i,52),Ze.writeUint32LE(L+oe|0,i,56),Ze.writeUint32LE(q+pe|0,i,60)}function vo(i,e,t,r,o){if(o===void 0&&(o=0),i.length!==32)throw new Error("Salsa20: key size must be 32 bytes");if(r.length<t.length)throw new Error("Salsa20: destination is shorter than source");var a,c;if(o===0){if(e.length!==8)throw new Error("Salsa20 nonce must be 8 bytes");a=new Uint8Array(16),a.set(e),c=e.length}else{if(e.length!==16)throw new Error("Salsa20 nonce with counter must be 16 bytes");a=e,c=16-o}for(var d=new Uint8Array(64),h=0;h<t.length;h+=64){As(d,a,i);for(var f=h;f<h+64&&f<t.length;f++)r[f]=t[f]^d[f-h];Rs(a,c,a.length-c)}return Gi.wipe(d),o===0&&Gi.wipe(a),r}$n.streamXOR=vo;function bs(i,e,t,r){return r===void 0&&(r=0),Gi.wipe(t),vo(i,e,t,t,r)}$n.stream=bs;function Rs(i,e,t){for(var r=1;t--;)r=r+(i[e]&255)|0,i[e]=r&255,r>>>=8,e++;if(r>0)throw new Error("Salsa20: counter overflow")}Object.defineProperty(an,"__esModule",{value:!0});var Ot=zn,Ss=$n,po=at;function go(i,e,t,r,o){if(o===void 0&&(o=0),o===0){if(e.length!==24)throw new Error("XSalsa20 nonce must be 24 bytes")}else if(e.length!==32)throw new Error("XSalsa20 nonce with counter must be 32 bytes");var a=Eo(i,e.subarray(0,16),new Uint8Array(32)),c=Ss.streamXOR(a,e.subarray(16),t,r,o);return po.wipe(a),c}an.streamXOR=go;function Ts(i,e,t,r){return r===void 0&&(r=0),po.wipe(t),go(i,e,t,t,r)}an.stream=Ts;var xs=20;function Eo(i,e,t){for(var r=1634760805,o=i[3]<<24|i[2]<<16|i[1]<<8|i[0],a=i[7]<<24|i[6]<<16|i[5]<<8|i[4],c=i[11]<<24|i[10]<<16|i[9]<<8|i[8],d=i[15]<<24|i[14]<<16|i[13]<<8|i[12],h=857760878,f=e[3]<<24|e[2]<<16|e[1]<<8|e[0],l=e[7]<<24|e[6]<<16|e[5]<<8|e[4],v=e[11]<<24|e[10]<<16|e[9]<<8|e[8],I=e[15]<<24|e[14]<<16|e[13]<<8|e[12],k=2036477234,K=i[19]<<24|i[18]<<16|i[17]<<8|i[16],V=i[23]<<24|i[22]<<16|i[21]<<8|i[20],J=i[27]<<24|i[26]<<16|i[25]<<8|i[24],oe=i[31]<<24|i[30]<<16|i[29]<<8|i[28],pe=1797285236,M,R=0;R<xs;R+=2)M=r+V|0,d^=M<<7|M>>>32-7,M=d+r|0,v^=M<<9|M>>>32-9,M=v+d|0,V^=M<<13|M>>>32-13,M=V+v|0,r^=M<<18|M>>>32-18,M=h+o|0,I^=M<<7|M>>>32-7,M=I+h|0,J^=M<<9|M>>>32-9,M=J+I|0,o^=M<<13|M>>>32-13,M=o+J|0,h^=M<<18|M>>>32-18,M=k+f|0,oe^=M<<7|M>>>32-7,M=oe+k|0,a^=M<<9|M>>>32-9,M=a+oe|0,f^=M<<13|M>>>32-13,M=f+a|0,k^=M<<18|M>>>32-18,M=pe+K|0,c^=M<<7|M>>>32-7,M=c+pe|0,l^=M<<9|M>>>32-9,M=l+c|0,K^=M<<13|M>>>32-13,M=K+l|0,pe^=M<<18|M>>>32-18,M=r+c|0,o^=M<<7|M>>>32-7,M=o+r|0,a^=M<<9|M>>>32-9,M=a+o|0,c^=M<<13|M>>>32-13,M=c+a|0,r^=M<<18|M>>>32-18,M=h+d|0,f^=M<<7|M>>>32-7,M=f+h|0,l^=M<<9|M>>>32-9,M=l+f|0,d^=M<<13|M>>>32-13,M=d+l|0,h^=M<<18|M>>>32-18,M=k+I|0,K^=M<<7|M>>>32-7,M=K+k|0,v^=M<<9|M>>>32-9,M=v+K|0,I^=M<<13|M>>>32-13,M=I+v|0,k^=M<<18|M>>>32-18,M=pe+oe|0,V^=M<<7|M>>>32-7,M=V+pe|0,J^=M<<9|M>>>32-9,M=J+V|0,oe^=M<<13|M>>>32-13,M=oe+J|0,pe^=M<<18|M>>>32-18;return Ot.writeUint32LE(r,t,0),Ot.writeUint32LE(h,t,4),Ot.writeUint32LE(k,t,8),Ot.writeUint32LE(pe,t,12),Ot.writeUint32LE(f,t,16),Ot.writeUint32LE(l,t,20),Ot.writeUint32LE(v,t,24),Ot.writeUint32LE(I,t,28),t}an.hsalsa=Eo;var cn={},mo={},ln={};Object.defineProperty(ln,"__esModule",{value:!0});function Ns(i,e,t){return~(i-1)&e|i-1&t}ln.select=Ns;function Is(i,e){return(i|0)-(e|0)-1>>>31&1}ln.lessOrEqual=Is;function yo(i,e){if(i.length!==e.length)return 0;for(var t=0,r=0;r<i.length;r++)t|=i[r]^e[r];return 1&t-1>>>8}ln.compare=yo;function Os(i,e){return i.length===0||e.length===0?!1:yo(i,e)!==0}ln.equal=Os;(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=ln,t=at;i.DIGEST_LENGTH=16;var r=function(){function c(d){this.digestLength=i.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var h=d[0]|d[1]<<8;this._r[0]=h&8191;var f=d[2]|d[3]<<8;this._r[1]=(h>>>13|f<<3)&8191;var l=d[4]|d[5]<<8;this._r[2]=(f>>>10|l<<6)&7939;var v=d[6]|d[7]<<8;this._r[3]=(l>>>7|v<<9)&8191;var I=d[8]|d[9]<<8;this._r[4]=(v>>>4|I<<12)&255,this._r[5]=I>>>1&8190;var k=d[10]|d[11]<<8;this._r[6]=(I>>>14|k<<2)&8191;var K=d[12]|d[13]<<8;this._r[7]=(k>>>11|K<<5)&8065;var V=d[14]|d[15]<<8;this._r[8]=(K>>>8|V<<8)&8191,this._r[9]=V>>>5&127,this._pad[0]=d[16]|d[17]<<8,this._pad[1]=d[18]|d[19]<<8,this._pad[2]=d[20]|d[21]<<8,this._pad[3]=d[22]|d[23]<<8,this._pad[4]=d[24]|d[25]<<8,this._pad[5]=d[26]|d[27]<<8,this._pad[6]=d[28]|d[29]<<8,this._pad[7]=d[30]|d[31]<<8}return c.prototype._blocks=function(d,h,f){for(var l=this._fin?0:2048,v=this._h[0],I=this._h[1],k=this._h[2],K=this._h[3],V=this._h[4],J=this._h[5],oe=this._h[6],pe=this._h[7],M=this._h[8],R=this._h[9],A=this._r[0],y=this._r[1],n=this._r[2],u=this._r[3],w=this._r[4],b=this._r[5],_=this._r[6],m=this._r[7],O=this._r[8],T=this._r[9];f>=16;){var C=d[h+0]|d[h+1]<<8;v+=C&8191;var D=d[h+2]|d[h+3]<<8;I+=(C>>>13|D<<3)&8191;var L=d[h+4]|d[h+5]<<8;k+=(D>>>10|L<<6)&8191;var q=d[h+6]|d[h+7]<<8;K+=(L>>>7|q<<9)&8191;var N=d[h+8]|d[h+9]<<8;V+=(q>>>4|N<<12)&8191,J+=N>>>1&8191;var Q=d[h+10]|d[h+11]<<8;oe+=(N>>>14|Q<<2)&8191;var z=d[h+12]|d[h+13]<<8;pe+=(Q>>>11|z<<5)&8191;var ee=d[h+14]|d[h+15]<<8;M+=(z>>>8|ee<<8)&8191,R+=ee>>>5|l;var B=0,F=B;F+=v*A,F+=I*(5*T),F+=k*(5*O),F+=K*(5*m),F+=V*(5*_),B=F>>>13,F&=8191,F+=J*(5*b),F+=oe*(5*w),F+=pe*(5*u),F+=M*(5*n),F+=R*(5*y),B+=F>>>13,F&=8191;var se=B;se+=v*y,se+=I*A,se+=k*(5*T),se+=K*(5*O),se+=V*(5*m),B=se>>>13,se&=8191,se+=J*(5*_),se+=oe*(5*b),se+=pe*(5*w),se+=M*(5*u),se+=R*(5*n),B+=se>>>13,se&=8191;var te=B;te+=v*n,te+=I*y,te+=k*A,te+=K*(5*T),te+=V*(5*O),B=te>>>13,te&=8191,te+=J*(5*m),te+=oe*(5*_),te+=pe*(5*b),te+=M*(5*w),te+=R*(5*u),B+=te>>>13,te&=8191;var x=B;x+=v*u,x+=I*n,x+=k*y,x+=K*A,x+=V*(5*T),B=x>>>13,x&=8191,x+=J*(5*O),x+=oe*(5*m),x+=pe*(5*_),x+=M*(5*b),x+=R*(5*w),B+=x>>>13,x&=8191;var E=B;E+=v*w,E+=I*u,E+=k*n,E+=K*y,E+=V*A,B=E>>>13,E&=8191,E+=J*(5*T),E+=oe*(5*O),E+=pe*(5*m),E+=M*(5*_),E+=R*(5*b),B+=E>>>13,E&=8191;var g=B;g+=v*b,g+=I*w,g+=k*u,g+=K*n,g+=V*y,B=g>>>13,g&=8191,g+=J*A,g+=oe*(5*T),g+=pe*(5*O),g+=M*(5*m),g+=R*(5*_),B+=g>>>13,g&=8191;var s=B;s+=v*_,s+=I*b,s+=k*w,s+=K*u,s+=V*n,B=s>>>13,s&=8191,s+=J*y,s+=oe*A,s+=pe*(5*T),s+=M*(5*O),s+=R*(5*m),B+=s>>>13,s&=8191;var p=B;p+=v*m,p+=I*_,p+=k*b,p+=K*w,p+=V*u,B=p>>>13,p&=8191,p+=J*n,p+=oe*y,p+=pe*A,p+=M*(5*T),p+=R*(5*O),B+=p>>>13,p&=8191;var S=B;S+=v*O,S+=I*m,S+=k*_,S+=K*b,S+=V*w,B=S>>>13,S&=8191,S+=J*u,S+=oe*n,S+=pe*y,S+=M*A,S+=R*(5*T),B+=S>>>13,S&=8191;var P=B;P+=v*T,P+=I*O,P+=k*m,P+=K*_,P+=V*b,B=P>>>13,P&=8191,P+=J*w,P+=oe*u,P+=pe*n,P+=M*y,P+=R*A,B+=P>>>13,P&=8191,B=(B<<2)+B|0,B=B+F|0,F=B&8191,B=B>>>13,se+=B,v=F,I=se,k=te,K=x,V=E,J=g,oe=s,pe=p,M=S,R=P,h+=16,f-=16}this._h[0]=v,this._h[1]=I,this._h[2]=k,this._h[3]=K,this._h[4]=V,this._h[5]=J,this._h[6]=oe,this._h[7]=pe,this._h[8]=M,this._h[9]=R},c.prototype.finish=function(d,h){h===void 0&&(h=0);var f=new Uint16Array(10),l,v,I,k;if(this._leftover){for(k=this._leftover,this._buffer[k++]=1;k<16;k++)this._buffer[k]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(l=this._h[1]>>>13,this._h[1]&=8191,k=2;k<10;k++)this._h[k]+=l,l=this._h[k]>>>13,this._h[k]&=8191;for(this._h[0]+=l*5,l=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=l,l=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=l,f[0]=this._h[0]+5,l=f[0]>>>13,f[0]&=8191,k=1;k<10;k++)f[k]=this._h[k]+l,l=f[k]>>>13,f[k]&=8191;for(f[9]-=1<<13,v=(l^1)-1,k=0;k<10;k++)f[k]&=v;for(v=~v,k=0;k<10;k++)this._h[k]=this._h[k]&v|f[k];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,I=this._h[0]+this._pad[0],this._h[0]=I&65535,k=1;k<8;k++)I=(this._h[k]+this._pad[k]|0)+(I>>>16)|0,this._h[k]=I&65535;return d[h+0]=this._h[0]>>>0,d[h+1]=this._h[0]>>>8,d[h+2]=this._h[1]>>>0,d[h+3]=this._h[1]>>>8,d[h+4]=this._h[2]>>>0,d[h+5]=this._h[2]>>>8,d[h+6]=this._h[3]>>>0,d[h+7]=this._h[3]>>>8,d[h+8]=this._h[4]>>>0,d[h+9]=this._h[4]>>>8,d[h+10]=this._h[5]>>>0,d[h+11]=this._h[5]>>>8,d[h+12]=this._h[6]>>>0,d[h+13]=this._h[6]>>>8,d[h+14]=this._h[7]>>>0,d[h+15]=this._h[7]>>>8,this._finished=!0,this},c.prototype.update=function(d){var h=0,f=d.length,l;if(this._leftover){l=16-this._leftover,l>f&&(l=f);for(var v=0;v<l;v++)this._buffer[this._leftover+v]=d[h+v];if(f-=l,h+=l,this._leftover+=l,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(f>=16&&(l=f-f%16,this._blocks(d,h,l),h+=l,f-=l),f){for(var v=0;v<f;v++)this._buffer[this._leftover+v]=d[h+v];this._leftover+=f}return this},c.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var d=new Uint8Array(16);return this.finish(d),d},c.prototype.clean=function(){return t.wipe(this._buffer),t.wipe(this._r),t.wipe(this._h),t.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},c}();i.Poly1305=r;function o(c,d){var h=new r(c);h.update(d);var f=h.digest();return h.clean(),f}i.oneTimeAuth=o;function a(c,d){return c.length!==i.DIGEST_LENGTH||d.length!==i.DIGEST_LENGTH?!1:e.equal(c,d)}i.equal=a})(mo);Object.defineProperty(cn,"__esModule",{value:!0});var Fn=an,ji=mo,tn=at,Cs=nr;function Ps(i,e,t){if(e.length!==24)throw new Error("secretBox nonce must be 24 bytes");var r=new Uint8Array(64),o=new Uint8Array(24+8);o.set(e),Fn.stream(i,o,r,8);for(var a=new Uint8Array(16+t.length),c=0;c<32&&c<t.length;c++)a[16+c]=t[c]^r[32+c];t.length>32&&Fn.streamXOR(i,o,t.subarray(32),a.subarray(16+32),8);for(var d=ji.oneTimeAuth(r.subarray(0,32),a.subarray(16)),c=0;c<d.length;c++)a[c]=d[c];return tn.wipe(d),tn.wipe(r),tn.wipe(o),a}cn.secretBox=Ps;function Ms(i,e,t){if(e.length!==24)throw new Error("secretBox nonce must be 24 bytes");if(t.length<16)throw new Error("secretBox data must be at least 16 bytes");var r=new Uint8Array(64),o=new Uint8Array(24+8);o.set(e),Fn.stream(i,o,r,8);var a=ji.oneTimeAuth(r.subarray(0,32),t.subarray(16));if(!ji.equal(a,t.subarray(0,16)))return null;for(var c=t.subarray(16),d=new Uint8Array(c.length),h=0;h<32&&h<c.length;h++)d[h]=c[h]^r[32+h];return c.length>32&&Fn.streamXOR(i,o,c.subarray(32),d.subarray(32),8),tn.wipe(a),tn.wipe(r),tn.wipe(o),d}cn.openSecretBox=Ms;function ks(i){return Cs.randomBytes(32,i)}cn.generateKey=ks;Object.defineProperty(sn,"__esModule",{value:!0});var Ls=tr,Us=an,wo=cn,_o=at,Bs=tr;sn.generateKeyPair=Bs.generateKeyPair;var Ds=new Uint8Array(16);function sr(i,e){var t=Ls.scalarMult(e,i);return Us.hsalsa(t,Ds,t),t}sn.precomputeSharedKey=sr;function Ks(i,e,t,r){var o=sr(i,e),a=wo.secretBox(o,t,r);return _o.wipe(o),a}sn.box=Ks;function Gs(i,e,t,r){var o=sr(i,e),a=wo.openSecretBox(o,t,r);return _o.wipe(o),a}sn.openBox=Gs;(function(i){function e(t){for(var r in t)i.hasOwnProperty(r)||(i[r]=t[r])}Object.defineProperty(i,"__esModule",{value:!0}),e(sn),e(cn)})(rn);var dn={},ei={},ti={};Object.defineProperty(ti,"__esModule",{value:!0});ti.BrowserRandomSource=void 0;const Ar=65536;class js{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let r=0;r<t.length;r+=Ar)this._crypto.getRandomValues(t.subarray(r,r+Math.min(t.length-r,Ar)));return t}}ti.BrowserRandomSource=js;var ni={};Object.defineProperty(ni,"__esModule",{value:!0});ni.NodeRandomSource=void 0;const qs=at;class Hs{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof fo<"u"){const e=ho;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const r=new Uint8Array(e);for(let o=0;o<r.length;o++)r[o]=t[o];return(0,qs.wipe)(t),r}}ni.NodeRandomSource=Hs;Object.defineProperty(ei,"__esModule",{value:!0});ei.SystemRandomSource=void 0;const Fs=ti,Qs=ni;class Vs{constructor(){if(this.isAvailable=!1,this.name="",this._source=new Fs.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new Qs.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}ei.SystemRandomSource=Vs;(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.randomStringForEntropy=i.randomString=i.randomUint32=i.randomBytes=i.defaultRandomSource=void 0;const e=ei,t=zn,r=at;i.defaultRandomSource=new e.SystemRandomSource;function o(f,l=i.defaultRandomSource){return l.randomBytes(f)}i.randomBytes=o;function a(f=i.defaultRandomSource){const l=o(4,f),v=(0,t.readUint32LE)(l);return(0,r.wipe)(l),v}i.randomUint32=a;const c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function d(f,l=c,v=i.defaultRandomSource){if(l.length<2)throw new Error("randomString charset is too short");if(l.length>256)throw new Error("randomString charset is too long");let I="";const k=l.length,K=256-256%k;for(;f>0;){const V=o(Math.ceil(f*256/K),v);for(let J=0;J<V.length&&f>0;J++){const oe=V[J];oe<K&&(I+=l.charAt(oe%k),f--)}(0,r.wipe)(V)}return I}i.randomString=d;function h(f,l=c,v=i.defaultRandomSource){const I=Math.ceil(f/(Math.log(l.length)/Math.LN2));return d(I,l,v)}i.randomStringForEntropy=h})(dn);var ii={};Object.defineProperty(ii,"__esModule",{value:!0});var br="utf8: invalid string",_t="utf8: invalid source encoding";function Ws(i){for(var e=new Uint8Array(Ao(i)),t=0,r=0;r<i.length;r++){var o=i.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=192|o>>6,e[t++]=128|o&63):o<55296?(e[t++]=224|o>>12,e[t++]=128|o>>6&63,e[t++]=128|o&63):(r++,o=(o&1023)<<10,o|=i.charCodeAt(r)&1023,o+=65536,e[t++]=240|o>>18,e[t++]=128|o>>12&63,e[t++]=128|o>>6&63,e[t++]=128|o&63)}return e}var un=ii.encode=Ws;function Ao(i){for(var e=0,t=0;t<i.length;t++){var r=i.charCodeAt(t);if(r<128)e+=1;else if(r<2048)e+=2;else if(r<55296)e+=3;else if(r<=57343){if(t>=i.length-1)throw new Error(br);t++,e+=4}else throw new Error(br)}return e}ii.encodedLength=Ao;function Xs(i){for(var e=[],t=0;t<i.length;t++){var r=i[t];if(r&128){var o=void 0;if(r<224){if(t>=i.length)throw new Error(_t);var a=i[++t];if((a&192)!==128)throw new Error(_t);r=(r&31)<<6|a&63,o=128}else if(r<240){if(t>=i.length-1)throw new Error(_t);var a=i[++t],c=i[++t];if((a&192)!==128||(c&192)!==128)throw new Error(_t);r=(r&15)<<12|(a&63)<<6|c&63,o=2048}else if(r<248){if(t>=i.length-2)throw new Error(_t);var a=i[++t],c=i[++t],d=i[++t];if((a&192)!==128||(c&192)!==128||(d&192)!==128)throw new Error(_t);r=(r&15)<<18|(a&63)<<12|(c&63)<<6|d&63,o=65536}else throw new Error(_t);if(r<o||r>=55296&&r<=57343)throw new Error(_t);if(r>=65536){if(r>1114111)throw new Error(_t);r-=65536,e.push(String.fromCharCode(55296|r>>10)),r=56320|r&1023}}e.push(String.fromCharCode(r))}return e.join("")}ii.decode=Xs;var bo={};Object.defineProperty(bo,"__esModule",{value:!0});function Ys(){for(var i=0,e=0;e<arguments.length;e++)i+=arguments[e].length;for(var t=new Uint8Array(i),r=0,e=0;e<arguments.length;e++){var o=arguments[e];t.set(o,r),r+=o.length}return t}var Js=bo.concat=Ys,Wt=globalThis&&globalThis.__awaiter||function(i,e,t,r){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(l){try{f(r.next(l))}catch(v){c(v)}}function h(l){try{f(r.throw(l))}catch(v){c(v)}}function f(l){l.done?a(l.value):o(l.value).then(d,h)}f((r=r.apply(i,e||[])).next())})};const qi=24;function kt(i){return Buffer.from(i).toString("hex")}function en(i){return Wt(this,void 0,void 0,function*(){return kt(typeof i=="string"?yt.hash(un(i),32):yt.hash(i,32))})}function Rr(i){return Wt(this,void 0,void 0,function*(){return bn.generateKeyPairFromSeed(yt.hash(un(i),32))})}function Ro(i,e){return Wt(this,void 0,void 0,function*(){const t=Buffer.from(dn.randomBytes(qi)),r=Buffer.concat([t,Buffer.from(rn.secretBox(e,t,Buffer.from(i,"utf8")))]);return kt(r)})}function So(i,e){return Wt(this,void 0,void 0,function*(){const t=i.slice(0,qi),r=i.slice(qi),o=rn.openSecretBox(e,t,r);if(!o)throw new Error("Decryption failed");return Buffer.from(o).toString("utf8")})}function Zs(i,e){return Wt(this,void 0,void 0,function*(){const t=bn.convertPublicKeyToX25519(Buffer.from(e)),r=rn.generateKeyPair(),a=new yt.BLAKE2b(24).update(r.publicKey,32).update(t,32).digest(),c=typeof i=="string"?un(i):i,d=rn.box(t,r.secretKey,a,c);return kt(Js(r.publicKey,d))})}function To(i,e,t){return Wt(this,void 0,void 0,function*(){const r=bn.convertSecretKeyToX25519(Buffer.from(t)),o=bn.convertPublicKeyToX25519(Buffer.from(e)),a=typeof i=="string"?un(i):i,c=a.slice(0,32),d=a.slice(32),f=new yt.BLAKE2b(24).update(c,32).update(o,32).digest(),l=rn.openBox(c,r,f,d);if(!l)throw new Error("Decryption failed");return Buffer.from(l).toString()})}function zs(i){return Wt(this,void 0,void 0,function*(){const e={edpk:{length:54,prefix:Buffer.from(new Uint8Array([6,161,159]))},sppk:{length:55,prefix:Buffer.from(new Uint8Array([6,161,161]))},p2pk:{length:55,prefix:Buffer.from(new Uint8Array([6,161,164]))}};let t,r;if(i.length===64)t=e.edpk.prefix,r=i;else{const a=Object.entries(e);for(let c=0;c<a.length;c++){const[d,h]=a[c];if(i.startsWith(d)&&i.length===h.length){t=h.prefix;const f=nn.decode(i);r=f.slice(d.length,f.length).toString("hex");break}}}if(!t||!r)throw new Error(`invalid publicKey: ${i}`);const o=yt.hash(Buffer.from(r,"hex"),20);return nn.encode(Buffer.concat([t,Buffer.from(o)]))})}function Sr(i,e){return`@${i}:${e}`}var $s=globalThis&&globalThis.__awaiter||function(i,e,t,r){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(l){try{f(r.next(l))}catch(v){c(v)}}function h(l){try{f(r.throw(l))}catch(v){c(v)}}function f(l){l.done?a(l.value):o(l.value).then(d,h)}f((r=r.apply(i,e||[])).next())})};function Nt(){return $s(this,void 0,void 0,function*(){const i=dn.randomBytes(16);return[i.slice(0,4),i.slice(4,6),i.slice(6,8),i.slice(8,10),i.slice(10,16)].map(function(e){return Buffer.from(e).toString("hex")}).join("-")})}const Qn=24,Vn=16;var Ae;(function(i){i.BlockchainRequest="blockchain_request",i.PermissionRequest="permission_request",i.SignPayloadRequest="sign_payload_request",i.OperationRequest="operation_request",i.BroadcastRequest="broadcast_request",i.BlockchainResponse="blockchain_response",i.PermissionResponse="permission_response",i.SignPayloadResponse="sign_payload_response",i.OperationResponse="operation_response",i.BroadcastResponse="broadcast_response",i.Acknowledge="acknowledge",i.Disconnect="disconnect",i.Error="error"})(Ae||(Ae={}));var Tt;(function(i){i.SIGN="sign",i.OPERATION_REQUEST="operation_request",i.ENCRYPT="encrypt",i.THRESHOLD="threshold"})(Tt||(Tt={}));var Oe;(function(i){i.MAINNET="mainnet",i.GHOSTNET="ghostnet",i.MONDAYNET="mondaynet",i.DAILYNET="dailynet",i.DELPHINET="delphinet",i.EDONET="edonet",i.FLORENCENET="florencenet",i.GRANADANET="granadanet",i.HANGZHOUNET="hangzhounet",i.ITHACANET="ithacanet",i.JAKARTANET="jakartanet",i.KATHMANDUNET="kathmandunet",i.CUSTOM="custom"})(Oe||(Oe={}));var Tr;(function(i){i.ENDORSEMENT="endorsement",i.SEED_NONCE_REVELATION="seed_nonce_revelation",i.DOUBLE_ENDORSEMENT_EVIDENCE="double_endorsement_evidence",i.DOUBLE_BAKING_EVIDENCE="double_baking_evidence",i.ACTIVATE_ACCOUNT="activate_account",i.PROPOSALS="proposals",i.BALLOT="ballot",i.REVEAL="reveal",i.TRANSACTION="transaction",i.ORIGINATION="origination",i.DELEGATION="delegation"})(Tr||(Tr={}));var pt;(function(i){i.WEBSITE="website",i.EXTENSION="extension",i.P2P="p2p"})(pt||(pt={}));var xt;(function(i){i.BACKGROUND="toBackground",i.PAGE="toPage",i.EXTENSION="toExtension"})(xt||(xt={}));var Te;(function(i){i.BROADCAST_ERROR="BROADCAST_ERROR",i.NETWORK_NOT_SUPPORTED="NETWORK_NOT_SUPPORTED",i.NO_ADDRESS_ERROR="NO_ADDRESS_ERROR",i.NO_PRIVATE_KEY_FOUND_ERROR="NO_PRIVATE_KEY_FOUND_ERROR",i.NOT_GRANTED_ERROR="NOT_GRANTED_ERROR",i.PARAMETERS_INVALID_ERROR="PARAMETERS_INVALID_ERROR",i.TOO_MANY_OPERATIONS="TOO_MANY_OPERATIONS",i.TRANSACTION_INVALID_ERROR="TRANSACTION_INVALID_ERROR",i.SIGNATURE_TYPE_NOT_SUPPORTED="SIGNATURE_TYPE_NOT_SUPPORTED",i.ABORTED_ERROR="ABORTED_ERROR",i.UNKNOWN_ERROR="UNKNOWN_ERROR"})(Te||(Te={}));var ut;(function(i){i.NOT_CONNECTED="NOT_CONNECTED",i.CONNECTING="CONNECTING",i.CONNECTED="CONNECTED"})(ut||(ut={}));var Qt;(function(i){i.CHROME_MESSAGE="chrome_message",i.POST_MESSAGE="post_message",i.LEDGER="ledger",i.P2P="p2p"})(Qt||(Qt={}));var _e;(function(i){i.TRANSPORT_P2P_PEERS_DAPP="beacon:communication-peers-dapp",i.TRANSPORT_P2P_PEERS_WALLET="beacon:communication-peers-wallet",i.TRANSPORT_POSTMESSAGE_PEERS_DAPP="beacon:postmessage-peers-dapp",i.TRANSPORT_POSTMESSAGE_PEERS_WALLET="beacon:postmessage-peers-wallet",i.ACCOUNTS="beacon:accounts",i.ACTIVE_ACCOUNT="beacon:active-account",i.BEACON_SDK_SECRET_SEED="beacon:sdk-secret-seed",i.APP_METADATA_LIST="beacon:app-metadata-list",i.PERMISSION_LIST="beacon:permissions",i.BEACON_SDK_VERSION="beacon:sdk_version",i.MATRIX_PRESERVED_STATE="beacon:sdk-matrix-preserved-state",i.MATRIX_PEER_ROOM_IDS="beacon:matrix-peer-rooms",i.MATRIX_SELECTED_NODE="beacon:matrix-selected-node",i.MULTI_NODE_SETUP_DONE="beacon:multi-node-setup"})(_e||(_e={}));const ui={[_e.TRANSPORT_P2P_PEERS_DAPP]:[],[_e.TRANSPORT_P2P_PEERS_WALLET]:[],[_e.TRANSPORT_POSTMESSAGE_PEERS_DAPP]:[],[_e.TRANSPORT_POSTMESSAGE_PEERS_WALLET]:[],[_e.ACCOUNTS]:[],[_e.ACTIVE_ACCOUNT]:void 0,[_e.BEACON_SDK_SECRET_SEED]:void 0,[_e.APP_METADATA_LIST]:[],[_e.PERMISSION_LIST]:[],[_e.BEACON_SDK_VERSION]:void 0,[_e.MATRIX_PRESERVED_STATE]:{},[_e.MATRIX_PEER_ROOM_IDS]:{},[_e.MATRIX_SELECTED_NODE]:void 0,[_e.MULTI_NODE_SETUP_DONE]:void 0};var Ct;(function(i){i.RAW="raw",i.OPERATION="operation",i.MICHELINE="micheline"})(Ct||(Ct={}));var Rn;(function(i){i.LIGHT="light",i.DARK="dark"})(Rn||(Rn={}));const ea="3.2.0",xo="3",On=[i=>{}];let Re={postMessage:(i,e)=>{console.log("GOT MOCK POST MESSAGE",i),On.forEach(t=>{t({data:i})})},addEventListener:(i,e)=>{On.push(e)},removeEventListener:(i,e)=>{On.splice(On.indexOf(t=>t===e),1)},location:{origin:"*"}};try{typeof window<"u"&&(Re=window)}catch(i){console.log(`not defined: ${i}`)}var Cn=globalThis&&globalThis.__awaiter||function(i,e,t,r){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(l){try{f(r.next(l))}catch(v){c(v)}}function h(l){try{f(r.throw(l))}catch(v){c(v)}}function f(l){l.done?a(l.value):o(l.value).then(d,h)}f((r=r.apply(i,e||[])).next())})};class ta{constructor(e){if(this._beaconId=new Me,this._keyPair=new Me,!e.name)throw new Error("Name not set");if(!e.storage)throw new Error("Storage not set");this.name=e.name,this.iconUrl=e.iconUrl,this.appUrl=e.appUrl,this.storage=e.storage,Re.beaconCreatedClientInstance?console.error("[BEACON] It looks like you created multiple Beacon SDK Client instances. This can lead to problems. Only create one instance and re-use it everywhere."):Re.beaconCreatedClientInstance=!0,this.initSDK().catch(console.error)}get beaconId(){return this._beaconId.promise}get keyPair(){return this._keyPair.promise}destroy(){return Cn(this,void 0,void 0,function*(){yield this.removeBeaconEntriesFromStorage(),Re.beaconCreatedClientInstance=!1})}initSDK(){return Cn(this,void 0,void 0,function*(){return this.storage.set(_e.BEACON_SDK_VERSION,ea).catch(console.error),this.loadOrCreateBeaconSecret().catch(console.error),this.keyPair.then(e=>{this._beaconId.resolve(kt(e.publicKey))})})}removeBeaconEntriesFromStorage(){return Cn(this,void 0,void 0,function*(){const e=Object.values(_e);yield Promise.all(e.map(t=>this.storage.delete(t)))})}loadOrCreateBeaconSecret(){return Cn(this,void 0,void 0,function*(){const e=yield this.storage.get(_e.BEACON_SDK_SECRET_SEED);if(e&&typeof e=="string")this._keyPair.resolve(yield Rr(e));else{const t=yield Nt();yield this.storage.set(_e.BEACON_SDK_SECRET_SEED,t),this._keyPair.resolve(yield Rr(t))}})}}var vn=globalThis&&globalThis.__awaiter||function(i,e,t,r){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(l){try{f(r.next(l))}catch(v){c(v)}}function h(l){try{f(r.throw(l))}catch(v){c(v)}}function f(l){l.done?a(l.value):o(l.value).then(d,h)}f((r=r.apply(i,e||[])).next())})};class ar{constructor(e,t){this.storage=e,this.storageKey=t}getAll(){return vn(this,void 0,void 0,function*(){return this.storage.get(this.storageKey)})}getOne(e){return vn(this,void 0,void 0,function*(){const t=yield this.storage.get(this.storageKey);return t.find(e)})}addOne(e,t,r=!0){return vn(this,void 0,void 0,function*(){const o=yield this.storage.get(this.storageKey);if(!o.some(t))o.push(e);else if(r)for(let a=0;a<o.length;a++)t(o[a])&&(o[a]=e);return this.storage.set(this.storageKey,o)})}remove(e){return vn(this,void 0,void 0,function*(){const t=yield this.storage.get(this.storageKey),r=t.filter(o=>!e(o));return this.storage.set(this.storageKey,r)})}removeAll(){return vn(this,void 0,void 0,function*(){return this.storage.delete(this.storageKey)})}}var na=globalThis&&globalThis.__awaiter||function(i,e,t,r){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(l){try{f(r.next(l))}catch(v){c(v)}}function h(l){try{f(r.throw(l))}catch(v){c(v)}}function f(l){l.done?a(l.value):o(l.value).then(d,h)}f((r=r.apply(i,e||[])).next())})};const Hi=(i,e)=>na(void 0,void 0,void 0,function*(){const t=[i,e.type];e.name&&t.push(`name:${e.name}`),e.rpcUrl&&t.push(`rpc:${e.rpcUrl}`);const r=Buffer.from(yt.hash(un(t.join("-")),10));return nn.encode(r)});var ia=globalThis&&globalThis.__awaiter||function(i,e,t,r){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(l){try{f(r.next(l))}catch(v){c(v)}}function h(l){try{f(r.throw(l))}catch(v){c(v)}}function f(l){l.done?a(l.value):o(l.value).then(d,h)}f((r=r.apply(i,e||[])).next())})};class ra{static hasPermission(e,t,r){return ia(this,void 0,void 0,function*(){switch(e.type){case Ae.PermissionRequest:case Ae.BroadcastRequest:return!0;case Ae.OperationRequest:{const o=yield Hi(e.sourceAddress,e.network),a=yield t(o);return a?a.scopes.includes(Tt.OPERATION_REQUEST):!1}case Ae.SignPayloadRequest:{const a=(yield r()).filter(c=>c.address===e.sourceAddress);return a.length===0?!1:a.some(c=>c.scopes.includes(Tt.SIGN))}default:throw new Error("Message not handled")}})}}var Bt=globalThis&&globalThis.__awaiter||function(i,e,t,r){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(l){try{f(r.next(l))}catch(v){c(v)}}function h(l){try{f(r.throw(l))}catch(v){c(v)}}function f(l){l.done?a(l.value):o(l.value).then(d,h)}f((r=r.apply(i,e||[])).next())})};class oa{constructor(e){this.storageManager=new ar(e,_e.ACCOUNTS)}getAccounts(){return Bt(this,void 0,void 0,function*(){return this.storageManager.getAll()})}getAccount(e){return Bt(this,void 0,void 0,function*(){return this.storageManager.getOne(t=>t.accountIdentifier===e)})}addAccount(e){return Bt(this,void 0,void 0,function*(){return this.storageManager.addOne(e,t=>t.accountIdentifier===e.accountIdentifier)})}removeAccount(e){return Bt(this,void 0,void 0,function*(){return this.storageManager.remove(t=>t.accountIdentifier===e)})}removeAccounts(e){return Bt(this,void 0,void 0,function*(){return this.storageManager.remove(t=>e.includes(t.accountIdentifier))})}removeAllAccounts(){return Bt(this,void 0,void 0,function*(){return this.storageManager.removeAll()})}hasPermission(e){return Bt(this,void 0,void 0,function*(){return ra.hasPermission(e,this.getAccount.bind(this),this.getAccounts.bind(this))})}}var sa=globalThis&&globalThis.__awaiter||function(i,e,t,r){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(l){try{f(r.next(l))}catch(v){c(v)}}function h(l){try{f(r.throw(l))}catch(v){c(v)}}function f(l){l.done?a(l.value):o(l.value).then(d,h)}f((r=r.apply(i,e||[])).next())})};const on=i=>sa(void 0,void 0,void 0,function*(){const e=Buffer.from(yt.hash(Buffer.from(i,"hex"),5));return nn.encode(e)});let No=!!Re.beaconSdkDebugEnabled;No&&console.log("[BEACON]: Debug mode is ON (turned on either by the developer or a browser extension)");const aa=()=>No;class ca{constructor(){}debug(e,t,...r){this._log("debug",e,t,r)}log(e,t,...r){this._log("log",e,t,r)}warn(e,t,...r){this._log("warn",e,t,r)}error(e,t,...r){this._log("error",e,t,r)}_log(e,t,r,o=[]){if(!aa())return;let a=`[BEACON] ${new Date().toISOString()} [${t}](${r})`,c=o;switch(o[0]&&typeof o[0]=="string"&&(a+=` ${o[0]}`,c=o.slice(1)),e){case"error":console.group(a),console.error(...c);break;case"warn":console.group(a),console.warn(...c);break;case"debug":console.groupCollapsed(a),console.debug(...c);break;default:console.group(a),console.log(...c)}console.groupEnd()}}class it{constructor(e){this.name=e}debug(e,...t){Pn.debug(this.name,e,t)}log(e,...t){Pn.log(this.name,e,t)}warn(e,...t){Pn.warn(this.name,e,t)}error(e,...t){Pn.error(this.name,e,t)}}new it("");let Pn=new ca;var rt=globalThis&&globalThis.__awaiter||function(i,e,t,r){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(l){try{f(r.next(l))}catch(v){c(v)}}function h(l){try{f(r.throw(l))}catch(v){c(v)}}function f(l){l.done?a(l.value):o(l.value).then(d,h)}f((r=r.apply(i,e||[])).next())})};const la=new it("Client");class da extends ta{constructor(e){var t;super(e),this.rateLimit=2,this.rateLimitWindowInSeconds=5,this.requestCounter=[],this._transport=new Me,this.accountManager=new oa(e.storage),this.matrixNodes=(t=e.matrixNodes)!==null&&t!==void 0?t:[],this.handleResponse=(r,o)=>{throw new Error(`not overwritten${JSON.stringify(r)} - ${JSON.stringify(o)}`)}}get transport(){return this._transport.promise}get connectionStatus(){var e,t;return(t=(e=this._transport.promiseResult)===null||e===void 0?void 0:e.connectionStatus)!==null&&t!==void 0?t:ut.NOT_CONNECTED}get ready(){return this.transport.then(()=>{})}getAccounts(){return rt(this,void 0,void 0,function*(){return this.accountManager.getAccounts()})}getAccount(e){return rt(this,void 0,void 0,function*(){return this.accountManager.getAccount(e)})}removeAccount(e){return rt(this,void 0,void 0,function*(){return this.accountManager.removeAccount(e)})}removeAllAccounts(){return rt(this,void 0,void 0,function*(){return this.accountManager.removeAllAccounts()})}addRequestAndCheckIfRateLimited(){return rt(this,void 0,void 0,function*(){const e=new Date().getTime();return this.requestCounter=this.requestCounter.filter(t=>t+this.rateLimitWindowInSeconds*1e3>e),this.requestCounter.push(e),this.requestCounter.length>this.rateLimit})}init(e){return rt(this,void 0,void 0,function*(){return this._transport.status===Et.RESOLVED?(yield this.transport).type:(yield this.setTransport(e),e.type)})}getOwnAppMetadata(){return rt(this,void 0,void 0,function*(){return{senderId:yield on(yield this.beaconId),name:this.name,icon:this.iconUrl}})}getPeers(){return rt(this,void 0,void 0,function*(){return(yield this.transport).getPeers()})}addPeer(e){return rt(this,void 0,void 0,function*(){return(yield this.transport).addPeer(e)})}destroy(){const e=Object.create(null,{destroy:{get:()=>super.destroy}});return rt(this,void 0,void 0,function*(){this._transport.status===Et.RESOLVED&&(yield(yield this.transport).disconnect()),yield e.destroy.call(this)})}setTransport(e){return rt(this,void 0,void 0,function*(){e?this._transport.isSettled()?this._transport=Me.resolve(e):this._transport.resolve(e):this._transport.isSettled()&&(this._transport=new Me)})}addListener(e){return rt(this,void 0,void 0,function*(){e.addListener((t,r)=>rt(this,void 0,void 0,function*(){if(typeof t=="string"){const o=yield new Vt().deserialize(t);this.handleResponse(o,r)}})).catch(t=>la.error("addListener",t))})}sendDisconnectToPeer(e,t){return rt(this,void 0,void 0,function*(){const r={id:yield Nt(),version:e.version,senderId:yield on(yield this.beaconId),type:Ae.Disconnect},o=yield new Vt().serialize(r);yield(t!=null?t:yield this.transport).send(o,e)})}}class ct{constructor(e,t){this.name="BeaconError",this.title="Error",this.message=`[${e}]:${t}`,this.description=t}get fullDescription(){return{description:this.description}}static getError(e,t){switch(e){case Te.BROADCAST_ERROR:return new ua;case Te.NETWORK_NOT_SUPPORTED:return new fa;case Te.NO_ADDRESS_ERROR:return new ha;case Te.NO_PRIVATE_KEY_FOUND_ERROR:return new va;case Te.NOT_GRANTED_ERROR:return new pa;case Te.PARAMETERS_INVALID_ERROR:return new ga;case Te.TOO_MANY_OPERATIONS:return new Ea;case Te.TRANSACTION_INVALID_ERROR:return new ma(t);case Te.SIGNATURE_TYPE_NOT_SUPPORTED:return new Ra;case Te.ABORTED_ERROR:return new _a;case Te.UNKNOWN_ERROR:return new Io}}}class ua extends ct{constructor(){super(Te.BROADCAST_ERROR,"The transaction could not be broadcast to the network. Please try again."),this.name="BroadcastBeaconError",this.title="Broadcast Error"}}class fa extends ct{constructor(){super(Te.NETWORK_NOT_SUPPORTED,"The wallet does not support this network. Please select another one."),this.name="NetworkNotSupportedBeaconError",this.title="Network Error"}}class ha extends ct{constructor(){super(Te.NO_ADDRESS_ERROR,"The wallet does not have an account set up. Please make sure to set up your wallet and try again."),this.name="NoAddressBeaconError",this.title="No Address"}}class va extends ct{constructor(){super(Te.NO_PRIVATE_KEY_FOUND_ERROR,"The account you are trying to interact with is not available. Please make sure to add the account to your wallet and try again."),this.name="NoPrivateKeyBeaconError",this.title="Account Not Found"}}class pa extends ct{constructor(){super(Te.NOT_GRANTED_ERROR,"You do not have the necessary permissions to perform this action. Please initiate another permission request and give the necessary permissions."),this.name="NotGrantedBeaconError",this.title="Permission Not Granted"}}class ga extends ct{constructor(){super(Te.PARAMETERS_INVALID_ERROR,"Some of the parameters you provided are invalid and the request could not be completed. Please check your inputs and try again."),this.name="ParametersInvalidBeaconError",this.title="Parameters Invalid"}}class Ea extends ct{constructor(){super(Te.TOO_MANY_OPERATIONS,"The request contains too many transactions. Please include fewer operations and try again."),this.name="TooManyOperationsBeaconError",this.title="Too Many Operations"}}class ma extends ct{constructor(e){super(Te.TRANSACTION_INVALID_ERROR,"The transaction is invalid and the node did not accept it."),this.data=e,this.name="TransactionInvalidBeaconError",this.title="Transaction Invalid",this.data=e}get fullDescription(){return{description:this.description,data:JSON.stringify(this.data,void 0,2)}}}class Io extends ct{constructor(){super(Te.UNKNOWN_ERROR,"An unknown error occured. Please try again or report it to a developer."),this.name="UnknownBeaconError",this.title="Error"}}var ft=globalThis&&globalThis.__awaiter||function(i,e,t,r){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(l){try{f(r.next(l))}catch(v){c(v)}}function h(l){try{f(r.throw(l))}catch(v){c(v)}}function f(l){l.done?a(l.value):o(l.value).then(d,h)}f((r=r.apply(i,e||[])).next())})};const At=new it("Transport");class Oo{constructor(e,t,r){this.type=Qt.POST_MESSAGE,this._isConnected=ut.NOT_CONNECTED,this.listeners=[],this.name=e,this.client=t,this.peerManager=r}get connectionStatus(){return this._isConnected}static isAvailable(){return ft(this,void 0,void 0,function*(){return Promise.resolve(!1)})}connect(){return ft(this,void 0,void 0,function*(){At.log("connect"),this._isConnected=ut.CONNECTED})}disconnect(){return ft(this,void 0,void 0,function*(){At.log("disconnect"),this._isConnected=ut.NOT_CONNECTED})}send(e,t){return ft(this,void 0,void 0,function*(){if(t)return this.client.sendMessage(e,t);{const o=(yield this.getPeers()).map(a=>this.client.sendMessage(e,a));return(yield Promise.all(o))[0]}})}addListener(e){return ft(this,void 0,void 0,function*(){At.debug("addListener"),this.listeners.push(e)})}removeListener(e){return ft(this,void 0,void 0,function*(){At.log("removeListener"),this.listeners=this.listeners.filter(t=>t!==e)})}getPeers(){return ft(this,void 0,void 0,function*(){return this.peerManager.getPeers()})}addPeer(e,t=!0){return ft(this,void 0,void 0,function*(){At.log("addPeer","adding peer",e),yield this.peerManager.addPeer(e),yield this.listen(e.publicKey)})}removePeer(e){return ft(this,void 0,void 0,function*(){At.log("removePeer","removing peer",e),yield this.peerManager.removePeer(e.publicKey),this.client&&(yield this.client.unsubscribeFromEncryptedMessage(e.publicKey))})}removeAllPeers(){return ft(this,void 0,void 0,function*(){At.log("removeAllPeers"),yield this.peerManager.removeAllPeers(),this.client&&(yield this.client.unsubscribeFromEncryptedMessages())})}notifyListeners(e,t){return ft(this,void 0,void 0,function*(){this.listeners.length===0?At.warn("notifyListeners","0 listeners notified!",this):At.log("notifyListeners",`Notifying ${this.listeners.length} listeners`,this),this.listeners.forEach(r=>{r(e,t)})})}}globalThis&&globalThis.__awaiter;var Mn=globalThis&&globalThis.__awaiter||function(i,e,t,r){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(l){try{f(r.next(l))}catch(v){c(v)}}function h(l){try{f(r.throw(l))}catch(v){c(v)}}function f(l){l.done?a(l.value):o(l.value).then(d,h)}f((r=r.apply(i,e||[])).next())})};class ya{constructor(e){this.prefix=e}static isSupported(){return Mn(this,void 0,void 0,function*(){return Promise.resolve(Boolean(typeof window<"u")&&Boolean(window.localStorage))})}get(e){return Mn(this,void 0,void 0,function*(){const t=localStorage.getItem(this.getPrefixedKey(e));if(t)try{return JSON.parse(t)}catch{return t}else return typeof ui[e]=="object"?JSON.parse(JSON.stringify(ui[e])):ui[e]})}set(e,t){return Mn(this,void 0,void 0,function*(){return typeof t=="string"?localStorage.setItem(this.getPrefixedKey(e),t):localStorage.setItem(this.getPrefixedKey(e),JSON.stringify(t))})}delete(e){return Mn(this,void 0,void 0,function*(){return Promise.resolve(localStorage.removeItem(this.getPrefixedKey(e)))})}getPrefixedKey(e){return this.prefix?`${this.prefix}-${e}`:e}}globalThis&&globalThis.__awaiter;new it("STORAGE");var xr=globalThis&&globalThis.__awaiter||function(i,e,t,r){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(l){try{f(r.next(l))}catch(v){c(v)}}function h(l){try{f(r.throw(l))}catch(v){c(v)}}function f(l){l.done?a(l.value):o(l.value).then(d,h)}f((r=r.apply(i,e||[])).next())})};class Vt{serialize(e){return xr(this,void 0,void 0,function*(){const t=JSON.stringify(e);return nn.encode(Buffer.from(t))})}deserialize(e){return xr(this,void 0,void 0,function*(){if(typeof e!="string")throw new Error("Encoded payload needs to be a string");return JSON.parse(nn.decode(e).toString())})}}var Jt=globalThis&&globalThis.__awaiter||function(i,e,t,r){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(l){try{f(r.next(l))}catch(v){c(v)}}function h(l){try{f(r.throw(l))}catch(v){c(v)}}function f(l){l.done?a(l.value):o(l.value).then(d,h)}f((r=r.apply(i,e||[])).next())})};class wa{constructor(e){this.storageManager=new ar(e,_e.APP_METADATA_LIST)}getAppMetadataList(){return Jt(this,void 0,void 0,function*(){return this.storageManager.getAll()})}getAppMetadata(e){return Jt(this,void 0,void 0,function*(){return this.storageManager.getOne(t=>t.senderId===e)})}addAppMetadata(e){return Jt(this,void 0,void 0,function*(){return this.storageManager.addOne(e,t=>t.senderId===e.senderId)})}removeAppMetadata(e){return Jt(this,void 0,void 0,function*(){return this.storageManager.remove(t=>t.senderId===e)})}removeAppMetadatas(e){return Jt(this,void 0,void 0,function*(){return this.storageManager.remove(t=>e.includes(t.senderId))})}removeAllAppMetadata(){return Jt(this,void 0,void 0,function*(){return this.storageManager.removeAll()})}}globalThis&&globalThis.__awaiter;class _a extends ct{constructor(){super(Te.ABORTED_ERROR,"The action was aborted by the user."),this.name="UnknownBeaconError",this.title="Aborted"}}var Dt=globalThis&&globalThis.__awaiter||function(i,e,t,r){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(l){try{f(r.next(l))}catch(v){c(v)}}function h(l){try{f(r.throw(l))}catch(v){c(v)}}function f(l){l.done?a(l.value):o(l.value).then(d,h)}f((r=r.apply(i,e||[])).next())})};class Wn{constructor(e,t){this.storageManager=new ar(e,t)}hasPeer(e){return Dt(this,void 0,void 0,function*(){return!!(yield this.getPeer(e))})}getPeers(){return Dt(this,void 0,void 0,function*(){return this.storageManager.getAll()})}getPeer(e){return Dt(this,void 0,void 0,function*(){return this.storageManager.getOne(t=>t.publicKey===e)})}addPeer(e){return Dt(this,void 0,void 0,function*(){return this.storageManager.addOne(e,t=>t.publicKey===e.publicKey)})}removePeer(e){return Dt(this,void 0,void 0,function*(){return this.storageManager.remove(t=>t.publicKey===e)})}removePeers(e){return Dt(this,void 0,void 0,function*(){return this.storageManager.remove(t=>e.includes(t.publicKey))})}removeAllPeers(){return Dt(this,void 0,void 0,function*(){return this.storageManager.removeAll()})}}var qt={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.convertSecretKeyToX25519=i.convertPublicKeyToX25519=i.verify=i.sign=i.extractPublicKeyFromSecretKey=i.generateKeyPair=i.generateKeyPairFromSeed=i.SEED_LENGTH=i.SECRET_KEY_LENGTH=i.PUBLIC_KEY_LENGTH=i.SIGNATURE_LENGTH=void 0;const e=dn,t=hs,r=at;i.SIGNATURE_LENGTH=64,i.PUBLIC_KEY_LENGTH=32,i.SECRET_KEY_LENGTH=64,i.SEED_LENGTH=32;function o(x){const E=new Float64Array(16);if(x)for(let g=0;g<x.length;g++)E[g]=x[g];return E}const a=new Uint8Array(32);a[0]=9;const c=o(),d=o([1]),h=o([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),f=o([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),l=o([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),v=o([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),I=o([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function k(x,E){for(let g=0;g<16;g++)x[g]=E[g]|0}function K(x){let E=1;for(let g=0;g<16;g++){let s=x[g]+E+65535;E=Math.floor(s/65536),x[g]=s-E*65536}x[0]+=E-1+37*(E-1)}function V(x,E,g){const s=~(g-1);for(let p=0;p<16;p++){const S=s&(x[p]^E[p]);x[p]^=S,E[p]^=S}}function J(x,E){const g=o(),s=o();for(let p=0;p<16;p++)s[p]=E[p];K(s),K(s),K(s);for(let p=0;p<2;p++){g[0]=s[0]-65517;for(let P=1;P<15;P++)g[P]=s[P]-65535-(g[P-1]>>16&1),g[P-1]&=65535;g[15]=s[15]-32767-(g[14]>>16&1);const S=g[15]>>16&1;g[14]&=65535,V(s,g,1-S)}for(let p=0;p<16;p++)x[2*p]=s[p]&255,x[2*p+1]=s[p]>>8}function oe(x,E){let g=0;for(let s=0;s<32;s++)g|=x[s]^E[s];return(1&g-1>>>8)-1}function pe(x,E){const g=new Uint8Array(32),s=new Uint8Array(32);return J(g,x),J(s,E),oe(g,s)}function M(x){const E=new Uint8Array(32);return J(E,x),E[0]&1}function R(x,E){for(let g=0;g<16;g++)x[g]=E[2*g]+(E[2*g+1]<<8);x[15]&=32767}function A(x,E,g){for(let s=0;s<16;s++)x[s]=E[s]+g[s]}function y(x,E,g){for(let s=0;s<16;s++)x[s]=E[s]-g[s]}function n(x,E,g){let s,p,S=0,P=0,G=0,j=0,X=0,le=0,W=0,be=0,Y=0,ce=0,ae=0,ne=0,$=0,Z=0,ie=0,re=0,ue=0,fe=0,ve=0,ge=0,Ee=0,me=0,ye=0,we=0,It=0,Ut=0,Yt=0,hn=0,In=0,di=0,yr=0,Le=g[0],Ue=g[1],Be=g[2],De=g[3],Ke=g[4],Ge=g[5],je=g[6],qe=g[7],He=g[8],Fe=g[9],Qe=g[10],Ve=g[11],We=g[12],Xe=g[13],Ye=g[14],Je=g[15];s=E[0],S+=s*Le,P+=s*Ue,G+=s*Be,j+=s*De,X+=s*Ke,le+=s*Ge,W+=s*je,be+=s*qe,Y+=s*He,ce+=s*Fe,ae+=s*Qe,ne+=s*Ve,$+=s*We,Z+=s*Xe,ie+=s*Ye,re+=s*Je,s=E[1],P+=s*Le,G+=s*Ue,j+=s*Be,X+=s*De,le+=s*Ke,W+=s*Ge,be+=s*je,Y+=s*qe,ce+=s*He,ae+=s*Fe,ne+=s*Qe,$+=s*Ve,Z+=s*We,ie+=s*Xe,re+=s*Ye,ue+=s*Je,s=E[2],G+=s*Le,j+=s*Ue,X+=s*Be,le+=s*De,W+=s*Ke,be+=s*Ge,Y+=s*je,ce+=s*qe,ae+=s*He,ne+=s*Fe,$+=s*Qe,Z+=s*Ve,ie+=s*We,re+=s*Xe,ue+=s*Ye,fe+=s*Je,s=E[3],j+=s*Le,X+=s*Ue,le+=s*Be,W+=s*De,be+=s*Ke,Y+=s*Ge,ce+=s*je,ae+=s*qe,ne+=s*He,$+=s*Fe,Z+=s*Qe,ie+=s*Ve,re+=s*We,ue+=s*Xe,fe+=s*Ye,ve+=s*Je,s=E[4],X+=s*Le,le+=s*Ue,W+=s*Be,be+=s*De,Y+=s*Ke,ce+=s*Ge,ae+=s*je,ne+=s*qe,$+=s*He,Z+=s*Fe,ie+=s*Qe,re+=s*Ve,ue+=s*We,fe+=s*Xe,ve+=s*Ye,ge+=s*Je,s=E[5],le+=s*Le,W+=s*Ue,be+=s*Be,Y+=s*De,ce+=s*Ke,ae+=s*Ge,ne+=s*je,$+=s*qe,Z+=s*He,ie+=s*Fe,re+=s*Qe,ue+=s*Ve,fe+=s*We,ve+=s*Xe,ge+=s*Ye,Ee+=s*Je,s=E[6],W+=s*Le,be+=s*Ue,Y+=s*Be,ce+=s*De,ae+=s*Ke,ne+=s*Ge,$+=s*je,Z+=s*qe,ie+=s*He,re+=s*Fe,ue+=s*Qe,fe+=s*Ve,ve+=s*We,ge+=s*Xe,Ee+=s*Ye,me+=s*Je,s=E[7],be+=s*Le,Y+=s*Ue,ce+=s*Be,ae+=s*De,ne+=s*Ke,$+=s*Ge,Z+=s*je,ie+=s*qe,re+=s*He,ue+=s*Fe,fe+=s*Qe,ve+=s*Ve,ge+=s*We,Ee+=s*Xe,me+=s*Ye,ye+=s*Je,s=E[8],Y+=s*Le,ce+=s*Ue,ae+=s*Be,ne+=s*De,$+=s*Ke,Z+=s*Ge,ie+=s*je,re+=s*qe,ue+=s*He,fe+=s*Fe,ve+=s*Qe,ge+=s*Ve,Ee+=s*We,me+=s*Xe,ye+=s*Ye,we+=s*Je,s=E[9],ce+=s*Le,ae+=s*Ue,ne+=s*Be,$+=s*De,Z+=s*Ke,ie+=s*Ge,re+=s*je,ue+=s*qe,fe+=s*He,ve+=s*Fe,ge+=s*Qe,Ee+=s*Ve,me+=s*We,ye+=s*Xe,we+=s*Ye,It+=s*Je,s=E[10],ae+=s*Le,ne+=s*Ue,$+=s*Be,Z+=s*De,ie+=s*Ke,re+=s*Ge,ue+=s*je,fe+=s*qe,ve+=s*He,ge+=s*Fe,Ee+=s*Qe,me+=s*Ve,ye+=s*We,we+=s*Xe,It+=s*Ye,Ut+=s*Je,s=E[11],ne+=s*Le,$+=s*Ue,Z+=s*Be,ie+=s*De,re+=s*Ke,ue+=s*Ge,fe+=s*je,ve+=s*qe,ge+=s*He,Ee+=s*Fe,me+=s*Qe,ye+=s*Ve,we+=s*We,It+=s*Xe,Ut+=s*Ye,Yt+=s*Je,s=E[12],$+=s*Le,Z+=s*Ue,ie+=s*Be,re+=s*De,ue+=s*Ke,fe+=s*Ge,ve+=s*je,ge+=s*qe,Ee+=s*He,me+=s*Fe,ye+=s*Qe,we+=s*Ve,It+=s*We,Ut+=s*Xe,Yt+=s*Ye,hn+=s*Je,s=E[13],Z+=s*Le,ie+=s*Ue,re+=s*Be,ue+=s*De,fe+=s*Ke,ve+=s*Ge,ge+=s*je,Ee+=s*qe,me+=s*He,ye+=s*Fe,we+=s*Qe,It+=s*Ve,Ut+=s*We,Yt+=s*Xe,hn+=s*Ye,In+=s*Je,s=E[14],ie+=s*Le,re+=s*Ue,ue+=s*Be,fe+=s*De,ve+=s*Ke,ge+=s*Ge,Ee+=s*je,me+=s*qe,ye+=s*He,we+=s*Fe,It+=s*Qe,Ut+=s*Ve,Yt+=s*We,hn+=s*Xe,In+=s*Ye,di+=s*Je,s=E[15],re+=s*Le,ue+=s*Ue,fe+=s*Be,ve+=s*De,ge+=s*Ke,Ee+=s*Ge,me+=s*je,ye+=s*qe,we+=s*He,It+=s*Fe,Ut+=s*Qe,Yt+=s*Ve,hn+=s*We,In+=s*Xe,di+=s*Ye,yr+=s*Je,S+=38*ue,P+=38*fe,G+=38*ve,j+=38*ge,X+=38*Ee,le+=38*me,W+=38*ye,be+=38*we,Y+=38*It,ce+=38*Ut,ae+=38*Yt,ne+=38*hn,$+=38*In,Z+=38*di,ie+=38*yr,p=1,s=S+p+65535,p=Math.floor(s/65536),S=s-p*65536,s=P+p+65535,p=Math.floor(s/65536),P=s-p*65536,s=G+p+65535,p=Math.floor(s/65536),G=s-p*65536,s=j+p+65535,p=Math.floor(s/65536),j=s-p*65536,s=X+p+65535,p=Math.floor(s/65536),X=s-p*65536,s=le+p+65535,p=Math.floor(s/65536),le=s-p*65536,s=W+p+65535,p=Math.floor(s/65536),W=s-p*65536,s=be+p+65535,p=Math.floor(s/65536),be=s-p*65536,s=Y+p+65535,p=Math.floor(s/65536),Y=s-p*65536,s=ce+p+65535,p=Math.floor(s/65536),ce=s-p*65536,s=ae+p+65535,p=Math.floor(s/65536),ae=s-p*65536,s=ne+p+65535,p=Math.floor(s/65536),ne=s-p*65536,s=$+p+65535,p=Math.floor(s/65536),$=s-p*65536,s=Z+p+65535,p=Math.floor(s/65536),Z=s-p*65536,s=ie+p+65535,p=Math.floor(s/65536),ie=s-p*65536,s=re+p+65535,p=Math.floor(s/65536),re=s-p*65536,S+=p-1+37*(p-1),p=1,s=S+p+65535,p=Math.floor(s/65536),S=s-p*65536,s=P+p+65535,p=Math.floor(s/65536),P=s-p*65536,s=G+p+65535,p=Math.floor(s/65536),G=s-p*65536,s=j+p+65535,p=Math.floor(s/65536),j=s-p*65536,s=X+p+65535,p=Math.floor(s/65536),X=s-p*65536,s=le+p+65535,p=Math.floor(s/65536),le=s-p*65536,s=W+p+65535,p=Math.floor(s/65536),W=s-p*65536,s=be+p+65535,p=Math.floor(s/65536),be=s-p*65536,s=Y+p+65535,p=Math.floor(s/65536),Y=s-p*65536,s=ce+p+65535,p=Math.floor(s/65536),ce=s-p*65536,s=ae+p+65535,p=Math.floor(s/65536),ae=s-p*65536,s=ne+p+65535,p=Math.floor(s/65536),ne=s-p*65536,s=$+p+65535,p=Math.floor(s/65536),$=s-p*65536,s=Z+p+65535,p=Math.floor(s/65536),Z=s-p*65536,s=ie+p+65535,p=Math.floor(s/65536),ie=s-p*65536,s=re+p+65535,p=Math.floor(s/65536),re=s-p*65536,S+=p-1+37*(p-1),x[0]=S,x[1]=P,x[2]=G,x[3]=j,x[4]=X,x[5]=le,x[6]=W,x[7]=be,x[8]=Y,x[9]=ce,x[10]=ae,x[11]=ne,x[12]=$,x[13]=Z,x[14]=ie,x[15]=re}function u(x,E){n(x,E,E)}function w(x,E){const g=o();let s;for(s=0;s<16;s++)g[s]=E[s];for(s=253;s>=0;s--)u(g,g),s!==2&&s!==4&&n(g,g,E);for(s=0;s<16;s++)x[s]=g[s]}function b(x,E){const g=o();let s;for(s=0;s<16;s++)g[s]=E[s];for(s=250;s>=0;s--)u(g,g),s!==1&&n(g,g,E);for(s=0;s<16;s++)x[s]=g[s]}function _(x,E){const g=o(),s=o(),p=o(),S=o(),P=o(),G=o(),j=o(),X=o(),le=o();y(g,x[1],x[0]),y(le,E[1],E[0]),n(g,g,le),A(s,x[0],x[1]),A(le,E[0],E[1]),n(s,s,le),n(p,x[3],E[3]),n(p,p,f),n(S,x[2],E[2]),A(S,S,S),y(P,s,g),y(G,S,p),A(j,S,p),A(X,s,g),n(x[0],P,G),n(x[1],X,j),n(x[2],j,G),n(x[3],P,X)}function m(x,E,g){for(let s=0;s<4;s++)V(x[s],E[s],g)}function O(x,E){const g=o(),s=o(),p=o();w(p,E[2]),n(g,E[0],p),n(s,E[1],p),J(x,s),x[31]^=M(g)<<7}function T(x,E,g){k(x[0],c),k(x[1],d),k(x[2],d),k(x[3],c);for(let s=255;s>=0;--s){const p=g[s/8|0]>>(s&7)&1;m(x,E,p),_(E,x),_(x,x),m(x,E,p)}}function C(x,E){const g=[o(),o(),o(),o()];k(g[0],l),k(g[1],v),k(g[2],d),n(g[3],l,v),T(x,g,E)}function D(x){if(x.length!==i.SEED_LENGTH)throw new Error(`ed25519: seed must be ${i.SEED_LENGTH} bytes`);const E=(0,t.hash)(x);E[0]&=248,E[31]&=127,E[31]|=64;const g=new Uint8Array(32),s=[o(),o(),o(),o()];C(s,E),O(g,s);const p=new Uint8Array(64);return p.set(x),p.set(g,32),{publicKey:g,secretKey:p}}i.generateKeyPairFromSeed=D;function L(x){const E=(0,e.randomBytes)(32,x),g=D(E);return(0,r.wipe)(E),g}i.generateKeyPair=L;function q(x){if(x.length!==i.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${i.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(x.subarray(32))}i.extractPublicKeyFromSecretKey=q;const N=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Q(x,E){let g,s,p,S;for(s=63;s>=32;--s){for(g=0,p=s-32,S=s-12;p<S;++p)E[p]+=g-16*E[s]*N[p-(s-32)],g=Math.floor((E[p]+128)/256),E[p]-=g*256;E[p]+=g,E[s]=0}for(g=0,p=0;p<32;p++)E[p]+=g-(E[31]>>4)*N[p],g=E[p]>>8,E[p]&=255;for(p=0;p<32;p++)E[p]-=g*N[p];for(s=0;s<32;s++)E[s+1]+=E[s]>>8,x[s]=E[s]&255}function z(x){const E=new Float64Array(64);for(let g=0;g<64;g++)E[g]=x[g];for(let g=0;g<64;g++)x[g]=0;Q(x,E)}function ee(x,E){const g=new Float64Array(64),s=[o(),o(),o(),o()],p=(0,t.hash)(x.subarray(0,32));p[0]&=248,p[31]&=127,p[31]|=64;const S=new Uint8Array(64);S.set(p.subarray(32),32);const P=new t.SHA512;P.update(S.subarray(32)),P.update(E);const G=P.digest();P.clean(),z(G),C(s,G),O(S,s),P.reset(),P.update(S.subarray(0,32)),P.update(x.subarray(32)),P.update(E);const j=P.digest();z(j);for(let X=0;X<32;X++)g[X]=G[X];for(let X=0;X<32;X++)for(let le=0;le<32;le++)g[X+le]+=j[X]*p[le];return Q(S.subarray(32),g),S}i.sign=ee;function B(x,E){const g=o(),s=o(),p=o(),S=o(),P=o(),G=o(),j=o();return k(x[2],d),R(x[1],E),u(p,x[1]),n(S,p,h),y(p,p,x[2]),A(S,x[2],S),u(P,S),u(G,P),n(j,G,P),n(g,j,p),n(g,g,S),b(g,g),n(g,g,p),n(g,g,S),n(g,g,S),n(x[0],g,S),u(s,x[0]),n(s,s,S),pe(s,p)&&n(x[0],x[0],I),u(s,x[0]),n(s,s,S),pe(s,p)?-1:(M(x[0])===E[31]>>7&&y(x[0],c,x[0]),n(x[3],x[0],x[1]),0)}function F(x,E,g){const s=new Uint8Array(32),p=[o(),o(),o(),o()],S=[o(),o(),o(),o()];if(g.length!==i.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${i.SIGNATURE_LENGTH} bytes`);if(B(S,x))return!1;const P=new t.SHA512;P.update(g.subarray(0,32)),P.update(x),P.update(E);const G=P.digest();return z(G),T(p,S,G),C(S,g.subarray(32)),_(p,S),O(s,p),!oe(g,s)}i.verify=F;function se(x){let E=[o(),o(),o(),o()];if(B(E,x))throw new Error("Ed25519: invalid public key");let g=o(),s=o(),p=E[1];A(g,d,p),y(s,d,p),w(s,s),n(g,g,s);let S=new Uint8Array(32);return J(S,g),S}i.convertPublicKeyToX25519=se;function te(x){const E=(0,t.hash)(x.subarray(0,32));E[0]&=248,E[31]&=127,E[31]|=64;const g=new Uint8Array(E.subarray(0,32));return(0,r.wipe)(E),g}i.convertSecretKeyToX25519=te})(qt);var fi={},cr={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.sharedKey=i.generateKeyPair=i.generateKeyPairFromSeed=i.scalarMultBase=i.scalarMult=i.SHARED_KEY_LENGTH=i.SECRET_KEY_LENGTH=i.PUBLIC_KEY_LENGTH=void 0;const e=dn,t=at;i.PUBLIC_KEY_LENGTH=32,i.SECRET_KEY_LENGTH=32,i.SHARED_KEY_LENGTH=32;function r(R){const A=new Float64Array(16);if(R)for(let y=0;y<R.length;y++)A[y]=R[y];return A}const o=new Uint8Array(32);o[0]=9;const a=r([56129,1]);function c(R){let A=1;for(let y=0;y<16;y++){let n=R[y]+A+65535;A=Math.floor(n/65536),R[y]=n-A*65536}R[0]+=A-1+37*(A-1)}function d(R,A,y){const n=~(y-1);for(let u=0;u<16;u++){const w=n&(R[u]^A[u]);R[u]^=w,A[u]^=w}}function h(R,A){const y=r(),n=r();for(let u=0;u<16;u++)n[u]=A[u];c(n),c(n),c(n);for(let u=0;u<2;u++){y[0]=n[0]-65517;for(let b=1;b<15;b++)y[b]=n[b]-65535-(y[b-1]>>16&1),y[b-1]&=65535;y[15]=n[15]-32767-(y[14]>>16&1);const w=y[15]>>16&1;y[14]&=65535,d(n,y,1-w)}for(let u=0;u<16;u++)R[2*u]=n[u]&255,R[2*u+1]=n[u]>>8}function f(R,A){for(let y=0;y<16;y++)R[y]=A[2*y]+(A[2*y+1]<<8);R[15]&=32767}function l(R,A,y){for(let n=0;n<16;n++)R[n]=A[n]+y[n]}function v(R,A,y){for(let n=0;n<16;n++)R[n]=A[n]-y[n]}function I(R,A,y){let n,u,w=0,b=0,_=0,m=0,O=0,T=0,C=0,D=0,L=0,q=0,N=0,Q=0,z=0,ee=0,B=0,F=0,se=0,te=0,x=0,E=0,g=0,s=0,p=0,S=0,P=0,G=0,j=0,X=0,le=0,W=0,be=0,Y=y[0],ce=y[1],ae=y[2],ne=y[3],$=y[4],Z=y[5],ie=y[6],re=y[7],ue=y[8],fe=y[9],ve=y[10],ge=y[11],Ee=y[12],me=y[13],ye=y[14],we=y[15];n=A[0],w+=n*Y,b+=n*ce,_+=n*ae,m+=n*ne,O+=n*$,T+=n*Z,C+=n*ie,D+=n*re,L+=n*ue,q+=n*fe,N+=n*ve,Q+=n*ge,z+=n*Ee,ee+=n*me,B+=n*ye,F+=n*we,n=A[1],b+=n*Y,_+=n*ce,m+=n*ae,O+=n*ne,T+=n*$,C+=n*Z,D+=n*ie,L+=n*re,q+=n*ue,N+=n*fe,Q+=n*ve,z+=n*ge,ee+=n*Ee,B+=n*me,F+=n*ye,se+=n*we,n=A[2],_+=n*Y,m+=n*ce,O+=n*ae,T+=n*ne,C+=n*$,D+=n*Z,L+=n*ie,q+=n*re,N+=n*ue,Q+=n*fe,z+=n*ve,ee+=n*ge,B+=n*Ee,F+=n*me,se+=n*ye,te+=n*we,n=A[3],m+=n*Y,O+=n*ce,T+=n*ae,C+=n*ne,D+=n*$,L+=n*Z,q+=n*ie,N+=n*re,Q+=n*ue,z+=n*fe,ee+=n*ve,B+=n*ge,F+=n*Ee,se+=n*me,te+=n*ye,x+=n*we,n=A[4],O+=n*Y,T+=n*ce,C+=n*ae,D+=n*ne,L+=n*$,q+=n*Z,N+=n*ie,Q+=n*re,z+=n*ue,ee+=n*fe,B+=n*ve,F+=n*ge,se+=n*Ee,te+=n*me,x+=n*ye,E+=n*we,n=A[5],T+=n*Y,C+=n*ce,D+=n*ae,L+=n*ne,q+=n*$,N+=n*Z,Q+=n*ie,z+=n*re,ee+=n*ue,B+=n*fe,F+=n*ve,se+=n*ge,te+=n*Ee,x+=n*me,E+=n*ye,g+=n*we,n=A[6],C+=n*Y,D+=n*ce,L+=n*ae,q+=n*ne,N+=n*$,Q+=n*Z,z+=n*ie,ee+=n*re,B+=n*ue,F+=n*fe,se+=n*ve,te+=n*ge,x+=n*Ee,E+=n*me,g+=n*ye,s+=n*we,n=A[7],D+=n*Y,L+=n*ce,q+=n*ae,N+=n*ne,Q+=n*$,z+=n*Z,ee+=n*ie,B+=n*re,F+=n*ue,se+=n*fe,te+=n*ve,x+=n*ge,E+=n*Ee,g+=n*me,s+=n*ye,p+=n*we,n=A[8],L+=n*Y,q+=n*ce,N+=n*ae,Q+=n*ne,z+=n*$,ee+=n*Z,B+=n*ie,F+=n*re,se+=n*ue,te+=n*fe,x+=n*ve,E+=n*ge,g+=n*Ee,s+=n*me,p+=n*ye,S+=n*we,n=A[9],q+=n*Y,N+=n*ce,Q+=n*ae,z+=n*ne,ee+=n*$,B+=n*Z,F+=n*ie,se+=n*re,te+=n*ue,x+=n*fe,E+=n*ve,g+=n*ge,s+=n*Ee,p+=n*me,S+=n*ye,P+=n*we,n=A[10],N+=n*Y,Q+=n*ce,z+=n*ae,ee+=n*ne,B+=n*$,F+=n*Z,se+=n*ie,te+=n*re,x+=n*ue,E+=n*fe,g+=n*ve,s+=n*ge,p+=n*Ee,S+=n*me,P+=n*ye,G+=n*we,n=A[11],Q+=n*Y,z+=n*ce,ee+=n*ae,B+=n*ne,F+=n*$,se+=n*Z,te+=n*ie,x+=n*re,E+=n*ue,g+=n*fe,s+=n*ve,p+=n*ge,S+=n*Ee,P+=n*me,G+=n*ye,j+=n*we,n=A[12],z+=n*Y,ee+=n*ce,B+=n*ae,F+=n*ne,se+=n*$,te+=n*Z,x+=n*ie,E+=n*re,g+=n*ue,s+=n*fe,p+=n*ve,S+=n*ge,P+=n*Ee,G+=n*me,j+=n*ye,X+=n*we,n=A[13],ee+=n*Y,B+=n*ce,F+=n*ae,se+=n*ne,te+=n*$,x+=n*Z,E+=n*ie,g+=n*re,s+=n*ue,p+=n*fe,S+=n*ve,P+=n*ge,G+=n*Ee,j+=n*me,X+=n*ye,le+=n*we,n=A[14],B+=n*Y,F+=n*ce,se+=n*ae,te+=n*ne,x+=n*$,E+=n*Z,g+=n*ie,s+=n*re,p+=n*ue,S+=n*fe,P+=n*ve,G+=n*ge,j+=n*Ee,X+=n*me,le+=n*ye,W+=n*we,n=A[15],F+=n*Y,se+=n*ce,te+=n*ae,x+=n*ne,E+=n*$,g+=n*Z,s+=n*ie,p+=n*re,S+=n*ue,P+=n*fe,G+=n*ve,j+=n*ge,X+=n*Ee,le+=n*me,W+=n*ye,be+=n*we,w+=38*se,b+=38*te,_+=38*x,m+=38*E,O+=38*g,T+=38*s,C+=38*p,D+=38*S,L+=38*P,q+=38*G,N+=38*j,Q+=38*X,z+=38*le,ee+=38*W,B+=38*be,u=1,n=w+u+65535,u=Math.floor(n/65536),w=n-u*65536,n=b+u+65535,u=Math.floor(n/65536),b=n-u*65536,n=_+u+65535,u=Math.floor(n/65536),_=n-u*65536,n=m+u+65535,u=Math.floor(n/65536),m=n-u*65536,n=O+u+65535,u=Math.floor(n/65536),O=n-u*65536,n=T+u+65535,u=Math.floor(n/65536),T=n-u*65536,n=C+u+65535,u=Math.floor(n/65536),C=n-u*65536,n=D+u+65535,u=Math.floor(n/65536),D=n-u*65536,n=L+u+65535,u=Math.floor(n/65536),L=n-u*65536,n=q+u+65535,u=Math.floor(n/65536),q=n-u*65536,n=N+u+65535,u=Math.floor(n/65536),N=n-u*65536,n=Q+u+65535,u=Math.floor(n/65536),Q=n-u*65536,n=z+u+65535,u=Math.floor(n/65536),z=n-u*65536,n=ee+u+65535,u=Math.floor(n/65536),ee=n-u*65536,n=B+u+65535,u=Math.floor(n/65536),B=n-u*65536,n=F+u+65535,u=Math.floor(n/65536),F=n-u*65536,w+=u-1+37*(u-1),u=1,n=w+u+65535,u=Math.floor(n/65536),w=n-u*65536,n=b+u+65535,u=Math.floor(n/65536),b=n-u*65536,n=_+u+65535,u=Math.floor(n/65536),_=n-u*65536,n=m+u+65535,u=Math.floor(n/65536),m=n-u*65536,n=O+u+65535,u=Math.floor(n/65536),O=n-u*65536,n=T+u+65535,u=Math.floor(n/65536),T=n-u*65536,n=C+u+65535,u=Math.floor(n/65536),C=n-u*65536,n=D+u+65535,u=Math.floor(n/65536),D=n-u*65536,n=L+u+65535,u=Math.floor(n/65536),L=n-u*65536,n=q+u+65535,u=Math.floor(n/65536),q=n-u*65536,n=N+u+65535,u=Math.floor(n/65536),N=n-u*65536,n=Q+u+65535,u=Math.floor(n/65536),Q=n-u*65536,n=z+u+65535,u=Math.floor(n/65536),z=n-u*65536,n=ee+u+65535,u=Math.floor(n/65536),ee=n-u*65536,n=B+u+65535,u=Math.floor(n/65536),B=n-u*65536,n=F+u+65535,u=Math.floor(n/65536),F=n-u*65536,w+=u-1+37*(u-1),R[0]=w,R[1]=b,R[2]=_,R[3]=m,R[4]=O,R[5]=T,R[6]=C,R[7]=D,R[8]=L,R[9]=q,R[10]=N,R[11]=Q,R[12]=z,R[13]=ee,R[14]=B,R[15]=F}function k(R,A){I(R,A,A)}function K(R,A){const y=r();for(let n=0;n<16;n++)y[n]=A[n];for(let n=253;n>=0;n--)k(y,y),n!==2&&n!==4&&I(y,y,A);for(let n=0;n<16;n++)R[n]=y[n]}function V(R,A){const y=new Uint8Array(32),n=new Float64Array(80),u=r(),w=r(),b=r(),_=r(),m=r(),O=r();for(let L=0;L<31;L++)y[L]=R[L];y[31]=R[31]&127|64,y[0]&=248,f(n,A);for(let L=0;L<16;L++)w[L]=n[L];u[0]=_[0]=1;for(let L=254;L>=0;--L){const q=y[L>>>3]>>>(L&7)&1;d(u,w,q),d(b,_,q),l(m,u,b),v(u,u,b),l(b,w,_),v(w,w,_),k(_,m),k(O,u),I(u,b,u),I(b,w,m),l(m,u,b),v(u,u,b),k(w,u),v(b,_,O),I(u,b,a),l(u,u,_),I(b,b,u),I(u,_,O),I(_,w,n),k(w,m),d(u,w,q),d(b,_,q)}for(let L=0;L<16;L++)n[L+16]=u[L],n[L+32]=b[L],n[L+48]=w[L],n[L+64]=_[L];const T=n.subarray(32),C=n.subarray(16);K(T,T),I(C,C,T);const D=new Uint8Array(32);return h(D,C),D}i.scalarMult=V;function J(R){return V(R,o)}i.scalarMultBase=J;function oe(R){if(R.length!==i.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${i.SECRET_KEY_LENGTH} bytes`);const A=new Uint8Array(R);return{publicKey:J(A),secretKey:A}}i.generateKeyPairFromSeed=oe;function pe(R){const A=(0,e.randomBytes)(32,R),y=oe(A);return(0,t.wipe)(A),y}i.generateKeyPair=pe;function M(R,A,y=!1){if(R.length!==i.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(A.length!==i.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const n=V(R,A);if(y){let u=0;for(let w=0;w<n.length;w++)u|=n[w];if(u===0)throw new Error("X25519: invalid shared key")}return n}i.sharedKey=M})(cr);var hi={},Nr;function Aa(){return Nr||(Nr=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.X25519Session=i.SECRET_SEED_LENGTH=i.SAVED_STATE_LENGTH=i.ACCEPT_MESSAGE_LENGTH=i.OFFER_MESSAGE_LENGTH=void 0;const e=dn,t=at,r=cr,o=Co();i.OFFER_MESSAGE_LENGTH=r.PUBLIC_KEY_LENGTH,i.ACCEPT_MESSAGE_LENGTH=r.PUBLIC_KEY_LENGTH,i.SAVED_STATE_LENGTH=r.SECRET_KEY_LENGTH,i.SECRET_SEED_LENGTH=r.SECRET_KEY_LENGTH;class a{constructor(d,h){this.offerMessageLength=i.OFFER_MESSAGE_LENGTH,this.acceptMessageLength=i.ACCEPT_MESSAGE_LENGTH,this.sharedKeyLength=r.SHARED_KEY_LENGTH,this.savedStateLength=i.SAVED_STATE_LENGTH,this._seed=d||(0,e.randomBytes)(r.SECRET_KEY_LENGTH,h)}saveState(){return new Uint8Array(this._seed)}restoreState(d){return this._seed=new Uint8Array(d),this}clean(){this._seed&&(0,t.wipe)(this._seed),this._keyPair&&((0,t.wipe)(this._keyPair.secretKey),(0,t.wipe)(this._keyPair.publicKey)),this._sharedKey&&(0,t.wipe)(this._sharedKey),this._sessionKeys&&((0,t.wipe)(this._sessionKeys.receive),(0,t.wipe)(this._sessionKeys.send))}offer(){return this._keyPair=(0,r.generateKeyPairFromSeed)(this._seed),new Uint8Array(this._keyPair.publicKey)}accept(d){if(this._keyPair)throw new Error("X25519Session: accept shouldn't be called by offering party");if(d.length!==this.offerMessageLength)throw new Error("X25519Session: incorrect offer message length");if(this._sharedKey)throw new Error("X25519Session: accept was already called");const h=(0,r.generateKeyPairFromSeed)(this._seed);return this._sharedKey=(0,r.sharedKey)(h.secretKey,d),this._sessionKeys=(0,o.clientSessionKeysFromSharedKey)(this._sharedKey,h.publicKey,d),(0,t.wipe)(h.secretKey),h.publicKey}finish(d){if(d.length!==this.acceptMessageLength)throw new Error("X25519Session: incorrect accept message length");if(!this._keyPair)throw new Error("X25519Session: no offer state");if(this._sharedKey)throw new Error("X25519Session: finish was already called");return this._sharedKey=(0,r.sharedKey)(this._keyPair.secretKey,d),this._sessionKeys=(0,o.serverSessionKeysFromSharedKey)(this._sharedKey,this._keyPair.publicKey,d),this}getSharedKey(){if(!this._sharedKey)throw new Error("X25519Session: no shared key established");return new Uint8Array(this._sharedKey)}getSessionKeys(){if(!this._sessionKeys)throw new Error("X25519Session: no shared key established");return{receive:new Uint8Array(this._sessionKeys.receive),send:new Uint8Array(this._sessionKeys.send)}}}i.X25519Session=a}(hi)),hi}var Ir;function Co(){return Ir||(Ir=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.clientSessionKeys=i.serverSessionKeys=i.clientSessionKeysFromSharedKey=i.serverSessionKeysFromSharedKey=i.X25519Session=void 0;const e=yt,t=cr;var r=Aa();Object.defineProperty(i,"X25519Session",{enumerable:!0,get:function(){return r.X25519Session}});const o=32;function a(f,l,v,I=e.BLAKE2b){const k=new I;if(k.digestLength!==o*2)throw new Error("X25519: incorrect digest length");const K=k.update(f).update(v).update(l).digest();return{send:K.subarray(0,o),receive:K.subarray(o)}}i.serverSessionKeysFromSharedKey=a;function c(f,l,v,I=e.BLAKE2b){const k=new I;if(k.digestLength!==o*2)throw new Error("X25519: incorrect digest length");const K=k.update(f).update(l).update(v).digest();return{receive:K.subarray(0,o),send:K.subarray(o)}}i.clientSessionKeysFromSharedKey=c;function d(f,l,v=e.BLAKE2b){const I=(0,t.sharedKey)(f.secretKey,l);return a(I,f.publicKey,l,v)}i.serverSessionKeys=d;function h(f,l,v=e.BLAKE2b){const I=(0,t.sharedKey)(f.secretKey,l);return c(I,f.publicKey,l,v)}i.clientSessionKeys=h}(fi)),fi}var Or=Co(),pn=globalThis&&globalThis.__awaiter||function(i,e,t,r){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(l){try{f(r.next(l))}catch(v){c(v)}}function h(l){try{f(r.throw(l))}catch(v){c(v)}}function f(l){l.done?a(l.value):o(l.value).then(d,h)}f((r=r.apply(i,e||[])).next())})};class Po{constructor(e){this.keyPair=e}getPublicKey(){return pn(this,void 0,void 0,function*(){return kt(this.keyPair.publicKey)})}getPublicKeyHash(){return pn(this,void 0,void 0,function*(){return en(this.keyPair.publicKey)})}createCryptoBoxServer(e,t){return pn(this,void 0,void 0,function*(){return Or.serverSessionKeys({publicKey:qt.convertPublicKeyToX25519(t.publicKey),secretKey:qt.convertSecretKeyToX25519(t.secretKey)},qt.convertPublicKeyToX25519(Buffer.from(e,"hex")))})}createCryptoBoxClient(e,t){return pn(this,void 0,void 0,function*(){return Or.clientSessionKeys({publicKey:qt.convertPublicKeyToX25519(t.publicKey),secretKey:qt.convertSecretKeyToX25519(t.secretKey)},qt.convertPublicKeyToX25519(Buffer.from(e,"hex")))})}encryptMessageAsymmetric(e,t){return pn(this,void 0,void 0,function*(){return Zs(t,Buffer.from(e,"hex"))})}}var Kt=globalThis&&globalThis.__awaiter||function(i,e,t,r){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(l){try{f(r.next(l))}catch(v){c(v)}}function h(l){try{f(r.throw(l))}catch(v){c(v)}}function f(l){l.done?a(l.value):o(l.value).then(d,h)}f((r=r.apply(i,e||[])).next())})};class ba extends Po{constructor(e,t){super(t),this.name=e,this.init().catch(console.error)}start(){return Kt(this,void 0,void 0,function*(){yield Promise.resolve()})}getPairingRequestInfo(){return Kt(this,void 0,void 0,function*(){return{id:yield Nt(),type:"postmessage-pairing-request",name:this.name,version:xo,publicKey:yield this.getPublicKey()}})}getPairingResponseInfo(e){return Kt(this,void 0,void 0,function*(){return{id:e.id,type:"postmessage-pairing-response",name:this.name,version:e.version,publicKey:yield this.getPublicKey()}})}unsubscribeFromEncryptedMessage(e){return Kt(this,void 0,void 0,function*(){!this.activeListeners.get(e)||this.activeListeners.delete(e)})}unsubscribeFromEncryptedMessages(){return Kt(this,void 0,void 0,function*(){this.activeListeners.clear()})}decryptMessage(e,t){return Kt(this,void 0,void 0,function*(){const r=yield this.createCryptoBoxServer(e,this.keyPair),o=Buffer.from(t,"hex");if(o.length>=Qn+Vn)try{return yield So(o,r.receive)}catch{}throw new Error("Could not decrypt message")})}encryptMessage(e,t){return Kt(this,void 0,void 0,function*(){const r=yield this.createCryptoBoxClient(e,this.keyPair);return Ro(t,r.send)})}}class Ra extends ct{constructor(){super(Te.SIGNATURE_TYPE_NOT_SUPPORTED,"The wallet is not able to sign payloads of this type."),this.name="SignatureTypeNotSupportedBeaconError",this.title="Signature Type Not Supported"}}var Mo={exports:{}},lr={exports:{}},ko=function(e,t){return function(){for(var o=new Array(arguments.length),a=0;a<o.length;a++)o[a]=arguments[a];return e.apply(t,o)}},Sa=ko,Xt=Object.prototype.toString;function dr(i){return Xt.call(i)==="[object Array]"}function Fi(i){return typeof i>"u"}function Ta(i){return i!==null&&!Fi(i)&&i.constructor!==null&&!Fi(i.constructor)&&typeof i.constructor.isBuffer=="function"&&i.constructor.isBuffer(i)}function xa(i){return Xt.call(i)==="[object ArrayBuffer]"}function Na(i){return typeof FormData<"u"&&i instanceof FormData}function Ia(i){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(i):e=i&&i.buffer&&i.buffer instanceof ArrayBuffer,e}function Oa(i){return typeof i=="string"}function Ca(i){return typeof i=="number"}function Lo(i){return i!==null&&typeof i=="object"}function jn(i){if(Xt.call(i)!=="[object Object]")return!1;var e=Object.getPrototypeOf(i);return e===null||e===Object.prototype}function Pa(i){return Xt.call(i)==="[object Date]"}function Ma(i){return Xt.call(i)==="[object File]"}function ka(i){return Xt.call(i)==="[object Blob]"}function Uo(i){return Xt.call(i)==="[object Function]"}function La(i){return Lo(i)&&Uo(i.pipe)}function Ua(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}function Ba(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function Da(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function ur(i,e){if(!(i===null||typeof i>"u"))if(typeof i!="object"&&(i=[i]),dr(i))for(var t=0,r=i.length;t<r;t++)e.call(null,i[t],t,i);else for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&e.call(null,i[o],o,i)}function Qi(){var i={};function e(o,a){jn(i[a])&&jn(o)?i[a]=Qi(i[a],o):jn(o)?i[a]=Qi({},o):dr(o)?i[a]=o.slice():i[a]=o}for(var t=0,r=arguments.length;t<r;t++)ur(arguments[t],e);return i}function Ka(i,e,t){return ur(e,function(o,a){t&&typeof o=="function"?i[a]=Sa(o,t):i[a]=o}),i}function Ga(i){return i.charCodeAt(0)===65279&&(i=i.slice(1)),i}var lt={isArray:dr,isArrayBuffer:xa,isBuffer:Ta,isFormData:Na,isArrayBufferView:Ia,isString:Oa,isNumber:Ca,isObject:Lo,isPlainObject:jn,isUndefined:Fi,isDate:Pa,isFile:Ma,isBlob:ka,isFunction:Uo,isStream:La,isURLSearchParams:Ua,isStandardBrowserEnv:Da,forEach:ur,merge:Qi,extend:Ka,trim:Ba,stripBOM:Ga},Zt=lt;function Cr(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Bo=function(e,t,r){if(!t)return e;var o;if(r)o=r(t);else if(Zt.isURLSearchParams(t))o=t.toString();else{var a=[];Zt.forEach(t,function(h,f){h===null||typeof h>"u"||(Zt.isArray(h)?f=f+"[]":h=[h],Zt.forEach(h,function(v){Zt.isDate(v)?v=v.toISOString():Zt.isObject(v)&&(v=JSON.stringify(v)),a.push(Cr(f)+"="+Cr(v))}))}),o=a.join("&")}if(o){var c=e.indexOf("#");c!==-1&&(e=e.slice(0,c)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e},ja=lt;function ri(){this.handlers=[]}ri.prototype.use=function(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1};ri.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};ri.prototype.forEach=function(e){ja.forEach(this.handlers,function(r){r!==null&&e(r)})};var qa=ri,Ha=lt,Fa=function(e,t){Ha.forEach(e,function(o,a){a!==t&&a.toUpperCase()===t.toUpperCase()&&(e[t]=o,delete e[a])})},Do=function(e,t,r,o,a){return e.config=t,r&&(e.code=r),e.request=o,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},vi,Pr;function Ko(){if(Pr)return vi;Pr=1;var i=Do;return vi=function(t,r,o,a,c){var d=new Error(t);return i(d,r,o,a,c)},vi}var pi,Mr;function Qa(){if(Mr)return pi;Mr=1;var i=Ko();return pi=function(t,r,o){var a=o.config.validateStatus;!o.status||!a||a(o.status)?t(o):r(i("Request failed with status code "+o.status,o.config,null,o.request,o))},pi}var gi,kr;function Va(){if(kr)return gi;kr=1;var i=lt;return gi=i.isStandardBrowserEnv()?function(){return{write:function(r,o,a,c,d,h){var f=[];f.push(r+"="+encodeURIComponent(o)),i.isNumber(a)&&f.push("expires="+new Date(a).toGMTString()),i.isString(c)&&f.push("path="+c),i.isString(d)&&f.push("domain="+d),h===!0&&f.push("secure"),document.cookie=f.join("; ")},read:function(r){var o=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return o?decodeURIComponent(o[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),gi}var Ei,Lr;function Wa(){return Lr||(Lr=1,Ei=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}),Ei}var mi,Ur;function Xa(){return Ur||(Ur=1,mi=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}),mi}var yi,Br;function Ya(){if(Br)return yi;Br=1;var i=Wa(),e=Xa();return yi=function(r,o){return r&&!i(o)?e(r,o):o},yi}var wi,Dr;function Ja(){if(Dr)return wi;Dr=1;var i=lt,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return wi=function(r){var o={},a,c,d;return r&&i.forEach(r.split(`
`),function(f){if(d=f.indexOf(":"),a=i.trim(f.substr(0,d)).toLowerCase(),c=i.trim(f.substr(d+1)),a){if(o[a]&&e.indexOf(a)>=0)return;a==="set-cookie"?o[a]=(o[a]?o[a]:[]).concat([c]):o[a]=o[a]?o[a]+", "+c:c}}),o},wi}var _i,Kr;function Za(){if(Kr)return _i;Kr=1;var i=lt;return _i=i.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),o;function a(c){var d=c;return t&&(r.setAttribute("href",d),d=r.href),r.setAttribute("href",d),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return o=a(window.location.href),function(d){var h=i.isString(d)?a(d):d;return h.protocol===o.protocol&&h.host===o.host}}():function(){return function(){return!0}}(),_i}var Ai,Gr;function oi(){if(Gr)return Ai;Gr=1;function i(e){this.message=e}return i.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},i.prototype.__CANCEL__=!0,Ai=i,Ai}var bi,jr;function qr(){if(jr)return bi;jr=1;var i=lt,e=Qa(),t=Va(),r=Bo,o=Ya(),a=Ja(),c=Za(),d=Ko(),h=si(),f=oi();return bi=function(v){return new Promise(function(k,K){var V=v.data,J=v.headers,oe=v.responseType,pe;function M(){v.cancelToken&&v.cancelToken.unsubscribe(pe),v.signal&&v.signal.removeEventListener("abort",pe)}i.isFormData(V)&&delete J["Content-Type"];var R=new XMLHttpRequest;if(v.auth){var A=v.auth.username||"",y=v.auth.password?unescape(encodeURIComponent(v.auth.password)):"";J.Authorization="Basic "+btoa(A+":"+y)}var n=o(v.baseURL,v.url);R.open(v.method.toUpperCase(),r(n,v.params,v.paramsSerializer),!0),R.timeout=v.timeout;function u(){if(!!R){var b="getAllResponseHeaders"in R?a(R.getAllResponseHeaders()):null,_=!oe||oe==="text"||oe==="json"?R.responseText:R.response,m={data:_,status:R.status,statusText:R.statusText,headers:b,config:v,request:R};e(function(T){k(T),M()},function(T){K(T),M()},m),R=null}}if("onloadend"in R?R.onloadend=u:R.onreadystatechange=function(){!R||R.readyState!==4||R.status===0&&!(R.responseURL&&R.responseURL.indexOf("file:")===0)||setTimeout(u)},R.onabort=function(){!R||(K(d("Request aborted",v,"ECONNABORTED",R)),R=null)},R.onerror=function(){K(d("Network Error",v,null,R)),R=null},R.ontimeout=function(){var _=v.timeout?"timeout of "+v.timeout+"ms exceeded":"timeout exceeded",m=v.transitional||h.transitional;v.timeoutErrorMessage&&(_=v.timeoutErrorMessage),K(d(_,v,m.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",R)),R=null},i.isStandardBrowserEnv()){var w=(v.withCredentials||c(n))&&v.xsrfCookieName?t.read(v.xsrfCookieName):void 0;w&&(J[v.xsrfHeaderName]=w)}"setRequestHeader"in R&&i.forEach(J,function(_,m){typeof V>"u"&&m.toLowerCase()==="content-type"?delete J[m]:R.setRequestHeader(m,_)}),i.isUndefined(v.withCredentials)||(R.withCredentials=!!v.withCredentials),oe&&oe!=="json"&&(R.responseType=v.responseType),typeof v.onDownloadProgress=="function"&&R.addEventListener("progress",v.onDownloadProgress),typeof v.onUploadProgress=="function"&&R.upload&&R.upload.addEventListener("progress",v.onUploadProgress),(v.cancelToken||v.signal)&&(pe=function(b){!R||(K(!b||b&&b.type?new f("canceled"):b),R.abort(),R=null)},v.cancelToken&&v.cancelToken.subscribe(pe),v.signal&&(v.signal.aborted?pe():v.signal.addEventListener("abort",pe))),V||(V=null),R.send(V)})},bi}var Ri,Hr;function si(){if(Hr)return Ri;Hr=1;var i=lt,e=Fa,t=Do,r={"Content-Type":"application/x-www-form-urlencoded"};function o(h,f){!i.isUndefined(h)&&i.isUndefined(h["Content-Type"])&&(h["Content-Type"]=f)}function a(){var h;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(h=qr()),h}function c(h,f,l){if(i.isString(h))try{return(f||JSON.parse)(h),i.trim(h)}catch(v){if(v.name!=="SyntaxError")throw v}return(l||JSON.stringify)(h)}var d={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:a(),transformRequest:[function(f,l){return e(l,"Accept"),e(l,"Content-Type"),i.isFormData(f)||i.isArrayBuffer(f)||i.isBuffer(f)||i.isStream(f)||i.isFile(f)||i.isBlob(f)?f:i.isArrayBufferView(f)?f.buffer:i.isURLSearchParams(f)?(o(l,"application/x-www-form-urlencoded;charset=utf-8"),f.toString()):i.isObject(f)||l&&l["Content-Type"]==="application/json"?(o(l,"application/json"),c(f)):f}],transformResponse:[function(f){var l=this.transitional||d.transitional,v=l&&l.silentJSONParsing,I=l&&l.forcedJSONParsing,k=!v&&this.responseType==="json";if(k||I&&i.isString(f)&&f.length)try{return JSON.parse(f)}catch(K){if(k)throw K.name==="SyntaxError"?t(K,this,"E_JSON_PARSE"):K}return f}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(f){return f>=200&&f<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};return i.forEach(["delete","get","head"],function(f){d.headers[f]={}}),i.forEach(["post","put","patch"],function(f){d.headers[f]=i.merge(r)}),Ri=d,Ri}var za=lt,$a=si(),ec=function(e,t,r){var o=this||$a;return za.forEach(r,function(c){e=c.call(o,e,t)}),e},Si,Fr;function Go(){return Fr||(Fr=1,Si=function(e){return!!(e&&e.__CANCEL__)}),Si}var Qr=lt,Ti=ec,tc=Go(),nc=si(),ic=oi();function xi(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new ic("canceled")}var rc=function(e){xi(e),e.headers=e.headers||{},e.data=Ti.call(e,e.data,e.headers,e.transformRequest),e.headers=Qr.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Qr.forEach(["delete","get","head","post","put","patch","common"],function(o){delete e.headers[o]});var t=e.adapter||nc.adapter;return t(e).then(function(o){return xi(e),o.data=Ti.call(e,o.data,o.headers,e.transformResponse),o},function(o){return tc(o)||(xi(e),o&&o.response&&(o.response.data=Ti.call(e,o.response.data,o.response.headers,e.transformResponse))),Promise.reject(o)})},ot=lt,jo=function(e,t){t=t||{};var r={};function o(l,v){return ot.isPlainObject(l)&&ot.isPlainObject(v)?ot.merge(l,v):ot.isPlainObject(v)?ot.merge({},v):ot.isArray(v)?v.slice():v}function a(l){if(ot.isUndefined(t[l])){if(!ot.isUndefined(e[l]))return o(void 0,e[l])}else return o(e[l],t[l])}function c(l){if(!ot.isUndefined(t[l]))return o(void 0,t[l])}function d(l){if(ot.isUndefined(t[l])){if(!ot.isUndefined(e[l]))return o(void 0,e[l])}else return o(void 0,t[l])}function h(l){if(l in t)return o(e[l],t[l]);if(l in e)return o(void 0,e[l])}var f={url:c,method:c,data:c,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:h};return ot.forEach(Object.keys(e).concat(Object.keys(t)),function(v){var I=f[v]||a,k=I(v);ot.isUndefined(k)&&I!==h||(r[v]=k)}),r},Ni,Vr;function qo(){return Vr||(Vr=1,Ni={version:"0.24.0"}),Ni}var oc=qo().version,fr={};["object","boolean","number","function","string","symbol"].forEach(function(i,e){fr[i]=function(r){return typeof r===i||"a"+(e<1?"n ":" ")+i}});var Wr={};fr.transitional=function(e,t,r){function o(a,c){return"[Axios v"+oc+"] Transitional option '"+a+"'"+c+(r?". "+r:"")}return function(a,c,d){if(e===!1)throw new Error(o(c," has been removed"+(t?" in "+t:"")));return t&&!Wr[c]&&(Wr[c]=!0,console.warn(o(c," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(a,c,d):!0}};function sc(i,e,t){if(typeof i!="object")throw new TypeError("options must be an object");for(var r=Object.keys(i),o=r.length;o-- >0;){var a=r[o],c=e[a];if(c){var d=i[a],h=d===void 0||c(d,a,i);if(h!==!0)throw new TypeError("option "+a+" must be "+h);continue}if(t!==!0)throw Error("Unknown option "+a)}}var ac={assertOptions:sc,validators:fr},Ho=lt,cc=Bo,Xr=qa,Yr=rc,ai=jo,Fo=ac,zt=Fo.validators;function Tn(i){this.defaults=i,this.interceptors={request:new Xr,response:new Xr}}Tn.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=ai(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;t!==void 0&&Fo.assertOptions(t,{silentJSONParsing:zt.transitional(zt.boolean),forcedJSONParsing:zt.transitional(zt.boolean),clarifyTimeoutError:zt.transitional(zt.boolean)},!1);var r=[],o=!0;this.interceptors.request.forEach(function(I){typeof I.runWhen=="function"&&I.runWhen(e)===!1||(o=o&&I.synchronous,r.unshift(I.fulfilled,I.rejected))});var a=[];this.interceptors.response.forEach(function(I){a.push(I.fulfilled,I.rejected)});var c;if(!o){var d=[Yr,void 0];for(Array.prototype.unshift.apply(d,r),d=d.concat(a),c=Promise.resolve(e);d.length;)c=c.then(d.shift(),d.shift());return c}for(var h=e;r.length;){var f=r.shift(),l=r.shift();try{h=f(h)}catch(v){l(v);break}}try{c=Yr(h)}catch(v){return Promise.reject(v)}for(;a.length;)c=c.then(a.shift(),a.shift());return c};Tn.prototype.getUri=function(e){return e=ai(this.defaults,e),cc(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};Ho.forEach(["delete","get","head","options"],function(e){Tn.prototype[e]=function(t,r){return this.request(ai(r||{},{method:e,url:t,data:(r||{}).data}))}});Ho.forEach(["post","put","patch"],function(e){Tn.prototype[e]=function(t,r,o){return this.request(ai(o||{},{method:e,url:t,data:r}))}});var lc=Tn,Ii,Jr;function dc(){if(Jr)return Ii;Jr=1;var i=oi();function e(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var r;this.promise=new Promise(function(c){r=c});var o=this;this.promise.then(function(a){if(!!o._listeners){var c,d=o._listeners.length;for(c=0;c<d;c++)o._listeners[c](a);o._listeners=null}}),this.promise.then=function(a){var c,d=new Promise(function(h){o.subscribe(h),c=h}).then(a);return d.cancel=function(){o.unsubscribe(c)},d},t(function(c){o.reason||(o.reason=new i(c),r(o.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]},e.prototype.unsubscribe=function(r){if(!!this._listeners){var o=this._listeners.indexOf(r);o!==-1&&this._listeners.splice(o,1)}},e.source=function(){var r,o=new e(function(c){r=c});return{token:o,cancel:r}},Ii=e,Ii}var Oi,Zr;function uc(){return Zr||(Zr=1,Oi=function(e){return function(r){return e.apply(null,r)}}),Oi}var Ci,zr;function fc(){return zr||(zr=1,Ci=function(e){return typeof e=="object"&&e.isAxiosError===!0}),Ci}var $r=lt,hc=ko,qn=lc,vc=jo,pc=si();function Qo(i){var e=new qn(i),t=hc(qn.prototype.request,e);return $r.extend(t,qn.prototype,e),$r.extend(t,e),t.create=function(o){return Qo(vc(i,o))},t}var wt=Qo(pc);wt.Axios=qn;wt.Cancel=oi();wt.CancelToken=dc();wt.isCancel=Go();wt.VERSION=qo().version;wt.all=function(e){return Promise.all(e)};wt.spread=uc();wt.isAxiosError=fc();lr.exports=wt;lr.exports.default=wt;(function(i){i.exports=lr.exports})(Mo);const Vi=ls(Mo.exports);var Xn;(function(i){i.TEXT="m.text"})(Xn||(Xn={}));class hr{constructor(e,t,r,o){this.type=e,this.sender=t,this.content=r,this.timestamp=o}static from(e){if(mc(e))return new hr(e.content.msgtype,e.sender,e.content.body,e.origin_server_ts)}}const gc=i=>i.type==="m.room.create"&&i.content instanceof Object&&"creator"in i.content,Ec=i=>i.type==="m.room.member"&&i.content instanceof Object&&"membership"in i.content&&i.content.membership==="join",Vo=i=>i.type==="m.room.message",mc=i=>Vo(i)&&i.content instanceof Object&&"msgtype"in i.content&&i.content.msgtype===Xn.TEXT;var $e;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.JOINED=1]="JOINED",i[i.INVITED=2]="INVITED",i[i.LEFT=3]="LEFT"})($e||($e={}));class Pe{constructor(e,t=$e.UNKNOWN,r=[],o=[]){this.id=e,this.status=t,this.members=r,this.messages=o}static fromSync(e){var t,r,o;if(!e)return[];function a(c,d){return Object.entries(c).map(([h,f])=>d(h,f))}return[...a((t=e.join)!==null&&t!==void 0?t:{},Pe.fromJoined),...a((r=e.invite)!==null&&r!==void 0?r:{},Pe.fromInvited),...a((o=e.leave)!==null&&o!==void 0?o:{},Pe.fromLeft)]}static from(e,t){return typeof e=="string"?new Pe(e,t||$e.UNKNOWN):t!==void 0?new Pe(e.id,t,e.members,e.messages):e}static merge(e,t){return!t||t.id!==e.id?Pe.from(e):new Pe(e.id,e.status,[...t.members,...e.members].filter((r,o,a)=>a.indexOf(r)===o),[...t.messages,...e.messages])}static fromJoined(e,t){const r=[...t.state.events,...t.timeline.events],o=Pe.getMembersFromEvents(r),a=Pe.getMessagesFromEvents(r);return new Pe(e,$e.JOINED,o,a)}static fromInvited(e,t){const r=Pe.getMembersFromEvents(t.invite_state.events);return new Pe(e,$e.INVITED,r)}static fromLeft(e,t){const r=[...t.state.events,...t.timeline.events],o=Pe.getMembersFromEvents(r),a=Pe.getMessagesFromEvents(r);return new Pe(e,$e.LEFT,o,a)}static getMembersFromEvents(e){return Pe.getUniqueEvents(e.filter(t=>gc(t)||Ec(t))).map(t=>t.sender).filter((t,r,o)=>o.indexOf(t)===r)}static getMessagesFromEvents(e){return Pe.getUniqueEvents(e.filter(Vo)).map(t=>hr.from(t)).filter(Boolean)}static getUniqueEvents(e){const t={},r=[];return e.forEach((o,a)=>{const c=o.event_id;(c===void 0||!(c in t))&&(c!==void 0&&(t[c]=a),r.push(o))}),r}}var kn=globalThis&&globalThis.__awaiter||function(i,e,t,r){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(l){try{f(r.next(l))}catch(v){c(v)}}function h(l){try{f(r.throw(l))}catch(v){c(v)}}function f(l){l.done?a(l.value):o(l.value).then(d,h)}f((r=r.apply(i,e||[])).next())})};const eo=["syncToken","rooms"];class yc{constructor(e){this.storage=e,this.state={isRunning:!1,userId:void 0,deviceId:void 0,txnNo:0,accessToken:void 0,syncToken:void 0,pollingTimeout:void 0,pollingRetries:0,rooms:{}},this.onStateChangedListeners=new Map,this.waitReadyPromise=new Promise((t,r)=>kn(this,void 0,void 0,function*(){try{yield this.initFromStorage(),t()}catch(o){r(o)}}))}get(e){return this.state[e]}getRoom(e){const t=Pe.from(e,$e.UNKNOWN);return this.state.rooms[t.id]||t}update(e){return kn(this,void 0,void 0,function*(){yield this.waitReady();const t=Object.assign({},this.state);this.setState(e),this.updateStorage(e),this.notifyListeners(t,this.state,e)})}onStateChanged(e,...t){t.length>0?t.forEach(r=>{this.onStateChangedListeners.set(r,e)}):this.onStateChangedListeners.set("all",e)}waitReady(){return kn(this,void 0,void 0,function*(){return this.waitReadyPromise})}initFromStorage(){return kn(this,void 0,void 0,function*(){const e=yield this.storage.get(_e.MATRIX_PRESERVED_STATE);this.setState(e)})}prepareData(e){const r=["rooms"].some(o=>e[o]!==void 0)?JSON.parse(JSON.stringify(e)):e;return Object.values(r.rooms||{}).forEach(o=>{o.messages=[]}),r}updateStorage(e){if(Object.entries(e).filter(([r,o])=>eo.includes(r)&&Boolean(o)).length>0){const r={};eo.forEach(o=>{r[o]=this.state[o]}),this.storage.set(_e.MATRIX_PRESERVED_STATE,this.prepareData(r))}}setState(e){this.state={isRunning:e.isRunning||this.state.isRunning,userId:e.userId||this.state.userId,deviceId:e.deviceId||this.state.deviceId,txnNo:e.txnNo||this.state.txnNo,accessToken:e.accessToken||this.state.accessToken,syncToken:e.syncToken||this.state.syncToken,pollingTimeout:e.pollingTimeout||this.state.pollingTimeout,pollingRetries:e.pollingRetries||this.state.pollingRetries,rooms:this.mergeRooms(this.state.rooms,e.rooms)}}mergeRooms(e,t){if(!t)return e;const r=Array.isArray(t)?t:Object.values(t),o=Object.assign({},e);return r.forEach(a=>{o[a.id]=Pe.merge(a,e[a.id])}),o}notifyListeners(e,t,r){const o=this.onStateChangedListeners.get("all");o&&o(e,t,r),er(r).filter(a=>r[a]!==void 0).forEach(a=>{const c=this.onStateChangedListeners.get(a);c&&c(e,t,r)})}}var gn=globalThis&&globalThis.__awaiter||function(i,e,t,r){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(l){try{f(r.next(l))}catch(v){c(v)}}function h(l){try{f(r.throw(l))}catch(v){c(v)}}function f(l){l.done?a(l.value):o(l.value).then(d,h)}f((r=r.apply(i,e||[])).next())})};const wc=new it("MatrixHttpClient"),_c="/_matrix/client/r0";class Ac{constructor(e){this.baseUrl=e,this.cancelTokenSource=Vi.CancelToken.source()}get(e,t,r){return gn(this,void 0,void 0,function*(){return this.send("GET",e,r,t)})}post(e,t,r,o){return gn(this,void 0,void 0,function*(){return this.send("POST",e,r,o,t)})}put(e,t,r,o){return gn(this,void 0,void 0,function*(){return this.send("PUT",e,r,o,t)})}cancelAllRequests(){return gn(this,void 0,void 0,function*(){return this.cancelTokenSource.cancel("Manually cancelled")})}send(e,t,r,o,a){return gn(this,void 0,void 0,function*(){const c=r?this.getHeaders(r):void 0,d=o?this.getParams(o):void 0;let h;try{h=yield Vi.request({method:e,url:t,baseURL:this.apiUrl(_c),headers:c,data:a,params:d,cancelToken:this.cancelTokenSource.token})}catch(f){const l=f;throw wc.error("send",l.code,l.message,l.response.data),f.response.data}return h.data})}getHeaders(e){const t={},r=[];if(e.accessToken&&r.push(["Authorization",`Bearer ${e.accessToken}`]),r.length!==0){for(const[o,a]of r)t[o]=a;return t}}getParams(e){if(!e)return;const t=Object.assign(e,{});return er(t).forEach(r=>t[r]===void 0&&delete t[r]),t}apiUrl(...e){const t=this.baseUrl.endsWith("/")?this.baseUrl.substr(0,this.baseUrl.length-1):this.baseUrl,r=e.map(o=>o.startsWith("/")?o.substr(1):o);return[t,...r].join("/")}}var Ln=globalThis&&globalThis.__awaiter||function(i,e,t,r){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(l){try{f(r.next(l))}catch(v){c(v)}}function h(l){try{f(r.throw(l))}catch(v){c(v)}}function f(l){l.done?a(l.value):o(l.value).then(d,h)}f((r=r.apply(i,e||[])).next())})};class bc{constructor(e){this.httpClient=e}createRoom(e,t={}){return Ln(this,void 0,void 0,function*(){return this.httpClient.post("/createRoom",t,{accessToken:e})})}inviteToRoom(e,t,r){return Ln(this,void 0,void 0,function*(){return r.status!==$e.JOINED&&r.status!==$e.UNKNOWN?Promise.reject(`User is not a member of room ${r.id}.`):this.httpClient.post(`/rooms/${encodeURIComponent(r.id)}/invite`,{user_id:t},{accessToken:e})})}joinRoom(e,t){return Ln(this,void 0,void 0,function*(){return t.status===$e.JOINED?Promise.resolve({room_id:t.id}):this.httpClient.post(`/rooms/${encodeURIComponent(t.id)}/join`,{},{accessToken:e})})}getJoinedRooms(e){return Ln(this,void 0,void 0,function*(){return this.httpClient.get("/joined_rooms",void 0,{accessToken:e})})}}var Rc=globalThis&&globalThis.__awaiter||function(i,e,t,r){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(l){try{f(r.next(l))}catch(v){c(v)}}function h(l){try{f(r.throw(l))}catch(v){c(v)}}function f(l){l.done?a(l.value):o(l.value).then(d,h)}f((r=r.apply(i,e||[])).next())})};class Sc{constructor(e){this.httpClient=e}login(e,t,r){return Rc(this,void 0,void 0,function*(){return this.httpClient.post("/login",{type:"m.login.password",identifier:{type:"m.id.user",user:e},password:t,device_id:r})})}}var Pi=globalThis&&globalThis.__awaiter||function(i,e,t,r){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(l){try{f(r.next(l))}catch(v){c(v)}}function h(l){try{f(r.throw(l))}catch(v){c(v)}}function f(l){l.done?a(l.value):o(l.value).then(d,h)}f((r=r.apply(i,e||[])).next())})};class Tc{constructor(e){this.httpClient=e,this.cachedPromises=new Map}sync(e,t){return Pi(this,void 0,void 0,function*(){return this.withCache("sync",()=>this.httpClient.get("/sync",{timeout:t?t.pollingTimeout:void 0,since:t?t.syncToken:void 0},{accessToken:e}))})}sendMessage(e,t,r,o){return Pi(this,void 0,void 0,function*(){return new Promise((a,c)=>this.scheduleEvent({accessToken:e,roomId:t,type:"m.room.message",content:r,txnId:o,onSuccess:a,onError:c}))})}scheduleEvent(e){this.sendEvent(e)}sendEvent(e){return Pi(this,void 0,void 0,function*(){const{roomId:t,type:r,txnId:o,content:a,accessToken:c}=e;try{const d=yield this.httpClient.put(`/rooms/${encodeURIComponent(t)}/send/${r}/${encodeURIComponent(o)}`,a,{accessToken:c});e.onSuccess(d)}catch(d){e.onError(d)}})}withCache(e,t){let r=this.cachedPromises.get(e);return r||(r=t().finally(()=>{this.cachedPromises.delete(e)}),this.cachedPromises.set(e,r)),r}}class xc{constructor(){this.events={}}on(e,t){return typeof this.events[e]!="object"&&(this.events[e]=[]),this.events[e].push(t),()=>this.removeListener(e,t)}removeListener(e,t){if(typeof this.events[e]!="object")return;if(!t){this.events[e]=[];return}const r=this.events[e].indexOf(t);r>-1&&this.events[e].splice(r,1)}removeAllListeners(){Object.keys(this.events).forEach(e=>this.events[e].splice(0,this.events[e].length))}emit(e,...t){typeof this.events[e]=="object"&&[...this.events[e]].forEach(r=>r.apply(this,t))}once(e,t){const r=this.on(e,(...o)=>{r(),t.apply(this,o)});return r}}var st;(function(i){i.INVITE="invite",i.MESSAGE="message"})(st||(st={}));class Nc extends xc{constructor(){super(...arguments),this.eventEmitProviders=new Map([[st.INVITE,()=>[this.isInvite,this.emitInvite.bind(this)]],[st.MESSAGE,()=>[this.isMessage,this.emitMessage.bind(this)]]])}onStateChanged(e,t,r){for(const o of er(st))this.emitIfEvent(st[o],r)}emitIfEvent(e,t){const r=this.eventEmitProviders.get(e);if(r){const[o,a]=r();o(t)&&a(e,t)}}emitClientEvent(e,t,r){this.emit(e,{type:e,content:t,timestamp:r})}isInvite(e){return e.rooms?e.rooms.some(t=>t.status===$e.INVITED):!1}emitInvite(e,t){t.rooms.filter(r=>r.status===$e.INVITED).map(r=>[r.id,r.members]).forEach(([r,o])=>{this.emitClientEvent(e,{roomId:r,members:o})})}isMessage(e){return e.rooms?e.rooms.some(t=>t.messages.length>0):!1}emitMessage(e,t){t.rooms.filter(r=>r.messages.length>0).map(r=>r.messages.map(o=>[r.id,o,o.timestamp])).reduce((r,o)=>r.concat(o),[]).forEach(([r,o,a])=>{this.emitClientEvent(e,{roomId:r,message:o},a)})}}var Ie=globalThis&&globalThis.__awaiter||function(i,e,t,r){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(l){try{f(r.next(l))}catch(v){c(v)}}function h(l){try{f(r.throw(l))}catch(v){c(v)}}function f(l){l.done?a(l.value):o(l.value).then(d,h)}f((r=r.apply(i,e||[])).next())})};const Mi=new it("MatrixClient"),Ic=3,Oc=5e3;class vr{constructor(e,t,r,o,a,c){this.store=e,this.eventEmitter=t,this.userService=r,this.roomService=o,this.eventService=a,this.httpClient=c,this.isActive=!0,this._isReady=new Me,this.store.onStateChanged((d,h,f)=>{this.eventEmitter.onStateChanged(d,h,f)},"rooms")}static create(e){const t=new yc(e.storage),r=new Nc,o=new Ac(e.baseUrl),a=new Sc(o),c=new bc(o),d=new Tc(o);return new vr(t,r,a,c,d,o)}get joinedRooms(){return new Promise(e=>Ie(this,void 0,void 0,function*(){yield this.isConnected(),e(Object.values(this.store.get("rooms")).filter(t=>t.status===$e.JOINED))}))}get invitedRooms(){return new Promise(e=>Ie(this,void 0,void 0,function*(){yield this.isConnected(),e(Object.values(this.store.get("rooms")).filter(t=>t.status===$e.INVITED))}))}get leftRooms(){return new Promise(e=>Ie(this,void 0,void 0,function*(){yield this.isConnected(),e(Object.values(this.store.get("rooms")).filter(t=>t.status===$e.LEFT))}))}start(e){return Ie(this,void 0,void 0,function*(){const t=yield this.userService.login(e.id,e.password,e.deviceId);yield this.store.update({accessToken:t.access_token});const r=new Promise((o,a)=>Ie(this,void 0,void 0,function*(){yield this.poll(0,c=>Ie(this,void 0,void 0,function*(){this.store.get("isRunning")||o(),yield this.store.update({isRunning:!0,syncToken:c.next_batch,pollingTimeout:3e4,pollingRetries:0,rooms:Pe.fromSync(c.rooms)})}),c=>Ie(this,void 0,void 0,function*(){this.store.get("isRunning")||a(c),yield this.store.update({isRunning:!1,pollingRetries:this.store.get("pollingRetries")+1})}))}));return r.then(()=>{this._isReady.resolve()}).catch(console.error),r})}isConnected(){return Ie(this,void 0,void 0,function*(){return this._isReady.promise})}stop(){return Ie(this,void 0,void 0,function*(){return Mi.log("MATRIX CLIENT STOPPED"),this.isActive=!1,this._isReady=new Me,this.httpClient.cancelAllRequests()})}subscribe(e,t){this.eventEmitter.on(e,t)}unsubscribe(e,t){t&&this.eventEmitter.removeListener(e,t)}unsubscribeAll(e){this.eventEmitter.removeListener(e)}getRoomById(e){return Ie(this,void 0,void 0,function*(){return yield this.isConnected(),this.store.getRoom(e)})}createTrustedPrivateRoom(...e){return Ie(this,void 0,void 0,function*(){return yield this.isConnected(),this.requiresAuthorization("createRoom",t=>Ie(this,void 0,void 0,function*(){return(yield this.roomService.createRoom(t,{room_version:"5",invite:e,preset:"public_chat",is_direct:!0})).room_id}))})}inviteToRooms(e,...t){return Ie(this,void 0,void 0,function*(){yield this.isConnected(),yield this.requiresAuthorization("invite",r=>Promise.all(t.map(o=>{const a=this.store.getRoom(o);this.roomService.inviteToRoom(r,e,a).catch(c=>Mi.warn("inviteToRooms",c))})))})}joinRooms(...e){return Ie(this,void 0,void 0,function*(){yield this.isConnected(),yield this.requiresAuthorization("join",t=>Promise.all(e.map(r=>{const o=this.store.getRoom(r);return this.roomService.joinRoom(t,o)})))})}sendTextMessage(e,t){return Ie(this,void 0,void 0,function*(){yield this.isConnected(),yield this.requiresAuthorization("send",r=>Ie(this,void 0,void 0,function*(){const o=yield this.createTxnId();return this.eventService.sendMessage(r,e,{msgtype:"m.text",body:t},o)}))})}poll(e,t,r){return Ie(this,void 0,void 0,function*(){const o=this.store,a=this.sync.bind(this),c=(d,h)=>Ie(this,void 0,void 0,function*(){let f=0;try{const l=yield a();t(l)}catch(l){r(l),f=o.get("pollingRetries"),this.isActive&&Mi.log(`Retry syncing... ${f} retries so far`)}finally{this.isActive?setTimeout(()=>Ie(this,void 0,void 0,function*(){yield c(d,h)}),f>Ic?Oc+e:e):h(new Error("Syncing stopped manually."))}});return new Promise(c)})}sync(){return Ie(this,void 0,void 0,function*(){return this.requiresAuthorization("sync",e=>Ie(this,void 0,void 0,function*(){return this.eventService.sync(e,{pollingTimeout:this.store.get("pollingTimeout"),syncToken:this.store.get("syncToken")})}))})}requiresAuthorization(e,t){return Ie(this,void 0,void 0,function*(){const r=this.store.get("accessToken");return r?t(r):Promise.reject(`${e} requires authorization but no access token has been provided.`)})}createTxnId(){return Ie(this,void 0,void 0,function*(){const e=new Date().getTime(),t=this.store.get("txnNo");return yield this.store.update({txnNo:t+1}),`m${e}.${t}`})}}var Se=globalThis&&globalThis.__awaiter||function(i,e,t,r){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(l){try{f(r.next(l))}catch(v){c(v)}}function h(l){try{f(r.throw(l))}catch(v){c(v)}}function f(l){l.done?a(l.value):o(l.value).then(d,h)}f((r=r.apply(i,e||[])).next())})};const de=new it("P2PCommunicationClient"),Cc=["beacon-node-1.diamond.papers.tech","beacon-node-1.sky.papers.tech","beacon-node-2.sky.papers.tech","beacon-node-1.hope.papers.tech","beacon-node-1.hope-2.papers.tech","beacon-node-1.hope-3.papers.tech","beacon-node-1.hope-4.papers.tech","beacon-node-1.hope-5.papers.tech"];class Pc extends Po{constructor(e,t,r,o,a,c,d){super(t),this.name=e,this.replicationCount=r,this.storage=o,this.iconUrl=c,this.appUrl=d,this.client=new Me,this.activeListeners=new Map,this.ignoredRooms=[],this.loginCounter=0,de.log("constructor","P2PCommunicationClient created");const h=a.length>0?a:Cc;this.ENABLED_RELAY_SERVERS=h}getPairingRequestInfo(){return Se(this,void 0,void 0,function*(){const e={id:yield Nt(),type:"p2p-pairing-request",name:this.name,version:xo,publicKey:yield this.getPublicKey(),relayServer:yield this.getRelayServer()};return this.iconUrl&&(e.icon=this.iconUrl),this.appUrl&&(e.appUrl=this.appUrl),e})}getPairingResponseInfo(e){return Se(this,void 0,void 0,function*(){const t={id:e.id,type:"p2p-pairing-response",name:this.name,version:e.version,publicKey:yield this.getPublicKey(),relayServer:yield this.getRelayServer()};return this.iconUrl&&(t.icon=this.iconUrl),this.appUrl&&(t.appUrl=this.appUrl),t})}getRelayServer(){return Se(this,void 0,void 0,function*(){if(this.relayServer)return this.relayServer.promise;this.relayServer=new Me;const e=yield this.storage.get(_e.MATRIX_SELECTED_NODE);if(e&&e.length>0)return this.relayServer.resolve(e),e;const t=[...this.ENABLED_RELAY_SERVERS];for(;t.length>0;){const r=Math.floor(Math.random()*t.length),o=t[r];try{return yield Vi.get(`https://${o}/_matrix/client/versions`),this.storage.set(_e.MATRIX_SELECTED_NODE,o).catch(a=>de.log(a)),this.relayServer.resolve(o),o}catch{de.log(`Ignoring server "${o}", trying another one...`),t.splice(r,1)}}throw this.relayServer.reject("No matrix server reachable!"),new Error("No matrix server reachable!")})}tryJoinRooms(e,t=1){return Se(this,void 0,void 0,function*(){try{yield(yield this.client.promise).joinRooms(e)}catch(r){t<=10&&r.errcode==="M_FORBIDDEN"?(de.log("Retrying to join...",r),setTimeout(()=>Se(this,void 0,void 0,function*(){yield this.tryJoinRooms(e,t+1)}),200)):de.log(`Failed to join after ${t} tries.`,r)}})}start(){var e;return Se(this,void 0,void 0,function*(){de.log("start","starting client"),de.log("start","connecting to server");const t=yield this.getRelayServer(),r=vr.create({baseUrl:`https://${t}`,storage:this.storage});this.initialListener=h=>Se(this,void 0,void 0,function*(){this.initialEvent&&this.initialEvent.timestamp&&h&&h.timestamp?this.initialEvent.timestamp<h.timestamp&&(this.initialEvent=h):this.initialEvent=h}),r.subscribe(st.MESSAGE,this.initialListener),r.subscribe(st.INVITE,h=>Se(this,void 0,void 0,function*(){let f;h.content.members.length===1&&(f=h.content.members[0]),yield this.tryJoinRooms(h.content.roomId),f&&(yield this.updateRelayServer(f),yield this.updatePeerRoom(f,h.content.roomId))}));const o=`login:${Math.floor(Date.now()/1e3/(5*60))}`;de.log("start",`login ${o}, ${yield this.getPublicKeyHash()} on ${t}`);const a=yt.hash(un(o),32),c=(e=this.keyPair.secretKey)!==null&&e!==void 0?e:this.keyPair.privateKey,d=bn.sign(c,a);try{yield r.start({id:yield this.getPublicKeyHash(),password:`ed:${kt(d)}:${yield this.getPublicKey()}`,deviceId:kt(this.keyPair.publicKey)})}catch{if(de.error("start","Could not log in, retrying"),yield this.reset(),this.loginCounter<=this.ENABLED_RELAY_SERVERS.length){this.loginCounter++,this.start();return}else throw de.error("start","Tried to log in to every known beacon node, but no login was successful."),new Error("Could not connect to any beacon nodes. Try again later.")}de.log("start","login successful, client is ready"),this.client.resolve(r)})}stop(){return Se(this,void 0,void 0,function*(){de.log("stop","stopping client"),this.client.isResolved()&&(yield(yield this.client.promise).stop().catch(e=>de.error(e))),yield this.reset()})}reset(){return Se(this,void 0,void 0,function*(){de.log("reset","resetting connection"),yield this.storage.delete(_e.MATRIX_PEER_ROOM_IDS).catch(e=>de.log(e)),yield this.storage.delete(_e.MATRIX_PRESERVED_STATE).catch(e=>de.log(e)),yield this.storage.delete(_e.MATRIX_SELECTED_NODE).catch(e=>de.log(e)),this.relayServer=void 0,this.client=new Me,this.initialEvent=void 0,this.initialListener=void 0})}listenForEncryptedMessage(e,t){return Se(this,void 0,void 0,function*(){if(this.activeListeners.has(e))return;de.log("listenForEncryptedMessage",`start listening for encrypted messages from publicKey ${e}`);const r=yield this.createCryptoBoxServer(e,this.keyPair),o=d=>Se(this,void 0,void 0,function*(){if(this.isTextMessage(d.content)&&(yield this.isSender(d,e))){let h;yield this.updateRelayServer(d.content.message.sender),yield this.updatePeerRoom(d.content.message.sender,d.content.roomId);try{h=Buffer.from(d.content.message.content,"hex")}catch{}if(h&&h.length>=Qn+Vn)try{const f=yield So(h,r.receive);de.log("listenForEncryptedMessage",`received a message from ${e}`,f),t(f)}catch{}}});this.activeListeners.set(e,o),(yield this.client.promise).subscribe(st.MESSAGE,o);const a=this.initialEvent;a&&a.timestamp&&new Date().getTime()-a.timestamp<5*60*1e3?(de.log("listenForEncryptedMessage","Handling previous event"),yield o(a)):de.log("listenForEncryptedMessage","No previous event found");const c=this.initialListener;c&&(yield this.client.promise).unsubscribe(st.MESSAGE,c),this.initialListener=void 0,this.initialEvent=void 0})}unsubscribeFromEncryptedMessage(e){return Se(this,void 0,void 0,function*(){const t=this.activeListeners.get(e);!t||((yield this.client.promise).unsubscribe(st.MESSAGE,t),this.activeListeners.delete(e))})}unsubscribeFromEncryptedMessages(){return Se(this,void 0,void 0,function*(){(yield this.client.promise).unsubscribeAll(st.MESSAGE),this.activeListeners.clear()})}sendMessage(e,t){return Se(this,void 0,void 0,function*(){const r=yield this.createCryptoBoxClient(t.publicKey,this.keyPair),o=yield en(Buffer.from(t.publicKey,"hex")),a=Sr(o,t.relayServer),c=yield this.getRelevantRoom(a);yield this.waitForJoin(c);const d=yield Ro(e,r.send);de.log("sendMessage","sending encrypted message",t.publicKey,c,e),(yield this.client.promise).sendTextMessage(c,d).catch(h=>Se(this,void 0,void 0,function*(){if(h.errcode==="M_FORBIDDEN"){de.log("sendMessage","M_FORBIDDEN",c,h),yield this.deleteRoomIdFromRooms(c);const f=yield this.getRelevantRoom(a);de.log("sendMessage","Old room deleted, new room created",f),(yield this.client.promise).sendTextMessage(f,d).catch(l=>Se(this,void 0,void 0,function*(){de.log("sendMessage","inner error",f,l)}))}else de.log("sendMessage","unexpected error",h)}))})}updatePeerRoom(e,t){return Se(this,void 0,void 0,function*(){de.log("updatePeerRoom",e,t);const r=e.split(":");if(r.length<2||!r[0].startsWith("@"))throw new Error("Invalid sender");const o=yield this.storage.get(_e.MATRIX_PEER_ROOM_IDS),a=o[e];a===t&&de.debug("updatePeerRoom","rooms are the same, not updating"),de.debug("updatePeerRoom","current room",a,"new room",t),a&&a[1]&&(de.log("updatePeerRoom",`adding room "${a[1]}" to ignored array`),this.ignoredRooms.push(a[1])),o[e]=t,yield this.storage.set(_e.MATRIX_PEER_ROOM_IDS,o)})}deleteRoomIdFromRooms(e){return Se(this,void 0,void 0,function*(){const t=yield this.storage.get(_e.MATRIX_PEER_ROOM_IDS),r=Object.entries(t).filter(o=>o[1]!==e).reduce((o,a)=>Object.assign(Object.assign({},o),{[a[0]]:a[1]}),{});yield this.storage.set(_e.MATRIX_PEER_ROOM_IDS,r),this.ignoredRooms.push(e)})}listenForChannelOpening(e){return Se(this,void 0,void 0,function*(){de.debug("listenForChannelOpening"),(yield this.client.promise).subscribe(st.MESSAGE,t=>Se(this,void 0,void 0,function*(){if(this.isTextMessage(t.content)&&(yield this.isChannelOpenMessage(t.content))){de.log("listenForChannelOpening","channel opening received, trying to decrypt",JSON.stringify(t)),yield this.updateRelayServer(t.content.message.sender),yield this.updatePeerRoom(t.content.message.sender,t.content.roomId);const r=t.content.message.content.split(":"),o=Buffer.from(r[r.length-1],"hex");if(o.length>=Qn+Vn)try{const a=JSON.parse(yield To(o,this.keyPair.publicKey,this.keyPair.secretKey));de.log("listenForChannelOpening","channel opening received and decrypted",JSON.stringify(a)),e(Object.assign(Object.assign({},a),{senderId:yield on(a.publicKey)}))}catch{}}}))})}waitForJoin(e,t=0){return Se(this,void 0,void 0,function*(){const r=yield(yield this.client.promise).getRoomById(e);if(de.log("waitForJoin",`Currently ${r.members.length} members, we need at least 2`),!(r.members.length>=2||r.members.length===0)){if(t<=200)return de.log(`Waiting for join... Try: ${t}`),new Promise(o=>{setTimeout(()=>Se(this,void 0,void 0,function*(){o(this.waitForJoin(e,t+1))}),100*(t>50?10:1))});throw new Error(`No one joined after ${t} tries.`)}})}sendPairingResponse(e){return Se(this,void 0,void 0,function*(){de.log("sendPairingResponse");const t=yield en(Buffer.from(e.publicKey,"hex")),r=Sr(t,e.relayServer),o=yield(yield this.client.promise).createTrustedPrivateRoom(r);de.debug("sendPairingResponse",`Connecting to room "${o}"`),yield this.updatePeerRoom(r,o),yield this.waitForJoin(o),de.debug("sendPairingResponse","Successfully joined room.");const a=typeof e.version>"u"?yield this.getPublicKey():JSON.stringify(yield this.getPairingResponseInfo(e));de.debug("sendPairingResponse","Sending pairing response",a);const c=yield this.encryptMessageAsymmetric(e.publicKey,a),d=["@channel-open",r,c].join(":");(yield this.client.promise).sendTextMessage(o,d).catch(h=>Se(this,void 0,void 0,function*(){if(h.errcode==="M_FORBIDDEN"){de.log("sendPairingResponse","M_FORBIDDEN",o,h),yield this.deleteRoomIdFromRooms(o);const f=yield this.getRelevantRoom(r);de.log("sendPairingResponse","Old room deleted, new room created",f),(yield this.client.promise).sendTextMessage(f,d).catch(l=>Se(this,void 0,void 0,function*(){de.log("sendPairingResponse","inner error",f,l)}))}else de.log("sendPairingResponse","unexpected error",h)}))})}isTextMessage(e){return e.message.type===Xn.TEXT}updateRelayServer(e){return Se(this,void 0,void 0,function*(){de.log("updateRelayServer",e);const t=e.split(":");if(t.length<2||!t[0].startsWith("@"))throw new Error("Invalid sender");const r=t.shift(),o=t.join(":"),a=localStorage.getItem("beacon:communication-peers-dapp")?new Wn(this.storage,_e.TRANSPORT_P2P_PEERS_DAPP):new Wn(this.storage,_e.TRANSPORT_P2P_PEERS_WALLET),d=(yield a.getPeers()).map(h=>Se(this,void 0,void 0,function*(){`@${yield en(Buffer.from(h.publicKey,"hex"))}`===r&&h.relayServer!==o&&(h.relayServer=o,yield a.addPeer(h))}));yield Promise.all(d)})}isChannelOpenMessage(e){return Se(this,void 0,void 0,function*(){return e.message.content.startsWith(`@channel-open:@${yield en(Buffer.from(yield this.getPublicKey(),"hex"))}`)})}isSender(e,t){return Se(this,void 0,void 0,function*(){return e.content.message.sender.startsWith(`@${yield en(Buffer.from(t,"hex"))}`)})}getRelevantRoom(e){return Se(this,void 0,void 0,function*(){const t=yield this.storage.get(_e.MATRIX_PEER_ROOM_IDS);let r=t[e];if(!r){de.log("getRelevantRoom",`No room found for peer ${e}, checking joined ones.`);const o=yield this.getRelevantJoinedRoom(e);r=o.id,t[e]=o.id,yield this.storage.set(_e.MATRIX_PEER_ROOM_IDS,t)}return de.log("getRelevantRoom",`Using room ${r}`),r})}getRelevantJoinedRoom(e){return Se(this,void 0,void 0,function*(){const t=yield(yield this.client.promise).joinedRooms;de.log("checking joined rooms",t,e);const r=t.filter(a=>!this.ignoredRooms.some(c=>a.id===c)).filter(a=>a.members.some(c=>c===e));let o;if(r.length===0||this.ignoredRooms.length>0){de.log("getRelevantJoinedRoom","no relevant rooms found, creating new one");const a=yield(yield this.client.promise).createTrustedPrivateRoom(e);o=yield(yield this.client.promise).getRoomById(a),de.log("getRelevantJoinedRoom",`waiting for other party to join room: ${o.id}`),yield this.waitForJoin(a),de.log("getRelevantJoinedRoom",`new room created and peer invited: ${o.id}`)}else o=r[0],de.log("getRelevantJoinedRoom",`channel already open, reusing room ${o.id}`);return o})}}var Gt=globalThis&&globalThis.__awaiter||function(i,e,t,r){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(l){try{f(r.next(l))}catch(v){c(v)}}function h(l){try{f(r.throw(l))}catch(v){c(v)}}function f(l){l.done?a(l.value):o(l.value).then(d,h)}f((r=r.apply(i,e||[])).next())})};const ki=new it("P2PTransport");class Mc extends Oo{constructor(e,t,r,o,a,c,d){super(e,new Pc(e,t,1,r,o,c,d),new Wn(r,a)),this.type=Qt.P2P}static isAvailable(){return Gt(this,void 0,void 0,function*(){return Promise.resolve(!0)})}connect(){const e=Object.create(null,{connect:{get:()=>super.connect}});return Gt(this,void 0,void 0,function*(){if(this._isConnected!==ut.NOT_CONNECTED)return;ki.log("connect"),this._isConnected=ut.CONNECTING,yield this.client.start();const t=yield this.getPeers();if(t.length>0){ki.log("connect",`connecting to ${t.length} peers`);const r=t.map(o=>Gt(this,void 0,void 0,function*(){return this.listen(o.publicKey)}));Promise.all(r).catch(o=>ki.error("connect",o))}return yield this.startOpenChannelListener(),e.connect.call(this)})}disconnect(){const e=Object.create(null,{disconnect:{get:()=>super.disconnect}});return Gt(this,void 0,void 0,function*(){return yield this.client.stop(),e.disconnect.call(this)})}startOpenChannelListener(){return Gt(this,void 0,void 0,function*(){})}getPairingRequestInfo(){return Gt(this,void 0,void 0,function*(){return this.client.getPairingRequestInfo()})}listen(e){return Gt(this,void 0,void 0,function*(){yield this.client.listenForEncryptedMessage(e,t=>{const r={origin:pt.P2P,id:e};this.notifyListeners(t,r).catch(o=>{throw o})}).catch(t=>{throw t})})}}var bt=globalThis&&globalThis.__awaiter||function(i,e,t,r){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(l){try{f(r.next(l))}catch(v){c(v)}}function h(l){try{f(r.throw(l))}catch(v){c(v)}}function f(l){l.done?a(l.value):o(l.value).then(d,h)}f((r=r.apply(i,e||[])).next())})};class kc extends ba{constructor(){super(...arguments),this.activeListeners=new Map}init(){return bt(this,void 0,void 0,function*(){this.subscribeToMessages().catch(console.error)})}listenForEncryptedMessage(e,t){return bt(this,void 0,void 0,function*(){if(this.activeListeners.has(e))return;const r=(o,a)=>bt(this,void 0,void 0,function*(){try{const c=yield this.decryptMessage(e,o.encryptedPayload);t(c,a)}catch{}});this.activeListeners.set(e,r)})}sendMessage(e,t){var r;return bt(this,void 0,void 0,function*(){const o=yield this.encryptMessage(t.publicKey,e),a=(r=t)===null||r===void 0?void 0:r.extensionId,c={target:xt.EXTENSION,encryptedPayload:o,targetId:a};Re.postMessage(c,Re.location.origin)})}listenForChannelOpening(e){return bt(this,void 0,void 0,function*(){const t=r=>bt(this,void 0,void 0,function*(){var o,a;if(r.source!==Re||r.origin!==Re.location.origin)return;const c=(o=r==null?void 0:r.data)===null||o===void 0?void 0:o.message;if(c&&c.target===xt.PAGE&&(yield this.isChannelOpenMessage(c))){const d=Buffer.from(c.payload,"hex");if(d.length>=Qn+Vn)try{const h=JSON.parse(yield To(d,this.keyPair.publicKey,this.keyPair.secretKey));e(Object.assign(Object.assign({},h),{senderId:yield on(h.publicKey),extensionId:(a=r==null?void 0:r.data)===null||a===void 0?void 0:a.sender.id}))}catch{}}});Re.addEventListener("message",t)})}sendPairingRequest(e){return bt(this,void 0,void 0,function*(){const t={target:xt.EXTENSION,payload:yield new Vt().serialize(yield this.getPairingRequestInfo()),targetId:e};Re.postMessage(t,Re.location.origin)})}isChannelOpenMessage(e){return bt(this,void 0,void 0,function*(){return typeof e=="object"&&e.hasOwnProperty("payload")})}subscribeToMessages(){return bt(this,void 0,void 0,function*(){Re.addEventListener("message",e=>{if(!(e.source!==Re||e.origin!==Re.location.origin)&&typeof e=="object"&&e){const t=e.data;t.message&&t.message.target===xt.PAGE&&this.activeListeners.forEach(r=>{r(t.message,{origin:pt.EXTENSION,id:t.sender.id||""})})}})})}}var jt=globalThis&&globalThis.__awaiter||function(i,e,t,r){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(l){try{f(r.next(l))}catch(v){c(v)}}function h(l){try{f(r.throw(l))}catch(v){c(v)}}function f(l){l.done?a(l.value):o(l.value).then(d,h)}f((r=r.apply(i,e||[])).next())})};const En=new it("PostMessageTransport");let to=!1,mn,mt;const Lc=i=>{mt||(mt=[]),mt.some(e=>e.id===i.id)||(mt.push(i),Re.postMessage("extensionsUpdated",Re.location.origin))};class xn extends Oo{constructor(e,t,r,o){super(e,new kc(e,t),new Wn(r,o)),this.type=Qt.POST_MESSAGE}static isAvailable(){return jt(this,void 0,void 0,function*(){return new Promise(e=>{const t=o=>{const a=o.data;a&&a.payload==="pong"&&(e(!0),Re.removeEventListener("message",t))};Re.addEventListener("message",t);const r={target:xt.EXTENSION,payload:"ping"};Re.postMessage(r,Re.location.origin)})})}static getAvailableExtensions(){return jt(this,void 0,void 0,function*(){return mn||mt||(mt=[],mn=new Promise(e=>{xn.listenForExtensions(),setTimeout(()=>{e(mt!=null?mt:[])},1e3)}).finally(()=>{mn=void 0}),mn)})}static listenForExtensions(){if(to)return;const e=r=>{if(r.source!==Re||r.origin!==Re.location.origin)return;const o=r.data,a=o.sender;o&&o.payload==="pong"&&a&&(En.log("getAvailableExtensions",`extension "${a.name}" is available`,a),Lc(a))};Re.addEventListener("message",e);const t={target:xt.EXTENSION,payload:"ping"};Re.postMessage(t,Re.location.origin),to=!0}connect(){const e=Object.create(null,{connect:{get:()=>super.connect}});return jt(this,void 0,void 0,function*(){if(En.log("connect"),this._isConnected!==ut.NOT_CONNECTED)return;this._isConnected=ut.CONNECTING;const t=yield this.getPeers();if(t.length>0){En.log("connect",`connecting to ${t.length} peers`);const r=t.map(o=>jt(this,void 0,void 0,function*(){return this.listen(o.publicKey)}));Promise.all(r).catch(o=>En.error("connect",o))}yield this.startOpenChannelListener(),yield e.connect.call(this)})}startOpenChannelListener(){return jt(this,void 0,void 0,function*(){})}getPairingRequestInfo(){return jt(this,void 0,void 0,function*(){return this.client.getPairingRequestInfo()})}listen(e){return jt(this,void 0,void 0,function*(){En.log("listen",e),yield this.client.listenForEncryptedMessage(e,(t,r)=>{const o={origin:pt.EXTENSION,id:r.id};this.notifyListeners(t,o).catch(a=>{throw a})}).catch(t=>{throw t})})}}const no={default:{css:`:host {
  --animation-duration: 300ms;
  all: initial;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

.animated {
  animation-duration: var(--animation-duration);
  animation-fill-mode: both;
}

.fadeIn {
  animation-name: fadeIn;
}

.fadeOut {
  animation-name: fadeOut;
}

.beacon-modal__wrapper {
  position: relative;
  top: 0;
  display: inline-block;
  z-index: 2147483000;
  max-width: 500px;
  width: 80%;
  padding: 24px;
}

@media (min-height: 700px) {
  .beacon-modal__wrapper {
    top: 50%;
    transform: translateY(-50%);
  }
}

.theme__light .beacon-modal__base,
.theme__light .beacon-modal__close__wrapper {
  background: #fff;
}

.theme__dark .beacon-modal__base,
.theme__dark .beacon-modal__close__wrapper {
  background: #27334c;
}

.beacon-modal__base,
.beacon-modal__close__wrapper {
  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.1);
}

.beacon-modal__base {
  margin: 0 auto;
  border-radius: 32px;
  overflow: hidden;
}

.beacon-modal__header {
  padding: 16px 0;
  width: 100%;
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: center;
}

.beacon-modal__headerLogo {
  width: 100%;
  max-width: 320px;
  margin: 20px auto;
  height: 100%;
}

a,
button {
  cursor: pointer;
}

.beacon-modal__close__wrapper {
  position: absolute;
  top: 44px;
  right: 24px;
  z-index: 10000;
  cursor: pointer;
  border-radius: 100%;
}

.beacon-modal__close__icon {
  width: 16px;
  height: 16px;
  position: relative;
  top: 0;
  right: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  transform: rotate(45deg);
  margin: 8px;
}

.beacon-modal__close__line1 {
  position: absolute;
  width: 90%;
}

.beacon-modal__close__line2 {
  position: absolute;
  width: 90%;
  transform: rotate(90deg);
}

.theme__light .beacon-modal__close__line2,
.theme__light .beacon-modal__close__line1 {
  border: 1px solid #000;
}

.theme__dark .beacon-modal__close__line2,
.theme__dark .beacon-modal__close__line1 {
  border: 1px solid #fff;
}

.beacon-alert__base {
  position: fixed;
  overflow-y: scroll;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 2147482999;
  background-color: rgb(17 17 17 / 0.84);
  text-align: center;
  -ms-overflow-style: none;
  scrollbar-width: none;
  font-family: Roboto, Helvetica, sans-serif;
}

.beacon-alert__base::-webkit-scrollbar {
  display: none;
}

.beacon-alert__title {
  text-align: center;
}

.beacon-alert__text,
.beacon-alert__title {
  margin: 0 auto;
  padding: 0 0 24px;
}

.margin__bottom {
  margin-bottom: 16px;
}

.beacon-alert__title {
  font-size: 18px;
}

.theme__light .beacon-alert__title {
  color: #3b3d40;
}

.theme__dark .beacon-alert__title,
.theme__dark .beacon-alert__text {
  color: #7c99d6;
}

.beacon-alert__text {
  color: #000;
  font-size: 14px;
}

.beacon-modal__button,
.beacon-modal__button--outline {
  height: 36px;
  font-size: 14px;
  letter-spacing: 0.84px;
  margin-bottom: 4px;
  margin-inline-end: 2px;
  margin-inline-start: 2px;
  margin-left: 2px;
  margin-right: 2px;
  margin-top: 4px;
  padding-inline-end: 15.4px;
  padding-inline-start: 15.4px;
  padding-left: 15.4px;
  padding-right: 15.4px;
  overflow-wrap: break-word;
  pointer-events: auto;
  text-align: center;
  border-radius: 4px;
  border: 2px solid #3880ff;
}

.beacon-modal__button {
  background: #3880ff;
  color: #fff;
}

.beacon-modal__button--outline {
  background: #fff;
  color: #444444;
  border: 1px solid #444444;
}

.beacon-alert__image {
  width: 200px;
  height: 200px;
  box-sizing: border-box;
  box-shadow: 0 10px 20px 0 rgba(17, 17, 17, 0.12);
  border: 1px solid rgba(17, 17, 17, 0.04);
  border-radius: 16px;
}
.connect__btn {
  margin: 24px 0;
  width: 100%;
}

#beacon-modal__content {
  padding: 24px;
}

#beacon-switch {
  margin-top: 24px;
}

#beacon-title {
  margin: 0 0 24px;
}

a {
  text-decoration: none;
}

pre {
  white-space: pre-wrap; /* css-3 */
  white-space: -moz-pre-wrap; /* Mozilla, since 1999 */
  white-space: -pre-wrap; /* Opera 4-6 */
  white-space: -o-pre-wrap; /* Opera 7 */
  word-wrap: break-word; /* Internet Explorer 5.5+ */
  padding: 16px;
  background: #ececec;
  line-height: 1.25rem;
}
`},pair:{css:`#beacon-main-text {
  display: initial;
}
.beacon-selection__container {
  padding: 16px 16px 0;
}
.beacon-selection__list {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  text-decoration: none;
  padding-bottom: 12px;
  align-items: center;
}
.beacon-list__title {
  text-align: left;
  font-size: 12px;
}
.beacon-list__wrapper:nth-child(-n + 3) {
  padding: 0 0 1rem;
}
.theme__light .beacon-list__title {
  color: #7c828b;
}
.theme__dark .beacon-list__title,
.theme__dark #beacon--disclaimer {
  color: #7c99d6;
}

.beacon-selection__name {
  font-size: 1rem;
  font-weight: 600;
  text-align: left;
}
.theme__light .beacon-selection__name,
.theme__light .beacon--selection__name__lg {
  color: #3b3d40;
}
.theme__dark .beacon-selection__name,
.theme__dark .beacon--selection__name__lg {
  color: #6183ff;
}
.beacon-selection__img {
  width: 48px;
  height: 48px;
  box-shadow: 0 4px 12px 0 rgba(17, 17, 17, 0.24);
  border-radius: 16px;
  background-color: #fff;
}
.beacon--selection__name__lg {
  font-size: 1.5rem;
  font-weight: 600;
  text-align: center;
  padding: 1rem 0;
}
.beacon--selected__container {
  padding: 2rem 0 0;
}
#beacon--qr__copy__container {
  height: 0;
}
#beacon--qr__copy {
  display: none;
  position: relative;
  margin-top: auto;
  margin-left: auto;
  margin-right: auto;
}
#beacon--qr__container {
  margin-left: auto;
  margin-right: auto;
}
#beacon--qr__container:hover #beacon--qr__copy {
  display: block;
}

.disabled p {
  text-align: left;
  margin: 0;
  font-size: 10px;
  font-weight: 300;
  opacity: 0.48;
}

#beacon--disclaimer {
  text-align: left;
  padding-top: 24px;
  font-size: 0.875rem;
}
.progress-line,
.progress-line:before {
  height: 3px;
  width: -webkit-fill-available;
  margin-left: -24px;
  margin-right: -24px;
}
.progress-line {
  background-color: #a7c4f7;
  display: -webkit-flex;
  display: flex;
}
.progress-line:before {
  background-color: #3880ff;
  content: '';
  -webkit-animation: running-progress 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
  animation: running-progress 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
}
@-webkit-keyframes running-progress {
  0% {
    margin-left: 0px;
    margin-right: 100%;
  }
  50% {
    margin-left: 25%;
    margin-right: 0%;
  }
  100% {
    margin-left: 100%;
    margin-right: 0;
  }
}
@keyframes running-progress {
  0% {
    margin-left: 0px;
    margin-right: 100%;
  }
  50% {
    margin-left: 25%;
    margin-right: 0%;
  }
  100% {
    margin-left: 100%;
    margin-right: 0;
  }
}
`}},Yn=(i,e)=>e.test(i.navigator.userAgent),Uc=(i,e)=>i.matchMedia(e).matches,Wi=i=>Uc(i,"(any-pointer:coarse)"),Bc=i=>!!(Yn(i,/iPad/i)||Yn(i,/Macintosh/i)&&Wi(i)),Wo=i=>Yn(i,/iPhone|iPod/i)||Bc(i),Xo=i=>Yn(i,/android|sink/i);var pr={exports:{}};(function(i,e){var t=function(){var r=function(A,y){var n=236,u=17,w=A,b=a[y],_=null,m=0,O=null,T=[],C={},D=function(E,g){m=w*4+17,_=function(s){for(var p=new Array(s),S=0;S<s;S+=1){p[S]=new Array(s);for(var P=0;P<s;P+=1)p[S][P]=null}return p}(m),L(0,0),L(m-7,0),L(0,m-7),Q(),N(),ee(E,g),w>=7&&z(E),O==null&&(O=se(w,b,T)),B(O,g)},L=function(E,g){for(var s=-1;s<=7;s+=1)if(!(E+s<=-1||m<=E+s))for(var p=-1;p<=7;p+=1)g+p<=-1||m<=g+p||(0<=s&&s<=6&&(p==0||p==6)||0<=p&&p<=6&&(s==0||s==6)||2<=s&&s<=4&&2<=p&&p<=4?_[E+s][g+p]=!0:_[E+s][g+p]=!1)},q=function(){for(var E=0,g=0,s=0;s<8;s+=1){D(!0,s);var p=d.getLostPoint(C);(s==0||E>p)&&(E=p,g=s)}return g},N=function(){for(var E=8;E<m-8;E+=1)_[E][6]==null&&(_[E][6]=E%2==0);for(var g=8;g<m-8;g+=1)_[6][g]==null&&(_[6][g]=g%2==0)},Q=function(){for(var E=d.getPatternPosition(w),g=0;g<E.length;g+=1)for(var s=0;s<E.length;s+=1){var p=E[g],S=E[s];if(_[p][S]==null)for(var P=-2;P<=2;P+=1)for(var G=-2;G<=2;G+=1)P==-2||P==2||G==-2||G==2||P==0&&G==0?_[p+P][S+G]=!0:_[p+P][S+G]=!1}},z=function(E){for(var g=d.getBCHTypeNumber(w),s=0;s<18;s+=1){var p=!E&&(g>>s&1)==1;_[Math.floor(s/3)][s%3+m-8-3]=p}for(var s=0;s<18;s+=1){var p=!E&&(g>>s&1)==1;_[s%3+m-8-3][Math.floor(s/3)]=p}},ee=function(E,g){for(var s=b<<3|g,p=d.getBCHTypeInfo(s),S=0;S<15;S+=1){var P=!E&&(p>>S&1)==1;S<6?_[S][8]=P:S<8?_[S+1][8]=P:_[m-15+S][8]=P}for(var S=0;S<15;S+=1){var P=!E&&(p>>S&1)==1;S<8?_[8][m-S-1]=P:S<9?_[8][15-S-1+1]=P:_[8][15-S-1]=P}_[m-8][8]=!E},B=function(E,g){for(var s=-1,p=m-1,S=7,P=0,G=d.getMaskFunction(g),j=m-1;j>0;j-=2)for(j==6&&(j-=1);;){for(var X=0;X<2;X+=1)if(_[p][j-X]==null){var le=!1;P<E.length&&(le=(E[P]>>>S&1)==1);var W=G(p,j-X);W&&(le=!le),_[p][j-X]=le,S-=1,S==-1&&(P+=1,S=7)}if(p+=s,p<0||m<=p){p-=s,s=-s;break}}},F=function(E,g){for(var s=0,p=0,S=0,P=new Array(g.length),G=new Array(g.length),j=0;j<g.length;j+=1){var X=g[j].dataCount,le=g[j].totalCount-X;p=Math.max(p,X),S=Math.max(S,le),P[j]=new Array(X);for(var W=0;W<P[j].length;W+=1)P[j][W]=255&E.getBuffer()[W+s];s+=X;var be=d.getErrorCorrectPolynomial(le),Y=f(P[j],be.getLength()-1),ce=Y.mod(be);G[j]=new Array(be.getLength()-1);for(var W=0;W<G[j].length;W+=1){var ae=W+ce.getLength()-G[j].length;G[j][W]=ae>=0?ce.getAt(ae):0}}for(var ne=0,W=0;W<g.length;W+=1)ne+=g[W].totalCount;for(var $=new Array(ne),Z=0,W=0;W<p;W+=1)for(var j=0;j<g.length;j+=1)W<P[j].length&&($[Z]=P[j][W],Z+=1);for(var W=0;W<S;W+=1)for(var j=0;j<g.length;j+=1)W<G[j].length&&($[Z]=G[j][W],Z+=1);return $},se=function(E,g,s){for(var p=l.getRSBlocks(E,g),S=v(),P=0;P<s.length;P+=1){var G=s[P];S.put(G.getMode(),4),S.put(G.getLength(),d.getLengthInBits(G.getMode(),E)),G.write(S)}for(var j=0,P=0;P<p.length;P+=1)j+=p[P].dataCount;if(S.getLengthInBits()>j*8)throw"code length overflow. ("+S.getLengthInBits()+">"+j*8+")";for(S.getLengthInBits()+4<=j*8&&S.put(0,4);S.getLengthInBits()%8!=0;)S.putBit(!1);for(;!(S.getLengthInBits()>=j*8||(S.put(n,8),S.getLengthInBits()>=j*8));)S.put(u,8);return F(S,p)};C.addData=function(E,g){g=g||"Byte";var s=null;switch(g){case"Numeric":s=I(E);break;case"Alphanumeric":s=k(E);break;case"Byte":s=K(E);break;case"Kanji":s=V(E);break;default:throw"mode:"+g}T.push(s),O=null},C.isDark=function(E,g){if(E<0||m<=E||g<0||m<=g)throw E+","+g;return _[E][g]},C.getModuleCount=function(){return m},C.make=function(){if(w<1){for(var E=1;E<40;E++){for(var g=l.getRSBlocks(E,b),s=v(),p=0;p<T.length;p++){var S=T[p];s.put(S.getMode(),4),s.put(S.getLength(),d.getLengthInBits(S.getMode(),E)),S.write(s)}for(var P=0,p=0;p<g.length;p++)P+=g[p].dataCount;if(s.getLengthInBits()<=P*8)break}w=E}D(!1,q())},C.createTableTag=function(E,g){E=E||2,g=typeof g>"u"?E*4:g;var s="";s+='<table style="',s+=" border-width: 0px; border-style: none;",s+=" border-collapse: collapse;",s+=" padding: 0px; margin: "+g+"px;",s+='">',s+="<tbody>";for(var p=0;p<C.getModuleCount();p+=1){s+="<tr>";for(var S=0;S<C.getModuleCount();S+=1)s+='<td style="',s+=" border-width: 0px; border-style: none;",s+=" border-collapse: collapse;",s+=" padding: 0px; margin: 0px;",s+=" width: "+E+"px;",s+=" height: "+E+"px;",s+=" background-color: ",s+=C.isDark(p,S)?"#000000":"#ffffff",s+=";",s+='"/>';s+="</tr>"}return s+="</tbody>",s+="</table>",s},C.createSvgTag=function(E,g,s,p){var S={};typeof arguments[0]=="object"&&(S=arguments[0],E=S.cellSize,g=S.margin,s=S.alt,p=S.title),E=E||2,g=typeof g>"u"?E*4:g,s=typeof s=="string"?{text:s}:s||{},s.text=s.text||null,s.id=s.text?s.id||"qrcode-description":null,p=typeof p=="string"?{text:p}:p||{},p.text=p.text||null,p.id=p.text?p.id||"qrcode-title":null;var P=C.getModuleCount()*E+g*2,G,j,X,le,W="",be;for(be="l"+E+",0 0,"+E+" -"+E+",0 0,-"+E+"z ",W+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',W+=S.scalable?"":' width="'+P+'px" height="'+P+'px"',W+=' viewBox="0 0 '+P+" "+P+'" ',W+=' preserveAspectRatio="xMinYMin meet"',W+=p.text||s.text?' role="img" aria-labelledby="'+te([p.id,s.id].join(" ").trim())+'"':"",W+=">",W+=p.text?'<title id="'+te(p.id)+'">'+te(p.text)+"</title>":"",W+=s.text?'<description id="'+te(s.id)+'">'+te(s.text)+"</description>":"",W+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',W+='<path d="',X=0;X<C.getModuleCount();X+=1)for(le=X*E+g,G=0;G<C.getModuleCount();G+=1)C.isDark(X,G)&&(j=G*E+g,W+="M"+j+","+le+be);return W+='" stroke="transparent" fill="black"/>',W+="</svg>",W},C.createDataURL=function(E,g){E=E||2,g=typeof g>"u"?E*4:g;var s=C.getModuleCount()*E+g*2,p=g,S=s-g;return R(s,s,function(P,G){if(p<=P&&P<S&&p<=G&&G<S){var j=Math.floor((P-p)/E),X=Math.floor((G-p)/E);return C.isDark(X,j)?0:1}else return 1})},C.createImgTag=function(E,g,s){E=E||2,g=typeof g>"u"?E*4:g;var p=C.getModuleCount()*E+g*2,S="";return S+="<img",S+=' src="',S+=C.createDataURL(E,g),S+='"',S+=' width="',S+=p,S+='"',S+=' height="',S+=p,S+='"',s&&(S+=' alt="',S+=te(s),S+='"'),S+="/>",S};var te=function(E){for(var g="",s=0;s<E.length;s+=1){var p=E.charAt(s);switch(p){case"<":g+="&lt;";break;case">":g+="&gt;";break;case"&":g+="&amp;";break;case'"':g+="&quot;";break;default:g+=p;break}}return g},x=function(E){var g=1;E=typeof E>"u"?g*2:E;var s=C.getModuleCount()*g+E*2,p=E,S=s-E,P,G,j,X,le,W={"\u2588\u2588":"\u2588","\u2588 ":"\u2580"," \u2588":"\u2584","  ":" "},be={"\u2588\u2588":"\u2580","\u2588 ":"\u2580"," \u2588":" ","  ":" "},Y="";for(P=0;P<s;P+=2){for(j=Math.floor((P-p)/g),X=Math.floor((P+1-p)/g),G=0;G<s;G+=1)le="\u2588",p<=G&&G<S&&p<=P&&P<S&&C.isDark(j,Math.floor((G-p)/g))&&(le=" "),p<=G&&G<S&&p<=P+1&&P+1<S&&C.isDark(X,Math.floor((G-p)/g))?le+=" ":le+="\u2588",Y+=E<1&&P+1>=S?be[le]:W[le];Y+=`
`}return s%2&&E>0?Y.substring(0,Y.length-s-1)+Array(s+1).join("\u2580"):Y.substring(0,Y.length-1)};return C.createASCII=function(E,g){if(E=E||1,E<2)return x(g);E-=1,g=typeof g>"u"?E*2:g;var s=C.getModuleCount()*E+g*2,p=g,S=s-g,P,G,j,X,le=Array(E+1).join("\u2588\u2588"),W=Array(E+1).join("  "),be="",Y="";for(P=0;P<s;P+=1){for(j=Math.floor((P-p)/E),Y="",G=0;G<s;G+=1)X=1,p<=G&&G<S&&p<=P&&P<S&&C.isDark(j,Math.floor((G-p)/E))&&(X=0),Y+=X?le:W;for(j=0;j<E;j+=1)be+=Y+`
`}return be.substring(0,be.length-1)},C.renderTo2dContext=function(E,g){g=g||2;for(var s=C.getModuleCount(),p=0;p<s;p++)for(var S=0;S<s;S++)E.fillStyle=C.isDark(p,S)?"black":"white",E.fillRect(p*g,S*g,g,g)},C};r.stringToBytesFuncs={default:function(A){for(var y=[],n=0;n<A.length;n+=1){var u=A.charCodeAt(n);y.push(u&255)}return y}},r.stringToBytes=r.stringToBytesFuncs.default,r.createStringToBytes=function(A,y){var n=function(){for(var w=pe(A),b=function(){var N=w.read();if(N==-1)throw"eof";return N},_=0,m={};;){var O=w.read();if(O==-1)break;var T=b(),C=b(),D=b(),L=String.fromCharCode(O<<8|T),q=C<<8|D;m[L]=q,_+=1}if(_!=y)throw _+" != "+y;return m}(),u="?".charCodeAt(0);return function(w){for(var b=[],_=0;_<w.length;_+=1){var m=w.charCodeAt(_);if(m<128)b.push(m);else{var O=n[w.charAt(_)];typeof O=="number"?(O&255)==O?b.push(O):(b.push(O>>>8),b.push(O&255)):b.push(u)}}return b}};var o={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3},a={L:1,M:0,Q:3,H:2},c={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},d=function(){var A=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],y=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,n=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,u=1<<14|1<<12|1<<10|1<<4|1<<1,w={},b=function(_){for(var m=0;_!=0;)m+=1,_>>>=1;return m};return w.getBCHTypeInfo=function(_){for(var m=_<<10;b(m)-b(y)>=0;)m^=y<<b(m)-b(y);return(_<<10|m)^u},w.getBCHTypeNumber=function(_){for(var m=_<<12;b(m)-b(n)>=0;)m^=n<<b(m)-b(n);return _<<12|m},w.getPatternPosition=function(_){return A[_-1]},w.getMaskFunction=function(_){switch(_){case c.PATTERN000:return function(m,O){return(m+O)%2==0};case c.PATTERN001:return function(m,O){return m%2==0};case c.PATTERN010:return function(m,O){return O%3==0};case c.PATTERN011:return function(m,O){return(m+O)%3==0};case c.PATTERN100:return function(m,O){return(Math.floor(m/2)+Math.floor(O/3))%2==0};case c.PATTERN101:return function(m,O){return m*O%2+m*O%3==0};case c.PATTERN110:return function(m,O){return(m*O%2+m*O%3)%2==0};case c.PATTERN111:return function(m,O){return(m*O%3+(m+O)%2)%2==0};default:throw"bad maskPattern:"+_}},w.getErrorCorrectPolynomial=function(_){for(var m=f([1],0),O=0;O<_;O+=1)m=m.multiply(f([1,h.gexp(O)],0));return m},w.getLengthInBits=function(_,m){if(1<=m&&m<10)switch(_){case o.MODE_NUMBER:return 10;case o.MODE_ALPHA_NUM:return 9;case o.MODE_8BIT_BYTE:return 8;case o.MODE_KANJI:return 8;default:throw"mode:"+_}else if(m<27)switch(_){case o.MODE_NUMBER:return 12;case o.MODE_ALPHA_NUM:return 11;case o.MODE_8BIT_BYTE:return 16;case o.MODE_KANJI:return 10;default:throw"mode:"+_}else if(m<41)switch(_){case o.MODE_NUMBER:return 14;case o.MODE_ALPHA_NUM:return 13;case o.MODE_8BIT_BYTE:return 16;case o.MODE_KANJI:return 12;default:throw"mode:"+_}else throw"type:"+m},w.getLostPoint=function(_){for(var m=_.getModuleCount(),O=0,T=0;T<m;T+=1)for(var C=0;C<m;C+=1){for(var D=0,L=_.isDark(T,C),q=-1;q<=1;q+=1)if(!(T+q<0||m<=T+q))for(var N=-1;N<=1;N+=1)C+N<0||m<=C+N||q==0&&N==0||L==_.isDark(T+q,C+N)&&(D+=1);D>5&&(O+=3+D-5)}for(var T=0;T<m-1;T+=1)for(var C=0;C<m-1;C+=1){var Q=0;_.isDark(T,C)&&(Q+=1),_.isDark(T+1,C)&&(Q+=1),_.isDark(T,C+1)&&(Q+=1),_.isDark(T+1,C+1)&&(Q+=1),(Q==0||Q==4)&&(O+=3)}for(var T=0;T<m;T+=1)for(var C=0;C<m-6;C+=1)_.isDark(T,C)&&!_.isDark(T,C+1)&&_.isDark(T,C+2)&&_.isDark(T,C+3)&&_.isDark(T,C+4)&&!_.isDark(T,C+5)&&_.isDark(T,C+6)&&(O+=40);for(var C=0;C<m;C+=1)for(var T=0;T<m-6;T+=1)_.isDark(T,C)&&!_.isDark(T+1,C)&&_.isDark(T+2,C)&&_.isDark(T+3,C)&&_.isDark(T+4,C)&&!_.isDark(T+5,C)&&_.isDark(T+6,C)&&(O+=40);for(var z=0,C=0;C<m;C+=1)for(var T=0;T<m;T+=1)_.isDark(T,C)&&(z+=1);var ee=Math.abs(100*z/m/m-50)/5;return O+=ee*10,O},w}(),h=function(){for(var A=new Array(256),y=new Array(256),n=0;n<8;n+=1)A[n]=1<<n;for(var n=8;n<256;n+=1)A[n]=A[n-4]^A[n-5]^A[n-6]^A[n-8];for(var n=0;n<255;n+=1)y[A[n]]=n;var u={};return u.glog=function(w){if(w<1)throw"glog("+w+")";return y[w]},u.gexp=function(w){for(;w<0;)w+=255;for(;w>=256;)w-=255;return A[w]},u}();function f(A,y){if(typeof A.length>"u")throw A.length+"/"+y;var n=function(){for(var w=0;w<A.length&&A[w]==0;)w+=1;for(var b=new Array(A.length-w+y),_=0;_<A.length-w;_+=1)b[_]=A[_+w];return b}(),u={};return u.getAt=function(w){return n[w]},u.getLength=function(){return n.length},u.multiply=function(w){for(var b=new Array(u.getLength()+w.getLength()-1),_=0;_<u.getLength();_+=1)for(var m=0;m<w.getLength();m+=1)b[_+m]^=h.gexp(h.glog(u.getAt(_))+h.glog(w.getAt(m)));return f(b,0)},u.mod=function(w){if(u.getLength()-w.getLength()<0)return u;for(var b=h.glog(u.getAt(0))-h.glog(w.getAt(0)),_=new Array(u.getLength()),m=0;m<u.getLength();m+=1)_[m]=u.getAt(m);for(var m=0;m<w.getLength();m+=1)_[m]^=h.gexp(h.glog(w.getAt(m))+b);return f(_,0).mod(w)},u}var l=function(){var A=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],y=function(w,b){var _={};return _.totalCount=w,_.dataCount=b,_},n={},u=function(w,b){switch(b){case a.L:return A[(w-1)*4+0];case a.M:return A[(w-1)*4+1];case a.Q:return A[(w-1)*4+2];case a.H:return A[(w-1)*4+3];default:return}};return n.getRSBlocks=function(w,b){var _=u(w,b);if(typeof _>"u")throw"bad rs block @ typeNumber:"+w+"/errorCorrectionLevel:"+b;for(var m=_.length/3,O=[],T=0;T<m;T+=1)for(var C=_[T*3+0],D=_[T*3+1],L=_[T*3+2],q=0;q<C;q+=1)O.push(y(D,L));return O},n}(),v=function(){var A=[],y=0,n={};return n.getBuffer=function(){return A},n.getAt=function(u){var w=Math.floor(u/8);return(A[w]>>>7-u%8&1)==1},n.put=function(u,w){for(var b=0;b<w;b+=1)n.putBit((u>>>w-b-1&1)==1)},n.getLengthInBits=function(){return y},n.putBit=function(u){var w=Math.floor(y/8);A.length<=w&&A.push(0),u&&(A[w]|=128>>>y%8),y+=1},n},I=function(A){var y=o.MODE_NUMBER,n=A,u={};u.getMode=function(){return y},u.getLength=function(_){return n.length},u.write=function(_){for(var m=n,O=0;O+2<m.length;)_.put(w(m.substring(O,O+3)),10),O+=3;O<m.length&&(m.length-O==1?_.put(w(m.substring(O,O+1)),4):m.length-O==2&&_.put(w(m.substring(O,O+2)),7))};var w=function(_){for(var m=0,O=0;O<_.length;O+=1)m=m*10+b(_.charAt(O));return m},b=function(_){if("0"<=_&&_<="9")return _.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+_};return u},k=function(A){var y=o.MODE_ALPHA_NUM,n=A,u={};u.getMode=function(){return y},u.getLength=function(b){return n.length},u.write=function(b){for(var _=n,m=0;m+1<_.length;)b.put(w(_.charAt(m))*45+w(_.charAt(m+1)),11),m+=2;m<_.length&&b.put(w(_.charAt(m)),6)};var w=function(b){if("0"<=b&&b<="9")return b.charCodeAt(0)-"0".charCodeAt(0);if("A"<=b&&b<="Z")return b.charCodeAt(0)-"A".charCodeAt(0)+10;switch(b){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+b}};return u},K=function(A){var y=o.MODE_8BIT_BYTE,n=r.stringToBytes(A),u={};return u.getMode=function(){return y},u.getLength=function(w){return n.length},u.write=function(w){for(var b=0;b<n.length;b+=1)w.put(n[b],8)},u},V=function(A){var y=o.MODE_KANJI,n=r.stringToBytesFuncs.SJIS;if(!n)throw"sjis not supported.";(function(b,_){var m=n(b);if(m.length!=2||(m[0]<<8|m[1])!=_)throw"sjis not supported."})("\u53CB",38726);var u=n(A),w={};return w.getMode=function(){return y},w.getLength=function(b){return~~(u.length/2)},w.write=function(b){for(var _=u,m=0;m+1<_.length;){var O=(255&_[m])<<8|255&_[m+1];if(33088<=O&&O<=40956)O-=33088;else if(57408<=O&&O<=60351)O-=49472;else throw"illegal char at "+(m+1)+"/"+O;O=(O>>>8&255)*192+(O&255),b.put(O,13),m+=2}if(m<_.length)throw"illegal char at "+(m+1)},w},J=function(){var A=[],y={};return y.writeByte=function(n){A.push(n&255)},y.writeShort=function(n){y.writeByte(n),y.writeByte(n>>>8)},y.writeBytes=function(n,u,w){u=u||0,w=w||n.length;for(var b=0;b<w;b+=1)y.writeByte(n[b+u])},y.writeString=function(n){for(var u=0;u<n.length;u+=1)y.writeByte(n.charCodeAt(u))},y.toByteArray=function(){return A},y.toString=function(){var n="";n+="[";for(var u=0;u<A.length;u+=1)u>0&&(n+=","),n+=A[u];return n+="]",n},y},oe=function(){var A=0,y=0,n=0,u="",w={},b=function(m){u+=String.fromCharCode(_(m&63))},_=function(m){if(!(m<0)){if(m<26)return 65+m;if(m<52)return 97+(m-26);if(m<62)return 48+(m-52);if(m==62)return 43;if(m==63)return 47}throw"n:"+m};return w.writeByte=function(m){for(A=A<<8|m&255,y+=8,n+=1;y>=6;)b(A>>>y-6),y-=6},w.flush=function(){if(y>0&&(b(A<<6-y),A=0,y=0),n%3!=0)for(var m=3-n%3,O=0;O<m;O+=1)u+="="},w.toString=function(){return u},w},pe=function(A){var y=A,n=0,u=0,w=0,b={};b.read=function(){for(;w<8;){if(n>=y.length){if(w==0)return-1;throw"unexpected end of file./"+w}var m=y.charAt(n);if(n+=1,m=="=")return w=0,-1;if(m.match(/^\s$/))continue;u=u<<6|_(m.charCodeAt(0)),w+=6}var O=u>>>w-8&255;return w-=8,O};var _=function(m){if(65<=m&&m<=90)return m-65;if(97<=m&&m<=122)return m-97+26;if(48<=m&&m<=57)return m-48+52;if(m==43)return 62;if(m==47)return 63;throw"c:"+m};return b},M=function(A,y){var n=A,u=y,w=new Array(A*y),b={};b.setPixel=function(T,C,D){w[C*n+T]=D},b.write=function(T){T.writeString("GIF87a"),T.writeShort(n),T.writeShort(u),T.writeByte(128),T.writeByte(0),T.writeByte(0),T.writeByte(0),T.writeByte(0),T.writeByte(0),T.writeByte(255),T.writeByte(255),T.writeByte(255),T.writeString(","),T.writeShort(0),T.writeShort(0),T.writeShort(n),T.writeShort(u),T.writeByte(0);var C=2,D=m(C);T.writeByte(C);for(var L=0;D.length-L>255;)T.writeByte(255),T.writeBytes(D,L,255),L+=255;T.writeByte(D.length-L),T.writeBytes(D,L,D.length-L),T.writeByte(0),T.writeString(";")};var _=function(T){var C=T,D=0,L=0,q={};return q.write=function(N,Q){if(N>>>Q!=0)throw"length over";for(;D+Q>=8;)C.writeByte(255&(N<<D|L)),Q-=8-D,N>>>=8-D,L=0,D=0;L=N<<D|L,D=D+Q},q.flush=function(){D>0&&C.writeByte(L)},q},m=function(T){for(var C=1<<T,D=(1<<T)+1,L=T+1,q=O(),N=0;N<C;N+=1)q.add(String.fromCharCode(N));q.add(String.fromCharCode(C)),q.add(String.fromCharCode(D));var Q=J(),z=_(Q);z.write(C,L);var ee=0,B=String.fromCharCode(w[ee]);for(ee+=1;ee<w.length;){var F=String.fromCharCode(w[ee]);ee+=1,q.contains(B+F)?B=B+F:(z.write(q.indexOf(B),L),q.size()<4095&&(q.size()==1<<L&&(L+=1),q.add(B+F)),B=F)}return z.write(q.indexOf(B),L),z.write(D,L),z.flush(),Q.toByteArray()},O=function(){var T={},C=0,D={};return D.add=function(L){if(D.contains(L))throw"dup key:"+L;T[L]=C,C+=1},D.size=function(){return C},D.indexOf=function(L){return T[L]},D.contains=function(L){return typeof T[L]<"u"},D};return b},R=function(A,y,n){for(var u=M(A,y),w=0;w<y;w+=1)for(var b=0;b<A;b+=1)u.setPixel(b,w,n(b,w));var _=J();u.write(_);for(var m=oe(),O=_.toByteArray(),T=0;T<O.length;T+=1)m.writeByte(O[T]);return m.flush(),"data:image/gif;base64,"+m};return r}();(function(){t.stringToBytesFuncs["UTF-8"]=function(r){function o(a){for(var c=[],d=0;d<a.length;d++){var h=a.charCodeAt(d);h<128?c.push(h):h<2048?c.push(192|h>>6,128|h&63):h<55296||h>=57344?c.push(224|h>>12,128|h>>6&63,128|h&63):(d++,h=65536+((h&1023)<<10|a.charCodeAt(d)&1023),c.push(240|h>>18,128|h>>12&63,128|h>>6&63,128|h&63))}return c}return o(r)}})(),function(r){i.exports=r()}(function(){return t})})(pr);const Dc=pr.exports,Kc=vs({__proto__:null,default:Dc},[pr.exports]),Gc=new it("QR"),jc=(i,e)=>{const o=Kc(0,"L");i.length>500&&Gc.warn("getQrData",'The size of the payload in the QR code is quite long and some devices might not be able to scan it anymore. To reduce the QR size, try using a shorter "name", "appUrl" and "iconUrl"');try{if(o.addData(i),o.make(),e==="svg")return o.createSvgTag();if(e==="ascii"){const a=o.getModuleCount(),c="\x1B[40m  \x1B[0m",d="\x1B[47m  \x1B[0m",h=new Array(a+3).join(d),f=new Array(a+3).join(c);let l="";l+=`${f}
`,l+=`${h}
`;for(let v=0;v<a;v++){l+=d;for(let I=0;I<a;I++)l+=o.isDark(v,I)?c:d;l+=`${d}
`}return l+=h,l+=f,l}else return o.createDataURL()}catch(a){throw console.error("error",a),a}},yn=(i,e)=>`${i}?type=tzip10&data=${e}`,qc=[{key:"spire_chrome",id:"gpfndedineagiepkpinficbcbbgjoenn",name:"Spire",shortName:"Spire",color:"",logo:"data:image/;base64,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",link:"https://spirewallet.com/"},{key:"temple_chrome",id:"ookjlbkiijinhpmnjffcofjonbfbgaoc",name:"Temple Wallet",shortName:"Temple",color:"",logo:"data:image/;base64,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",link:"https://templewallet.com/"}],Hc=[{key:"galleon_desktop",name:"Galleon",shortName:"Galleon",color:"",logo:"data:image/;base64,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",deepLink:"galleon://"},{key:"umami_desktop",name:"Umami",shortName:"Umami",color:"",logo:"data:image/;base64,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",deepLink:"umami://"}],Fc=[{key:"kukai_web",name:"Kukai Wallet",shortName:"Kukai",color:"",logo:"data:image/;base64,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",links:{mainnet:"https://wallet.kukai.app",ghostnet:"https://ghostnet.kukai.app",mondaynet:"https://dailynet.kukai.app",delphinet:"https://testnet.kukai.app",edonet:"https://edonet.kukai.app",florencenet:"https://florencenet.kukai.app",granadanet:"https://granadanet.kukai.app",hangzhounet:"https://hangzhounet.kukai.app",ithacanet:"https://ithacanet.kukai.app",jakartanet:"https://jakartanet.kukai.app",kathmandunet:"https://kathmandunet.kukai.app"}}],Qc=[{key:"airgap_ios",name:"AirGap Wallet",shortName:"AirGap",color:"rgb(4, 235, 204)",logo:"data:image/;base64,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",universalLink:"https://wallet.airgap.it",deepLink:"airgap-wallet://"},{key:"naan_ios",name:"Naan Wallet",shortName:"Naan",color:"rgb(129, 100, 100)",logo:"data:image/;base64,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",universalLink:"https://naanwallet.com",deepLink:"naan://"},{key:"autonomy-app",name:"Autonomy: Digital Art Wallet",shortName:"Autonomy",color:"",logo:"data:image/;base64,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",universalLink:"https://autonomy.io/apps/tezos",deepLink:"autonomy-tezos://"},{key:"temple_ios",name:"Temple Wallet",shortName:"Temple",color:"",logo:"data:image/png;base64,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",universalLink:"https://templewallet.com",deepLink:"temple://"}];var ht=globalThis&&globalThis.__awaiter||function(i,e,t,r){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(l){try{f(r.next(l))}catch(v){c(v)}}function h(l){try{f(r.throw(l))}catch(v){c(v)}}function f(l){l.done?a(l.value):o(l.value).then(d,h)}f((r=r.apply(i,e||[])).next())})};let Yo=Hc,Jo=qc,Zo=Fc,zo=Qc;const Jn=()=>Yo,Vc=i=>{Yo=i},wn=()=>Jo,Wc=i=>{Jo=i},Xi=()=>Zo,Xc=i=>{Zo=i},_n=()=>zo,Yc=i=>{zo=i},$t=new Vt,Li=["ookjlbkiijinhpmnjffcofjonbfbgaoc","gpfndedineagiepkpinficbcbbgjoenn"];var Pt;(function(i){i[i.DESKTOP=0]="DESKTOP",i[i.IOS=1]="IOS",i[i.ANDROID=2]="ANDROID"})(Pt||(Pt={}));var ze;(function(i){i.IOS="ios",i.ANDROID="android",i.EXTENSION="extension",i.DESKTOP="desktop",i.WEB="web"})(ze||(ze={}));class Rt{static getPlatfrom(){return ht(this,void 0,void 0,function*(){return Xo(window)?Pt.ANDROID:Wo(window)?Pt.IOS:Pt.DESKTOP})}static getPairingInfo(e,t,r,o){return ht(this,void 0,void 0,function*(){const a=o!=null?o:yield Rt.getPlatfrom(),c=e.p2pSyncCode,d=e.postmessageSyncCode,h=e.preferredNetwork;switch(a){case Pt.DESKTOP:return Rt.getDesktopPairingAlert(c,t,d,r,h);case Pt.IOS:return Rt.getIOSPairingAlert(c,t,h);case Pt.ANDROID:return Rt.getAndroidPairingAlert(c,t,h);default:throw new Error("platform unknown")}})}static getDesktopPairingAlert(e,t,r,o,a){return ht(this,void 0,void 0,function*(){const c=yield xn.getAvailableExtensions();c.forEach(h=>{const f=Li.indexOf(h.id);f>=0&&Li.splice(f,1)});const d=[];return wn().length>0&&d.push({title:"Browser Extensions",type:ze.EXTENSION,wallets:[...c.map(h=>{var f,l,v,I,k;const K=wn().find(V=>V.id===h.id);return{key:(f=K==null?void 0:K.key)!==null&&f!==void 0?f:h.id,name:(l=h.name)!==null&&l!==void 0?l:K==null?void 0:K.name,logo:(v=h.iconUrl)!==null&&v!==void 0?v:K==null?void 0:K.logo,shortName:(I=h.shortName)!==null&&I!==void 0?I:K==null?void 0:K.shortName,color:(k=h.color)!==null&&k!==void 0?k:K==null?void 0:K.color,enabled:!0,clicked:!1,clickHandler(){return ht(this,void 0,void 0,function*(){if(!this.clicked){if(this.clicked=!0,r){const V=yield $t.serialize(yield r()),J={target:xt.EXTENSION,payload:V,targetId:h.id};Re.postMessage(J,Re.location.origin)}t(ze.EXTENSION,this)}})}}}),...wn().filter(h=>Li.some(f=>f===h.id)).map(h=>({key:h.key,name:h.name,shortName:h.shortName,color:h.color,logo:h.logo,enabled:!1,clickHandler:()=>{window.open(h.link,"_blank")}}))].sort((h,f)=>h.key.localeCompare(f.key))}),Jn().length>0&&d.push({title:"Desktop & Web Wallets",type:ze.DESKTOP,wallets:[...Jn().map(h=>({key:h.key,name:h.name,shortName:h.shortName,color:h.color,logo:h.logo,enabled:!0,clicked:!1,clickHandler(){return ht(this,void 0,void 0,function*(){if(this.clicked)return;this.clicked=!0;const f=yield $t.serialize(yield e()),l=yn(h.deepLink,f);window.open(l,"_blank"),t(ze.DESKTOP,this,!0)})}})),...yield Rt.getWebList(e,t,a)].sort((h,f)=>h.key.localeCompare(f.key))}),_n().length>0&&d.push({title:"Mobile Wallets",type:ze.IOS,wallets:[..._n().map(h=>({key:h.key,name:h.name,shortName:h.shortName,color:h.color,logo:h.logo,enabled:!0,clicked:!1,clickHandler(){return ht(this,void 0,void 0,function*(){if(this.clicked)return;this.clicked=!0;const f=yield $t.serialize(yield e());o(f),t(ze.IOS,this,!0)})}}))].sort((h,f)=>h.key.localeCompare(f.key))}),{walletLists:d,buttons:[]}})}static getIOSPairingAlert(e,t,r){return ht(this,void 0,void 0,function*(){return{walletLists:[{title:"Mobile Wallets",type:ze.IOS,wallets:_n().map(o=>({key:o.key,name:o.name,shortName:o.shortName,color:o.color,logo:o.logo,enabled:!0,clicked:!1,clickHandler(){var a;return ht(this,void 0,void 0,function*(){if(this.clicked)return;this.clicked=!0;const c=yield $t.serialize(yield e()),d=yn((a=o.deepLink)!==null&&a!==void 0?a:o.universalLink,c),h=document.createElement("a");h.setAttribute("href",d),h.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0})),t(ze.IOS,this,!0)})}})).sort((o,a)=>o.key.localeCompare(a.key))},{title:"Web Wallets",type:ze.WEB,wallets:[...yield Rt.getWebList(e,t,r)].sort((o,a)=>o.key.localeCompare(a.key))}],buttons:[]}})}static getAndroidPairingAlert(e,t,r){return ht(this,void 0,void 0,function*(){return{walletLists:[{title:"Web Wallets",type:ze.WEB,wallets:[...yield Rt.getWebList(e,t,r)].sort((o,a)=>o.key.localeCompare(a.key))}],buttons:[{title:"Mobile Wallets",text:"Connect Wallet",clickHandler:()=>ht(this,void 0,void 0,function*(){const o=yield $t.serialize(yield e()),a=yn("tezos://",o);window.open(a,"_blank"),t(ze.ANDROID)})}]}})}static getWebList(e,t,r){return ht(this,void 0,void 0,function*(){return Xi().map(o=>({key:o.key,name:o.name,shortName:o.shortName,color:o.color,logo:o.logo,enabled:!0,clicked:!1,clickHandler(){if(this.clicked)return;this.clicked=!0;const a=window.open("","_blank");e().then(c=>$t.serialize(c)).then(c=>{var d;const h=yn((d=o.links[r])!==null&&d!==void 0?d:o.links[Oe.MAINNET],c);a?a.location.href=h:window.open(h,"_blank"),t(ze.WEB,this,!0)}).catch(c=>{console.error(c)})}})).sort((o,a)=>o.key.localeCompare(a.key))})}}const H=(i,e,t,r)=>{const o=document.createElement(i);return e.length>0&&o.classList.add(...e.filter(a=>!!a).map(a=>Ft(a))),t.forEach(a=>{o.setAttribute(Ft(a[0]),Ft(a[1]))}),typeof r=="object"&&Array.isArray(r)?r.filter(a=>!!a).forEach(a=>{o.appendChild(a)}):typeof r=="string"&&(o.innerText=r),o},Ht=(i,e,t)=>{const r=document.createElementNS("http://www.w3.org/2000/svg","svg");return i.length>0&&r.classList.add(...i.filter(o=>!!o)),e.forEach(o=>{r.setAttribute(Ft(o[0]),Ft(o[1]))}),typeof t=="object"&&Array.isArray(t)&&t.filter(o=>!!o).forEach(o=>{r.appendChild(o)}),r},dt=i=>{const e=document.createElementNS("http://www.w3.org/2000/svg","path");return i.forEach(t=>{e.setAttribute(Ft(t[0]),Ft(t[1]))}),e},Jc=i=>{const e=document.createElementNS("http://www.w3.org/2000/svg","g");return i.filter(t=>!!t).forEach(t=>{e.appendChild(t)}),e},Zc=()=>Ht(["svg-inline--fa","fa-external-link-alt","fa-w-16"],[["aria-hidden","true"],["focusable","false"],["data-prefix","fas"],["data-icon","external-link-alt"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 512 512"]],[dt([["fill","currentColor"],["d","M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z"]])]),Ft=i=>{const e=document.createElement("div");return e.innerText=i,e.innerHTML},io=i=>{i.innerHTML=""};var vt=globalThis&&globalThis.__awaiter||function(i,e,t,r){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(l){try{f(r.next(l))}catch(v){c(v)}}function h(l){try{f(r.throw(l))}catch(v){c(v)}}function f(l){l.done?a(l.value):o(l.value).then(d,h)}f((r=r.apply(i,e||[])).next())})};const ro=new it("Alert"),oo=new Vt,zc=(i,e,t)=>vt(void 0,void 0,void 0,function*(){const r=()=>vt(void 0,void 0,void 0,function*(){return Rt.getPairingInfo(t,(u,w,b)=>vt(void 0,void 0,void 0,function*(){b||(yield ci())}),()=>vt(void 0,void 0,void 0,function*(){n()}))}),o=yield r(),a=e.getElementById("pairing-container");if(!a)throw new Error("container not found");const c=document.createElement("span");a.appendChild(c),o.buttons.forEach(u=>vt(void 0,void 0,void 0,function*(){const w=yield Nt(),b=H("div",["beacon-list__title"],[],u.title),_=H("button",["beacon-modal__button","connect__btn"],[],u.text),m=document.createElement("a");m.id=`button_${w}`,m.appendChild(b),m.appendChild(_),c.appendChild(m);const O=e.getElementById(m.id);O&&O.addEventListener("click",()=>vt(void 0,void 0,void 0,function*(){u.clickHandler()}))}));const d=(u,w,b)=>{const _=`Open in ${b.name}`,m=b.key,O=b.logo?H("div",[],[],[H("img",["beacon-selection__img"],[["src",b.logo]],"")]):Ht(["beacon-selection__img","svg-inline--fa","fa-wallet","fa-w-16"],[["aria-hidden","true"],["focusable","false"],["data-prefix","fas"],["data-icon","wallet"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 512 512"],["style","enable-background:new 0 0 512 512;"],["xml:space","preserve"]],[dt([["d","M376.2,181H152.9c-5.2,0-9.4-4.2-9.4-9.4s4.2-9.4,9.4-9.4h225c5.2,0,9.4-4.2,9.4-9.4c0-15.5-12.6-28.1-28.1-28.1H143.5c-20.7,0-37.5,16.8-37.5,37.5v187.5c0,20.7,16.8,37.5,37.5,37.5h232.7c16.4,0,29.8-12.6,29.8-28.1v-150C406,193.6,392.7,181,376.2,181z M349.8,302.9c-10.4,0-18.8-8.4-18.8-18.8s8.4-18.8,18.8-18.8s18.8,8.4,18.8,18.8S360.1,302.9,349.8,302.9z"]])]),T=H("div",["beacon-selection__name"],[],[H("span",[],[],b.name),b.enabled?void 0:H("p",[],[],"Not installed")]),C=H("a",["beacon-selection__list",b.enabled?"":"disabled"],[["tabindex","0"],["id",`wallet_${m}`],["alt",_],["target","_blank"]],[T,O]),D=document.createElement("span");D.appendChild(C),u.appendChild(D);const L=e.getElementById(`wallet_${m}`),q=N=>vt(void 0,void 0,void 0,function*(){if(N&&N.key!=="Enter")return;b.clickHandler();const Q=e.getElementById("beacon-modal__content");Q&&w!==ze.EXTENSION&&w!==ze.IOS&&(io(Q),Q.appendChild(H("p",["beacon-alert__title"],[],"Establishing Connection..")),Q.appendChild(H("div",["progress-line"],[["id","beacon-toast-loader"]],"")),Q.appendChild(H("div",["beacon--selected__container"],[],[...b.logo?[H("img",["beacon-selection__img"],[["src",b.logo]],""),H("img",["beacon--selection__name__lg"],[],b.name)]:[]])))});L&&(L.addEventListener("click",()=>q()),L.addEventListener("keydown",q))},h=document.createElement("span");a.appendChild(h);const f=u=>{io(h),u.forEach(w=>{const b=document.createElement("div");b.classList.add("beacon-list__wrapper"),h.appendChild(b),b.appendChild(H("div",["beacon-list__title"],[],w.title));const _=document.createElement("span");b.appendChild(_),w.wallets.forEach(m=>vt(void 0,void 0,void 0,function*(){d(_,w.type,m)}))})};f(o.walletLists);const l=u=>vt(void 0,void 0,void 0,function*(){if(u.data==="extensionsUpdated"){const w=yield r();f(w.walletLists)}});let v;v=u=>{u.data===`closeAlert-${i}`&&(Re.removeEventListener("message",l),Re.removeEventListener("message",v))},Re.addEventListener("message",l),Re.addEventListener("message",v);const I=e.getElementById("beacon--qr__container"),k=e.getElementById("beacon--qr__copy"),K=e.getElementById("beacon-title"),V=Xo(window)?"android":Wo(window)?"ios":"desktop",J=e.getElementById("beacon-main-text"),oe=e.getElementById("pairing-container"),pe=e.getElementById("beacon--switch__container"),M=()=>vt(void 0,void 0,void 0,function*(){const u=t?yield oo.serialize(yield t.p2pSyncCode()):"";navigator.clipboard.writeText(u).then(()=>{k&&(k.innerText="Copied"),ro.log("Copying to clipboard was successful!")},w=>{ro.error("Could not copy text to clipboard: ",w)})});let R=!1;const A=u=>vt(void 0,void 0,void 0,function*(){const w=e.getElementById("beacon-switch");if(w&&(w.innerText=u==="none"?"Pair wallet on same device":"Pair wallet on another device"),J&&oe&&pe&&k&&I&&K)switch(J.style.display="none",K.style.textAlign="center",oe.style.display="none",pe.style.display="initial",u){case"ios":oe.style.display="initial";break;case"android":oe.style.display="initial";break;case"desktop":oe.style.display="initial",K.style.textAlign="left",J.style.display="none",pe.style.display="initial";break;default:if(!R){R=!0;const b=yield oo.serialize(yield t.p2pSyncCode()),_=yn("tezos://",b),O=jc(_,"svg").replace("<svg",'<svg class="beacon-alert__image"');I.insertAdjacentHTML("afterbegin",O),k&&k.addEventListener("click",M),I&&I.addEventListener("click",M)}J.style.display="initial"}});let y=!1;const n=()=>{A(y?"none":V),y=!y};n();{const u=e.getElementById("beacon-switch");u&&u.addEventListener("click",n)}});let $o=Rn.LIGHT;const so=i=>{$o=i},gr=()=>$o,$c=i=>H("div",["beacon-toast__base","animated","fadeIn"],[["id","beacon-toast"]],[H("div",["beacon-toast__content"],[],[H("span",[],[["id","beacon-text"]],[H("p",[],[["id","beacon-text-content"]],i),H("a",["beacon-toast__wallet__link"],[["id","beacon-open-wallet"]],[H("span",[],[],"Open"),Ht(["svg-inline--fa","fa-external-link-alt","fa-w-16"],[["aria-hidden","true"],["focusable","false"],["data-prefix","fas"],["data-icon","external-link-alt"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 512 512"]],[dt([["fill","currentColor"],["d","M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z"]])])])]),Ht(["beacon-toast__more","svg-inline--fa","fa-angle-down","fa-w-10"],[["id","beacon-toast-button-expand"],["aria-hidden","true"],["focusable","false"],["data-prefix","fas"],["data-icon","angle-down"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 320 512"]],[dt([["fill","currentColor"],["d","M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z"]])]),Ht(["beacon-toast__more","svg-inline--fa","fa-times","fa-w-10"],[["id","beacon-toast-button-close"],["aria-hidden","true"],["focusable","false"],["data-prefix","fal"],["data-icon","times"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 320 512"]],[dt([["fill","currentColor"],["d","M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z"]])])]),H("div",["progress-line"],[["id","beacon-toast-loader"]],""),H("hr",["hide"],[["id","beacon-toast-loader-placeholder"]],""),H("div",["beacon-toast__more--action"],[["id","beacon-toast-list"]],"")]),el=()=>H("a",[],[["href","https://walletbeacon.io"],["target","_blank"]],[document.createTextNode("powered by"),Ht([],[["id","f63e95a9-fd19-4487-bc1a-09eb2f066704"],["data-name","Guides"],["xmlns","http://www.w3.org/2000/svg"],["width","65"],["height","65"],["viewBox","0 0 65 65"]],[H("title",[],[],"beacon_logo"),dt([["fill","currentColor"],["d","M59.66,29.52v1.06c0,.37-.18,9.07-4.11,15.88S44.16,57.75,43.84,57.93l-.91.54-1.61-.93-9.19-5.3a14.68,14.68,0,0,1-1.63-1.06h0a14.09,14.09,0,0,1-1.29-1,17.63,17.63,0,0,1-2.56-2.7,18.58,18.58,0,0,1-2.56-4.51,21.53,21.53,0,0,1-1.5-9,6.21,6.21,0,0,1,2.93-.73c.25,0,.49,0,.74,0a18.29,18.29,0,0,0,1,7.93,15.06,15.06,0,0,0,6.67,8l8.93,5.16c.2-.13.43-.3.68-.48,2.26-1.6,6.42-4.92,8.86-9.13C55.12,39.94,55.8,34,56,31.57l-3.79-2.19a23,23,0,0,0,.6-3.83Z"]]),dt([["fill","currentColor"],["d","M49.22,11.43V23.89c0,.65,0,1.3-.1,1.94v0c-.06.55-.13,1.1-.24,1.63A18,18,0,0,1,47.82,31a19.11,19.11,0,0,1-2.62,4.49,21.37,21.37,0,0,1-7.07,5.8,6.08,6.08,0,0,1-2.42-2.84A18.1,18.1,0,0,0,42,33.7h0a15.12,15.12,0,0,0,3.58-9.81V13.6c-.21-.11-.47-.21-.74-.35-2.52-1.16-7.47-3.1-12.36-3.1-5.42,0-11,2.4-13.08,3.45V18a22.54,22.54,0,0,0-3.63,1.38V11.43l.92-.52c.33-.18,8-4.38,15.79-4.38s15.48,4.2,15.8,4.38Z"]]),dt([["fill","currentColor"],["d","M18,26.4,9,31.55q0,.35.06.78a31.63,31.63,0,0,0,3.49,12.28c2.71,4.71,7.55,8.3,9.53,9.64l3.79-2.19a23.33,23.33,0,0,0,3,2.44l-6.88,4-.92-.54c-.31-.18-7.75-4.69-11.68-11.5S5.36,30.92,5.35,30.56V29.49L7,28.55l9.17-5.29c.57-.32,1.14-.61,1.72-.87a13.46,13.46,0,0,1,1.55-.61A17.52,17.52,0,0,1,23,20.91a19.2,19.2,0,0,1,5.19,0,21.49,21.49,0,0,1,8.55,3.24,6.29,6.29,0,0,1-1.25,3.51,17.9,17.9,0,0,0-7.3-3.06A15.14,15.14,0,0,0,18,26.4Z"]])]),document.createTextNode("Beacon")]),es=(i,e,t,r)=>H("div",["beacon-alert__base","animated","fadeIn"],[["id",`beacon-alert-modal-${i}`]],[H("div",["beacon-modal__wrapper"],[],[H("div",["beacon-modal__header"],[],[Ht([],[["xmlns","http://www.w3.org/2000/svg"],["id","Guides"],["x","0"],["y","0"],["version","1.1"],["viewBox","0 0 179.2 43"],["xml:space","preserve"],["width","140"],["height","40"]],[H("style",[],[],`.st0 {
                    fill: #3880ff;
                  }
                  .st1 {
                    fill: #fff;
                  }`),dt([["d","M45 19v.9c0 .3-.2 7.5-3.4 13.2-3.3 5.6-9.4 9.3-9.7 9.5l-.8.4-1.3-.8-7.6-4.4c-.5-.3-.9-.6-1.4-.9-.4-.3-.7-.5-1.1-.8-.8-.7-1.5-1.4-2.1-2.2-.9-1.1-1.6-2.4-2.1-3.7-.9-2.3-1.3-4.8-1.2-7.5.8-.4 1.6-.6 2.4-.6h.6c-.2 2.4.1 4.6.8 6.6 1 2.8 2.9 5.1 5.5 6.6l7.4 4.3c.2-.1.4-.2.6-.4 1.9-1.3 5.3-4.1 7.3-7.6 2.2-3.9 2.8-8.9 3-10.8L38.8 19c.3-1 .4-2.1.5-3.2L45 19z"],["class","st0"]]),dt([["d","M36.3 4.1v10.3c0 .5 0 1.1-.1 1.6s-.1.9-.2 1.3c-.2 1-.5 2-.9 3-.5 1.3-1.3 2.6-2.2 3.7-1.5 1.9-3.5 3.6-5.9 4.8-.9-.6-1.6-1.3-2-2.4 2.1-1 3.9-2.3 5.2-4 1.9-2.3 3-5.1 3-8.1V5.9l-.6-.3c-2-1-6.1-2.6-10.1-2.6-4.5 0-9.1 2-10.9 2.9v3.6c-1 .3-2 .7-3 1.1V4.1l.8-.4C9.7 3.5 16 0 22.5 0s12.8 3.5 13.1 3.6l.7.5z"],["class","st0"]]),dt([["d","M10.5 16.5l-7.4 4.3v.7c.2 2.1.9 6.5 2.9 10 2.2 3.9 6.2 6.9 7.9 8l3.1-1.8c.8.7 1.6 1.4 2.5 2L13.8 43l-.8-.5c-.3-.2-6.4-3.9-9.7-9.5C.1 27.4 0 20.2 0 19.9V19l1.3-.8L9 13.9c.5-.3.9-.5 1.4-.7.4-.2.8-.4 1.3-.5 1-.4 2-.6 3-.7 1.4-.2 2.9-.2 4.3 0 2.4.3 4.8 1.2 7.1 2.7 0 1-.4 2-1 2.9-1.9-1.3-4-2.2-6-2.5-3.1-.6-6-.1-8.6 1.4z"],["class","st0"]]),Jc([dt([["d","M73.9 23c.9 1 1.3 2.3 1.3 3.7 0 1.9-.6 3.4-1.9 4.5-1.3 1.1-3.1 1.7-5.5 1.7h-8.6v-23h8.4c2.3 0 4.1.5 5.3 1.5 1.2 1 1.8 2.4 1.8 4.2 0 1.5-.4 2.7-1.2 3.6-.8.9-1.8 1.5-3.1 1.8 1.5.3 2.6 1 3.5 2zm-11.7-3h5c1.5 0 2.6-.3 3.4-1 .8-.7 1.2-1.6 1.2-2.8 0-1.2-.4-2.1-1.1-2.8-.8-.7-1.9-1-3.5-1h-4.8V20zm8.7 9.4c.9-.7 1.3-1.7 1.3-3s-.4-2.3-1.3-3c-.9-.7-2.1-1.1-3.7-1.1h-5v8.2h5c1.6-.1 2.8-.4 3.7-1.1zM95.3 24.6H81c.1 2.1.6 3.6 1.7 4.6s2.4 1.5 4 1.5c1.4 0 2.6-.4 3.6-1.1 1-.7 1.6-1.7 1.8-2.9h3.2c-.2 1.2-.7 2.4-1.5 3.3-.8 1-1.7 1.7-2.9 2.3-1.2.5-2.6.8-4.1.8-1.7 0-3.2-.4-4.6-1.1-1.3-.7-2.4-1.8-3.1-3.2-.8-1.4-1.1-3-1.1-4.9 0-1.9.4-3.5 1.1-4.9.8-1.4 1.8-2.5 3.1-3.2 1.3-.7 2.9-1.1 4.6-1.1 1.7 0 3.3.4 4.6 1.1 1.3.7 2.3 1.7 3 3 .7 1.2 1 2.6 1 4.1.1.7 0 1.2-.1 1.7zm-3.5-4.8c-.5-.9-1.2-1.6-2.1-2-.9-.4-1.8-.7-2.8-.7-1.6 0-3 .5-4.1 1.5-1.1 1-1.7 2.5-1.8 4.5h11.5c0-1.3-.2-2.4-.7-3.3zM111.2 16c1.2.9 2.1 2 2.5 3.5V15h3v18h-3v-4.6c-.5 1.5-1.3 2.6-2.5 3.5-1.2.9-2.7 1.3-4.4 1.3-1.6 0-3-.4-4.3-1.1-1.2-.7-2.2-1.8-2.9-3.2-.7-1.4-1.1-3-1.1-4.9 0-1.9.4-3.5 1.1-4.9.7-1.4 1.7-2.5 2.9-3.2 1.2-.7 2.7-1.1 4.3-1.1 1.7-.1 3.1.4 4.4 1.2zm-8 3.1c-1.1 1.2-1.7 2.8-1.7 4.8 0 2.1.5 3.7 1.7 4.8 1.1 1.2 2.6 1.8 4.4 1.8 1.2 0 2.2-.3 3.2-.8.9-.5 1.7-1.3 2.2-2.3.5-1 .8-2.1.8-3.5 0-1.3-.3-2.5-.8-3.5s-1.2-1.8-2.2-2.3c-.9-.5-2-.8-3.2-.8-1.9.1-3.3.7-4.4 1.8zM135 16.6c1.5 1.2 2.4 2.9 2.8 4.9h-3.1c-.2-1.3-.8-2.3-1.8-3-1-.7-2.2-1.1-3.6-1.1-1 0-2 .2-2.9.7-.9.5-1.6 1.2-2.1 2.2-.5 1-.8 2.2-.8 3.7s.3 2.7.8 3.7 1.2 1.7 2.1 2.2c.9.5 1.8.7 2.9.7 1.4 0 2.6-.4 3.6-1.1 1-.7 1.6-1.8 1.8-3h3.1c-.3 2.1-1.3 3.7-2.8 4.9-1.5 1.2-3.4 1.8-5.7 1.8-1.7 0-3.2-.4-4.6-1.1-1.3-.7-2.4-1.8-3.1-3.2-.8-1.4-1.1-3-1.1-4.9 0-1.9.4-3.5 1.1-4.9.8-1.4 1.8-2.5 3.1-3.2 1.3-.7 2.9-1.1 4.6-1.1 2.3-.1 4.2.6 5.7 1.8zM154.5 15.9c1.4.7 2.4 1.8 3.2 3.2.8 1.4 1.2 3 1.2 4.9 0 1.9-.4 3.5-1.2 4.9-.8 1.4-1.8 2.4-3.2 3.2-1.4.7-2.9 1.1-4.6 1.1-1.7 0-3.3-.4-4.6-1.1-1.4-.7-2.4-1.8-3.2-3.2-.8-1.4-1.2-3-1.2-4.9 0-1.9.4-3.5 1.2-4.9.8-1.4 1.9-2.5 3.2-3.2 1.4-.7 2.9-1.1 4.6-1.1 1.7-.1 3.2.3 4.6 1.1zm-7.6 2.2c-.9.5-1.6 1.2-2.2 2.2-.6 1-.8 2.2-.8 3.7 0 1.4.3 2.7.8 3.6.6 1 1.3 1.7 2.2 2.2.9.5 1.9.7 3 .7s2.1-.2 3-.7c.9-.5 1.6-1.2 2.2-2.2.6-1 .8-2.2.8-3.6 0-1.5-.3-2.7-.8-3.7-.6-1-1.3-1.7-2.2-2.2-.9-.5-1.9-.7-3-.7s-2.1.2-3 .7zM177.3 16.7c1.3 1.3 1.9 3.3 1.9 5.8v10.4h-3V22.8c0-1.8-.5-3.2-1.4-4.1-.9-1-2.2-1.4-3.7-1.4-1.6 0-2.9.5-3.9 1.6s-1.5 2.6-1.5 4.6V33h-3V15h3v4.3c.5-1.5 1.3-2.6 2.4-3.4 1.2-.8 2.5-1.2 4-1.2 2.2 0 3.9.6 5.2 2z"],["class","st1"]])])]),H("div",["beacon-modal__close__wrapper"],[["id",`beacon-alert-${i}-close`]],[H("div",["beacon-modal__close__icon"],[],[H("div",["beacon-modal__close__line1"],[],[]),H("div",["beacon-modal__close__line2"],[],[])])])]),H("div",["beacon-modal__base"],[],[H("div",[],[["id","beacon-modal__content"]],[H("div",[],[],[H("p",["beacon-alert__title"],[],e),...r,H("div",["beacon-action__container"],[],t)])])])])]),tl=(i,e,t,r)=>es(i,e,t,[H("div",["beacon-alert__text"],[["id","beacon-main-text"]],r)]),nl=(i,e,t,r)=>es(i,e,t,[H("span",[],[["id","pairing-container"]],""),H("div",["beacon-alert__text"],[["id","beacon-main-text"]],[H("p",["beacon-list__title"],[["id","beacon-title"]],[document.createTextNode("Scan QR code with a Beacon-compatible wallet.\xA0"),H("a",[],[["href","https://docs.walletbeacon.io/supported-wallets"],["target","_blank"]],"Learn more"),...r])]),H("div",[],[["id","beacon--switch__container"]],[H("button",["beacon-modal__button--outline"],[["id","beacon-switch"]],"")]),H("div",[],[["id","beacon--disclaimer"]],"")]);var St=globalThis&&globalThis.__awaiter||function(i,e,t,r){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(l){try{f(r.next(l))}catch(v){c(v)}}function h(l){try{f(r.throw(l))}catch(v){c(v)}}function f(l){l.done?a(l.value):o(l.value).then(d,h)}f((r=r.apply(i,e||[])).next())})};let Yi,Mt;typeof window<"u"&&typeof window.document<"u"&&(Mt=window.document);const Ji={},il=i=>typeof i=="string"?H("div",[],[["id","beacon--qr__container"]],[H("div",[],[["id","beacon--qr__copy__container"]],[H("button",["beacon-modal__button--outline"],[["id","beacon--qr__copy"]],"Copy")])]):H("span",[],[],""),rl=(i,e,t,r,o)=>{const a=t,c=r.map((l,v)=>H("button",[`beacon-modal__button${l.style==="outline"?"--outline":""}`],[["id",`beacon-alert-${i}-${v}`]],l.text));let d=no.default.css;o&&(d+=no.pair.css);const h=H("span",[],[],a),f=o?nl(i,[h],c,[e]):tl(i,[h],c,[e]);return{style:d,html:f}},Hn=i=>(Re.postMessage(`closeAlert-${i}`),new Promise(e=>{var t;const r=Mt.getElementById(`beacon-alert-wrapper-${i}`);if(!r)return e();const o=(t=r.shadowRoot)===null||t===void 0?void 0:t.getElementById(`beacon-alert-modal-${i}`);if(o){const c=Ji[i];c&&(clearTimeout(c),Ji[i]=void 0),o.className=o.className.replace("fadeIn","fadeOut"),window.setTimeout(()=>{const d=r.parentNode;d&&d.removeChild(r),Yi&&Yi.focus(),e()},300)}else e()})),ci=()=>St(void 0,void 0,void 0,function*(){return new Promise(i=>St(void 0,void 0,void 0,function*(){const e=Mt.querySelectorAll('[id^="beacon-alert-wrapper-"]');if(e.length>0){const t=[];e.forEach(r=>St(void 0,void 0,void 0,function*(){t.push(r.id.split("-")[3])})),yield Promise.all(t.map(Hn)),i()}else i()}))}),fn=i=>St(void 0,void 0,void 0,function*(){var e,t;const r=i.body,o=i.data,a=i.title,c=i.timer,d=i.pairingPayload,h=i.disclaimerText,f=i.closeButtonCallback;yield ci();const l=(yield Nt()).split("-").join(""),v=Mt.createElement("div");v.setAttribute("id",`beacon-alert-wrapper-${l}`);const I=v.attachShadow({mode:"open"}),k=Mt.createElement("div");k.setAttribute("tabindex","0"),I.appendChild(k);const K=[...(t=(e=i.buttons)===null||e===void 0?void 0:e.map(u=>{var w,b;return{text:u.text,actionCallback:(w=u.actionCallback)!==null&&w!==void 0?w:()=>Promise.resolve(),style:(b=u.style)!==null&&b!==void 0?b:"outline"}}))!==null&&t!==void 0?t:[]];let V=d?il(r):H("span",[],[],r!=null?r:"");o&&(V=H("span",[],[],[V,H("pre",[],[["style","text-align: left"]],o)]));const{style:J,html:oe}=rl(l,V,a,K,!!(d!=null&&d.p2pSyncCode));k.appendChild(oe);const pe=Mt.createElement("style");pe.textContent=J,I.appendChild(pe),c&&(Ji[l]=window.setTimeout(()=>St(void 0,void 0,void 0,function*(){yield Hn(l)}),c)),Mt.body.prepend(v);const M=I.getElementById(`beacon-alert-${l}-close`),R=()=>St(void 0,void 0,void 0,function*(){f&&f(),yield Hn(l)});if(h){const u=I.getElementById("beacon--disclaimer");u&&(u.innerText=h)}const A=gr(),y=I.getElementById(`beacon-alert-modal-${l}`);y&&(y.classList.add(`theme__${A}`),y.addEventListener("click",R));const n=I.querySelectorAll(".beacon-modal__wrapper");return n.length>0&&n[0].addEventListener("click",u=>{u.stopPropagation()}),Yi=Mt.activeElement,k.focus(),K.forEach((u,w)=>{const b=I.getElementById(`beacon-alert-${l}-${w}`);b&&b.addEventListener("click",()=>St(void 0,void 0,void 0,function*(){yield Hn(l),u.actionCallback&&(yield u.actionCallback())}))}),M&&M.addEventListener("click",()=>St(void 0,void 0,void 0,function*(){yield R()})),window.addEventListener("keydown",u=>St(void 0,void 0,void 0,function*(){u.key==="Escape"&&(yield R())})),d&&(yield zc(l,I,d)),l}),ol={default:{css:`:host {
  --animation-duration: 300ms;
  all: initial;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

.animated {
  animation-duration: var(--animation-duration);
  animation-fill-mode: both;
}

.fadeIn {
  animation-name: fadeIn;
}

.fadeOut {
  animation-name: fadeOut;
}

.beacon-toast__base {
  position: fixed;
  top: 16px;
  right: 16px;
  z-index: 2147483000;
  margin: 0 auto;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.1);
  flex-direction: column;
}
@media (max-width: 576px) {
  .beacon-toast__base {
    top: 8px;
    right: 8px;
    left: 8px;
  }
  .beacon-toast__wallet__outer {
    flex-wrap: wrap;
  }
  .beacon-toast__wallet__link {
    display: flex;
    margin-left: 12px !important;
  }
}

.theme__light.beacon-toast__base {
  background: #fff;
}

.theme__dark.beacon-toast__base {
  background: #27334c;
}

.theme__dark p {
  color: #6183ff;
}

a {
  text-decoration: none;
  color: #3880ff;
}

a svg {
  width: 12px;
  margin-left: 2px;
}

a:visited {
  color: #3880ff;
}

hr {
  height: 1px;
  color: rgba(0, 0, 0, 0.12);
  background-color: rgba(0, 0, 0, 0.12);
  border: none;
  width: 100%;
  margin: 0;
  display: none;
}

.show {
  display: block !important;
}

.hide {
  display: none !important;
}

#beacon-toast-list {
  display: none;
}

.beacon-toast__upside_down {
  transform: rotate(180deg);
}

.beacon-toast__content {
  justify-content: space-between;
  min-height: 56px;
  height: 0;
}

.beacon-toast__action__item,
.beacon-toast__powered a,
.beacon-toast__wallet__container,
#beacon-text,
.beacon-toast__action__item p,
.beacon-toast__wallet__outer {
  align-items: center;
}

.beacon-toast__content,
.beacon-toast__base,
.beacon-toast__action__item,
.beacon-toast__powered a,
#beacon-text,
.beacon-toast__wallet__container,
.beacon-toast__wallet__outer {
  display: flex;
}

.beacon-toast__content,
.beacon-toast__action__item,
.beacon-toast__powered a {
  padding: 0 16px;
  font-family: Roboto, Helvetica, sans-serif;
}

#beacon-text strong {
  display: contents;
}
.beacon-toast__wallet__link {
  margin-left: 8px;
}
.beacon-toast__wallet__link svg {
  margin-left: 4px;
}
.beacon-toast__powered a {
  margin: 4px 0 12px;
  font-size: 12px;
  opacity: 0.64;
}

.beacon-toast__powered svg {
  width: 20px;
  height: 20px;
  margin: 0 2px 0 4px;
}

.beacon-toast__action__item {
  font-size: 14px;
  max-width: 40ch;
}

.beacon-toast__action__item p {
  margin-right: 8px;
}

.beacon-toast__action__item__subtitle,
.beacon-toast__powered a {
  min-width: 88px;
  color: rgba(0, 0, 0, 0.54);
}

.theme__dark .beacon-toast__powered a {
  color: #7c99d6;
}

.beacon-toast__content__img {
  width: 24px;
  height: 24px;
  margin-right: 4px;
  image-rendering: -moz-crisp-edges; /* Firefox */
  image-rendering: -o-crisp-edges; /* Opera */
  image-rendering: -webkit-optimize-contrast; /* Webkit (non-standard naming) */
  image-rendering: crisp-edges;
  -ms-interpolation-mode: nearest-neighbor; /* IE (non-standard property) */
}

.beacon-toast__more {
  width: 14px;
  transition: transform 0.5s;
}

a,
.beacon-toast__more {
  cursor: pointer;
}

a:hover {
  opacity: 0.64;
}

.theme__dark .beacon-toast__more {
  color: #7c99d6;
}

.beacon-toast__more--action {
  margin: 8px 0;
}

#beacon-text {
  padding-right: 24px;
}

#beacon-text-content {
  display: flex;
  align-items: center;
}

.progress-line,
.progress-line:before {
  height: 3px;
  width: 100%;
  margin: 0;
}
.progress-line {
  background-color: #a7c4f7;
  display: -webkit-flex;
  display: flex;
}
.progress-line:before {
  background-color: #3880ff;
  content: '';
  -webkit-animation: running-progress 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
  animation: running-progress 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
}
@-webkit-keyframes running-progress {
  0% {
    margin-left: 0px;
    margin-right: 100%;
  }
  50% {
    margin-left: 25%;
    margin-right: 0%;
  }
  100% {
    margin-left: 100%;
    margin-right: 0;
  }
}
@keyframes running-progress {
  0% {
    margin-left: 0px;
    margin-right: 100%;
  }
  50% {
    margin-left: 25%;
    margin-right: 0%;
  }
  100% {
    margin-left: 100%;
    margin-right: 0;
  }
}
`}};var tt=globalThis&&globalThis.__awaiter||function(i,e,t,r){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(l){try{f(r.next(l))}catch(v){c(v)}}function h(l){try{f(r.throw(l))}catch(v){c(v)}}function f(l){l.done?a(l.value):o(l.value).then(d,h)}f((r=r.apply(i,e||[])).next())})};let gt;typeof window<"u"&&typeof window.document<"u"&&(gt=window.document);const ts=5*1e3;let An,Zn,nt;const sl=i=>tt(void 0,void 0,void 0,function*(){const{text:e,isBold:t,actionText:r,actionLogo:o,actionCallback:a}=i,c=yield Nt(),d=gt.createElement("div");d.classList.add("beacon-toast__action__item"),Zi(d);const h=f=>H("strong",[],[],f);if(a){e.length>0&&d.appendChild(H("p",[],[],e));const f=H("span",[],[],[H("span",[],[],r),o&&o==="external"?Zc():void 0]);d.appendChild(H("p",[],[],[H("a",[],[["id",c]],[t?h([f]):f])]))}else if(r){e.length>0&&d.appendChild(H("p",["beacon-toast__action__item__subtitle"],[],e));const f=H("span",[],[],r);d.appendChild(H("p",[],[],[t?h([f]):f]))}else{const f=H("p",[],[],e);d.appendChild(t?h([f]):f)}return a&&d.addEventListener("click",a),d}),Zi=i=>{for(;i.firstChild;)i.removeChild(i.firstChild)},ns=i=>{var e,t;const r=(e=nt==null?void 0:nt.walletInfo)===null||e===void 0?void 0:e.icon,o=(t=nt==null?void 0:nt.walletInfo)===null||t===void 0?void 0:t.name;let a;const c=H("strong",[],[],o!=null?o:"Wallet");r?a=H("span",["beacon-toast__wallet__container"],[],[H("img",["beacon-toast__content__img"],[["src",r]],""),c]):a=c;const d=i.split("{{wallet}}");if(d.length===1)return[H("span",[],[],i)];{const h=[];for(let f=0;f<d.length;f++)h.push(H("span",[],[],d[f])),f<d.length-1&&h.push(a);return h}},al=i=>{const e=i.body,t=ns(e),r=H("span",["beacon-toast__wallet__outer"],[],t),o=$c([r]);return{style:ol.default.css,html:o}},et=()=>new Promise(i=>{var e;nt=void 0;const t=gt.getElementById("beacon-toast-wrapper");if(!t)return i();const r=(e=t.shadowRoot)===null||e===void 0?void 0:e.getElementById("beacon-toast");r?(An&&(clearTimeout(An),An=void 0),r.className=r.className.replace("fadeIn","fadeOut"),window.setTimeout(()=>{const a=t.parentNode;a&&a.removeChild(t),i()},300)):i()}),Ui=(i,e,t)=>{const r=i.getElementById(e);return r&&r.addEventListener("click",()=>tt(void 0,void 0,void 0,function*(){yield t(r)})),r},Er=(i,e)=>{const t=i.getElementById(e);t&&(t.classList.remove("hide"),t.classList.add("show"))},mr=(i,e)=>{const t=i.getElementById(e);t&&(t.classList.add("hide"),t.classList.remove("show"))},cl=i=>{mr(i,"beacon-toast-loader"),Er(i,"beacon-toast-loader-placeholder")},ll=i=>{Er(i,"beacon-toast-button-expand"),mr(i,"beacon-toast-button-close")},is=i=>{Er(i,"beacon-toast-button-close"),mr(i,"beacon-toast-button-expand")},rs=i=>{const e=i.getElementById("beacon-toast-button-expand"),t=i.getElementById("beacon-toast-list");e&&t&&(e.classList.remove("beacon-toast__upside_down"),t.classList.add("hide"),t.classList.remove("show"))},os=i=>{const e=i.getElementById("beacon-toast-button-expand"),t=i.getElementById("beacon-toast-list");e&&t&&(e.classList.add("beacon-toast__upside_down"),t.classList.remove("hide"),t.classList.add("show"))},zi=i=>{const e=i.getElementById("beacon-toast-button-expand"),t=i.getElementById("beacon-toast-list");e&&t&&(e.classList.contains("beacon-toast__upside_down")?rs(i):os(i))},ss=(i,e,t)=>tt(void 0,void 0,void 0,function*(){const r=e.actions;if(r&&r.length>0){const o=r.map(d=>tt(void 0,void 0,void 0,function*(){return sl(d)}));(yield Promise.all(o)).forEach(d=>t.appendChild(d));const c=gt.createElement("small");c.classList.add("beacon-toast__powered"),c.appendChild(el()),t.appendChild(c),ll(i)}else is(i),rs(i)}),ao=i=>tt(void 0,void 0,void 0,function*(){nt=i;const e=i.timer,t=gt.createElement("div");t.setAttribute("id","beacon-toast-wrapper");const r=t.attachShadow({mode:"open"}),o=gt.createElement("div"),{style:a,html:c}=al(i);o.appendChild(c);const d=gt.createElement("style");d.textContent=a,r.appendChild(o),r.appendChild(d),e&&(An=window.setTimeout(()=>tt(void 0,void 0,void 0,function*(){yield et()}),e)),gt.body.prepend(t);const h=gr(),f=r.getElementById("beacon-toast");f&&f.classList.add(`theme__${h}`);const l=r.getElementById("beacon-toast-list");l&&(yield ss(r,i,l));const v=r.getElementById("beacon-open-wallet");v&&(i.openWalletAction?v.addEventListener("click",()=>{i.openWalletAction&&i.openWalletAction()}):v.classList.add("hide")),nt.state==="loading"&&(Zn=window.setTimeout(()=>tt(void 0,void 0,void 0,function*(){const k=r.getElementById("beacon-toast-button-expand");k&&!k.classList.contains("beacon-toast__upside_down")&&zi(r)}),ts)),Ui(r,"beacon-toast-button-done",()=>tt(void 0,void 0,void 0,function*(){yield et()}));const I=Ui(r,"beacon-toast-button-close",()=>tt(void 0,void 0,void 0,function*(){yield et()}));I&&nt.state==="loading"&&I.classList.add("hide"),Ui(r,"beacon-toast-button-expand",()=>tt(void 0,void 0,void 0,function*(){zi(r)}))}),dl=i=>tt(void 0,void 0,void 0,function*(){nt=Object.assign(Object.assign({},nt),i);const e=i.timer,t=gt.getElementById("beacon-toast-wrapper");if(!t)return;const r=t.shadowRoot;if(!r)return;const o=r.getElementById("beacon-toast-list");o&&(Zi(o),yield ss(r,i,o)),nt.state==="loading"&&(Zn=window.setTimeout(()=>tt(void 0,void 0,void 0,function*(){const h=r.getElementById("beacon-toast-button-expand");h&&!h.classList.contains("beacon-toast__upside_down")&&zi(r)}),ts));const a=r.getElementById("beacon-text-content");a&&(Zi(a),a.appendChild(H("span",["beacon-toast__wallet__outer"],[],ns(i.body))));const c=r.getElementById("beacon-open-wallet");c&&(i.openWalletAction?(c.classList.remove("hide"),c.addEventListener("click",()=>{i.openWalletAction&&i.openWalletAction()})):c.classList.add("hide")),e&&(An=window.setTimeout(()=>tt(void 0,void 0,void 0,function*(){yield et()}),e));const d=r.getElementById("beacon-toast-button-done");d&&d.addEventListener("click",()=>tt(void 0,void 0,void 0,function*(){yield et()}))}),Lt=i=>tt(void 0,void 0,void 0,function*(){var e;if(Zn&&clearTimeout(Zn),gt.getElementById("beacon-toast-wrapper")?i.forceNew?(yield et(),yield ao(i)):yield dl(i):yield ao(i),nt&&nt.state==="finished"){const r=(e=gt.getElementById("beacon-toast-wrapper"))===null||e===void 0?void 0:e.shadowRoot;r&&(cl(r),is(r),os(r))}}),li=i=>i.length>=12?`${i.substr(0,5)}...${i.substr(-5)}`:i;var xe=globalThis&&globalThis.__awaiter||function(i,e,t,r){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(l){try{f(r.next(l))}catch(v){c(v)}}function h(l){try{f(r.throw(l))}catch(v){c(v)}}function f(l){l.done?a(l.value):o(l.value).then(d,h)}f((r=r.apply(i,e||[])).next())})};const Sn=new it("BeaconEvents"),Nn=5*1e3;var U;(function(i){i.PERMISSION_REQUEST_SENT="PERMISSION_REQUEST_SENT",i.PERMISSION_REQUEST_SUCCESS="PERMISSION_REQUEST_SUCCESS",i.PERMISSION_REQUEST_ERROR="PERMISSION_REQUEST_ERROR",i.OPERATION_REQUEST_SENT="OPERATION_REQUEST_SENT",i.OPERATION_REQUEST_SUCCESS="OPERATION_REQUEST_SUCCESS",i.OPERATION_REQUEST_ERROR="OPERATION_REQUEST_ERROR",i.SIGN_REQUEST_SENT="SIGN_REQUEST_SENT",i.SIGN_REQUEST_SUCCESS="SIGN_REQUEST_SUCCESS",i.SIGN_REQUEST_ERROR="SIGN_REQUEST_ERROR",i.BROADCAST_REQUEST_SENT="BROADCAST_REQUEST_SENT",i.BROADCAST_REQUEST_SUCCESS="BROADCAST_REQUEST_SUCCESS",i.BROADCAST_REQUEST_ERROR="BROADCAST_REQUEST_ERROR",i.ACKNOWLEDGE_RECEIVED="ACKNOWLEDGE_RECEIVED",i.LOCAL_RATE_LIMIT_REACHED="LOCAL_RATE_LIMIT_REACHED",i.NO_PERMISSIONS="NO_PERMISSIONS",i.ACTIVE_ACCOUNT_SET="ACTIVE_ACCOUNT_SET",i.ACTIVE_TRANSPORT_SET="ACTIVE_TRANSPORT_SET",i.SHOW_PREPARE="SHOW_PREPARE",i.HIDE_UI="HIDE_UI",i.PAIR_INIT="PAIR_INIT",i.PAIR_SUCCESS="PAIR_SUCCESS",i.CHANNEL_CLOSED="CHANNEL_CLOSED",i.INTERNAL_ERROR="INTERNAL_ERROR",i.UNKNOWN="UNKNOWN"})(U||(U={}));const Un=i=>xe(void 0,void 0,void 0,function*(){let e;const t=[];if(i.walletInfo.deeplink&&(i.walletInfo.type==="web"||i.walletInfo.type==="mobile"&&Wi(window)||i.walletInfo.type==="desktop"&&!Wi(window))){const r=i.walletInfo.deeplink;e=()=>xe(void 0,void 0,void 0,function*(){const o=document.createElement("a");o.setAttribute("href",r),o.setAttribute("target","_blank"),o.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))})}t.push({text:"No answer from your wallet received yet. Please make sure the wallet is open.",isBold:!0}),t.push({text:"Did you make a mistake?",actionText:"Cancel Request",actionCallback:()=>xe(void 0,void 0,void 0,function*(){yield et()})}),t.push({text:"Wallet not receiving request?",actionText:"Reset Connection",actionCallback:()=>xe(void 0,void 0,void 0,function*(){yield et();const r=i.extraInfo.resetCallback;r&&(Sn.log("showSentToast","resetCallback invoked"),yield r())})}),Lt({body:"Request sent to\xA0 {{wallet}}",walletInfo:i.walletInfo,state:"loading",actions:t,openWalletAction:e}).catch(r=>console.error(r))}),ul=i=>xe(void 0,void 0,void 0,function*(){Lt({body:"Awaiting confirmation in\xA0 {{wallet}}",state:"acknowledge",walletInfo:i.walletInfo}).catch(e=>console.error(e))}),fl=i=>xe(void 0,void 0,void 0,function*(){const e=i.walletInfo?"Preparing Request for\xA0 {{wallet}}...":"Preparing Request...";Lt({body:e,state:"prepare",walletInfo:i.walletInfo}).catch(t=>console.error(t))}),hl=i=>xe(void 0,void 0,void 0,function*(){i?(i.includes("alert")&&ci(),i.includes("toast")&&et()):et()}),vl=()=>xe(void 0,void 0,void 0,function*(){yield fn({title:"No Permission",body:"Please allow the wallet to handle this type of request."})}),Bn=(i,e)=>xe(void 0,void 0,void 0,function*(){const t=i.errorResponse.errorType?ct.getError(i.errorResponse.errorType,i.errorResponse.errorData):new Io,r=[{text:t.title,isBold:!0},{text:t.description}];i.errorResponse.errorType===Te.TRANSACTION_INVALID_ERROR&&i.errorResponse.errorData&&r.push({text:"",actionText:"Show Details",actionCallback:()=>xe(void 0,void 0,void 0,function*(){yield et(),yield fn({title:t.title,body:t.fullDescription.description,data:t.fullDescription.data,buttons:e})})}),yield Lt({body:"{{wallet}}\xA0 has returned an error",timer:i.errorResponse.errorType===Te.ABORTED_ERROR?Nn:void 0,state:"finished",walletInfo:i.walletInfo,actions:r})}),pl=()=>xe(void 0,void 0,void 0,function*(){fn({title:"Error",body:"Rate limit reached. Please slow down",buttons:[{text:"Done",style:"outline"}],timer:3e3}).catch(i=>console.error(i))}),gl=()=>xe(void 0,void 0,void 0,function*(){yield ci()}),El=()=>xe(void 0,void 0,void 0,function*(){yield fn({title:"Channel closed",body:"Your peer has closed the connection.",buttons:[{text:"Done",style:"outline"}],timer:1500})}),ml=i=>xe(void 0,void 0,void 0,function*(){var e;const t=[...(e=i.buttons)!==null&&e!==void 0?e:[]];t.push({text:"Done",style:"outline"});const r={title:"Internal Error",body:i.text,buttons:t};yield fn(r)}),yl=i=>xe(void 0,void 0,void 0,function*(){const e={title:"Choose your preferred wallet",body:"<p></p>",pairingPayload:{p2pSyncCode:i.p2pPeerInfo,postmessageSyncCode:i.postmessagePeerInfo,preferredNetwork:i.preferredNetwork},closeButtonCallback:i.abortedHandler,disclaimerText:i.disclaimerText};yield fn(e)}),wl=i=>xe(void 0,void 0,void 0,function*(){const{output:e}=i;yield Lt({body:"{{wallet}}\xA0 has granted permission",timer:Nn,walletInfo:i.walletInfo,state:"finished",actions:[{text:"Address",actionText:li(e.address),isBold:!0},{text:"Network",actionText:`${e.network.type}`},{text:"Permissions",actionText:e.scopes.join(", ")}]})}),_l=i=>xe(void 0,void 0,void 0,function*(){const{account:e,output:t,blockExplorer:r}=i;yield Lt({body:"{{wallet}}\xA0 successfully submitted operation",timer:Nn,state:"finished",walletInfo:i.walletInfo,actions:[{text:li(t.transactionHash),isBold:!0,actionText:"Open Blockexplorer",actionLogo:"external",actionCallback:()=>xe(void 0,void 0,void 0,function*(){const o=yield r.getTransactionLink(t.transactionHash,e.network);window.open(o,"_blank"),yield et()})}]})}),Al=i=>xe(void 0,void 0,void 0,function*(){const e=i.output;yield Lt({body:"{{wallet}}\xA0 successfully signed payload",timer:Nn,state:"finished",walletInfo:i.walletInfo,actions:[{text:`Signature: ${li(e.signature)}`,actionText:"Copy to clipboard",actionCallback:()=>xe(void 0,void 0,void 0,function*(){navigator.clipboard.writeText(e.signature).then(()=>{Sn.log("showSignSuccessAlert","Copying to clipboard was successful!")},t=>{Sn.error("showSignSuccessAlert","Could not copy text to clipboard: ",t)}),yield et()})}]})}),bl=i=>xe(void 0,void 0,void 0,function*(){const{network:e,output:t,blockExplorer:r}=i;yield Lt({body:"{{wallet}}\xA0 successfully injected operation",timer:Nn,state:"finished",walletInfo:i.walletInfo,actions:[{text:li(t.transactionHash),isBold:!0,actionText:"Open Blockexplorer",actionLogo:"external",actionCallback:()=>xe(void 0,void 0,void 0,function*(){const o=yield r.getTransactionLink(t.transactionHash,e);window.open(o,"_blank"),yield et()})}]})}),Bi=()=>()=>xe(void 0,void 0,void 0,function*(){}),Ne={[U.PERMISSION_REQUEST_SENT]:Un,[U.PERMISSION_REQUEST_SUCCESS]:wl,[U.PERMISSION_REQUEST_ERROR]:Bn,[U.OPERATION_REQUEST_SENT]:Un,[U.OPERATION_REQUEST_SUCCESS]:_l,[U.OPERATION_REQUEST_ERROR]:Bn,[U.SIGN_REQUEST_SENT]:Un,[U.SIGN_REQUEST_SUCCESS]:Al,[U.SIGN_REQUEST_ERROR]:Bn,[U.BROADCAST_REQUEST_SENT]:Un,[U.BROADCAST_REQUEST_SUCCESS]:bl,[U.BROADCAST_REQUEST_ERROR]:Bn,[U.ACKNOWLEDGE_RECEIVED]:ul,[U.LOCAL_RATE_LIMIT_REACHED]:pl,[U.NO_PERMISSIONS]:vl,[U.ACTIVE_ACCOUNT_SET]:Bi(),[U.ACTIVE_TRANSPORT_SET]:Bi(),[U.SHOW_PREPARE]:fl,[U.HIDE_UI]:hl,[U.PAIR_INIT]:yl,[U.PAIR_SUCCESS]:gl,[U.CHANNEL_CLOSED]:El,[U.INTERNAL_ERROR]:ml,[U.UNKNOWN]:Bi()};class co{constructor(e={},t){this.callbackMap={[U.PERMISSION_REQUEST_SENT]:[Ne.PERMISSION_REQUEST_SENT],[U.PERMISSION_REQUEST_SUCCESS]:[Ne.PERMISSION_REQUEST_SUCCESS],[U.PERMISSION_REQUEST_ERROR]:[Ne.PERMISSION_REQUEST_ERROR],[U.OPERATION_REQUEST_SENT]:[Ne.OPERATION_REQUEST_SENT],[U.OPERATION_REQUEST_SUCCESS]:[Ne.OPERATION_REQUEST_SUCCESS],[U.OPERATION_REQUEST_ERROR]:[Ne.OPERATION_REQUEST_ERROR],[U.SIGN_REQUEST_SENT]:[Ne.SIGN_REQUEST_SENT],[U.SIGN_REQUEST_SUCCESS]:[Ne.SIGN_REQUEST_SUCCESS],[U.SIGN_REQUEST_ERROR]:[Ne.SIGN_REQUEST_ERROR],[U.BROADCAST_REQUEST_SENT]:[Ne.BROADCAST_REQUEST_SENT],[U.BROADCAST_REQUEST_SUCCESS]:[Ne.BROADCAST_REQUEST_SUCCESS],[U.BROADCAST_REQUEST_ERROR]:[Ne.BROADCAST_REQUEST_ERROR],[U.ACKNOWLEDGE_RECEIVED]:[Ne.ACKNOWLEDGE_RECEIVED],[U.LOCAL_RATE_LIMIT_REACHED]:[Ne.LOCAL_RATE_LIMIT_REACHED],[U.NO_PERMISSIONS]:[Ne.NO_PERMISSIONS],[U.ACTIVE_ACCOUNT_SET]:[Ne.ACTIVE_ACCOUNT_SET],[U.ACTIVE_TRANSPORT_SET]:[Ne.ACTIVE_TRANSPORT_SET],[U.SHOW_PREPARE]:[Ne.SHOW_PREPARE],[U.HIDE_UI]:[Ne.HIDE_UI],[U.PAIR_INIT]:[Ne.PAIR_INIT],[U.PAIR_SUCCESS]:[Ne.PAIR_SUCCESS],[U.CHANNEL_CLOSED]:[Ne.CHANNEL_CLOSED],[U.INTERNAL_ERROR]:[Ne.INTERNAL_ERROR],[U.UNKNOWN]:[Ne.UNKNOWN]},t&&this.setAllHandlers(),this.overrideDefaults(e)}on(e,t){return xe(this,void 0,void 0,function*(){const r=this.callbackMap[e]||[];r.push(t),this.callbackMap[e]=r})}emit(e,t,r){return xe(this,void 0,void 0,function*(){const o=this.callbackMap[e];o&&o.length>0&&o.forEach(a=>xe(this,void 0,void 0,function*(){try{yield a(t,r)}catch(c){Sn.error(`error handling event ${e}`,c)}}))})}overrideDefaults(e){Object.keys(e).forEach(t=>{const r=t,o=e[r];o&&(this.callbackMap[r]=[o.handler])})}setAllHandlers(e){Object.keys(this.callbackMap).forEach(t=>{const r=t;this.callbackMap[r]=[],e?this.callbackMap[r].push(e):this.callbackMap[r].push((...o)=>{Sn.log(t,...o)})})}}const Dn={[Ae.BlockchainRequest]:{sent:U.UNKNOWN,success:U.UNKNOWN,error:U.UNKNOWN},[Ae.BlockchainResponse]:{sent:U.UNKNOWN,success:U.UNKNOWN,error:U.UNKNOWN},[Ae.PermissionRequest]:{sent:U.PERMISSION_REQUEST_SENT,success:U.PERMISSION_REQUEST_SUCCESS,error:U.PERMISSION_REQUEST_ERROR},[Ae.PermissionResponse]:{sent:U.UNKNOWN,success:U.UNKNOWN,error:U.UNKNOWN},[Ae.OperationRequest]:{sent:U.OPERATION_REQUEST_SENT,success:U.OPERATION_REQUEST_SUCCESS,error:U.OPERATION_REQUEST_ERROR},[Ae.OperationResponse]:{sent:U.UNKNOWN,success:U.UNKNOWN,error:U.UNKNOWN},[Ae.SignPayloadRequest]:{sent:U.SIGN_REQUEST_SENT,success:U.SIGN_REQUEST_SUCCESS,error:U.SIGN_REQUEST_ERROR},[Ae.SignPayloadResponse]:{sent:U.UNKNOWN,success:U.UNKNOWN,error:U.UNKNOWN},[Ae.BroadcastRequest]:{sent:U.BROADCAST_REQUEST_SENT,success:U.BROADCAST_REQUEST_SUCCESS,error:U.BROADCAST_REQUEST_ERROR},[Ae.BroadcastResponse]:{sent:U.UNKNOWN,success:U.UNKNOWN,error:U.UNKNOWN},[Ae.Acknowledge]:{sent:U.UNKNOWN,success:U.UNKNOWN,error:U.UNKNOWN},[Ae.Disconnect]:{sent:U.UNKNOWN,success:U.UNKNOWN,error:U.UNKNOWN},[Ae.Error]:{sent:U.UNKNOWN,success:U.UNKNOWN,error:U.UNKNOWN}};var Rl=globalThis&&globalThis.__awaiter||function(i,e,t,r){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(l){try{f(r.next(l))}catch(v){c(v)}}function h(l){try{f(r.throw(l))}catch(v){c(v)}}function f(l){l.done?a(l.value):o(l.value).then(d,h)}f((r=r.apply(i,e||[])).next())})};class Sl{constructor(e){this.rpcUrls=e}getLinkForNetwork(e){return Rl(this,void 0,void 0,function*(){return this.rpcUrls[e.type]})}}var lo=globalThis&&globalThis.__awaiter||function(i,e,t,r){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(l){try{f(r.next(l))}catch(v){c(v)}}function h(l){try{f(r.throw(l))}catch(v){c(v)}}function f(l){l.done?a(l.value):o(l.value).then(d,h)}f((r=r.apply(i,e||[])).next())})};class Tl extends Sl{constructor(e={[Oe.MAINNET]:"https://tzkt.io",[Oe.GHOSTNET]:"https://ghostnet.tzkt.io",[Oe.MONDAYNET]:"https://mondaynet.tzkt.io",[Oe.DAILYNET]:"https://dailynet.tzkt.io",[Oe.DELPHINET]:"https://delphinet.tzkt.io",[Oe.EDONET]:"https://edonet.tzkt.io",[Oe.FLORENCENET]:"https://florencenet.tzkt.io",[Oe.GRANADANET]:"https://granadanet.tzkt.io",[Oe.HANGZHOUNET]:"https://hangzhounet.tzkt.io",[Oe.ITHACANET]:"https://ithacanet.tzkt.io",[Oe.JAKARTANET]:"https://jakartanet.tzkt.io",[Oe.KATHMANDUNET]:"https://kathmandunet.tzkt.io",[Oe.CUSTOM]:"https://kathmandunet.tzkt.io"}){super(e),this.rpcUrls=e}getAddressLink(e,t){return lo(this,void 0,void 0,function*(){return`${yield this.getLinkForNetwork(t)}/${e}`})}getTransactionLink(e,t){return lo(this,void 0,void 0,function*(){return`${yield this.getLinkForNetwork(t)}/${e}`})}}var Kn=globalThis&&globalThis.__awaiter||function(i,e,t,r){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(l){try{f(r.next(l))}catch(v){c(v)}}function h(l){try{f(r.throw(l))}catch(v){c(v)}}function f(l){l.done?a(l.value):o(l.value).then(d,h)}f((r=r.apply(i,e||[])).next())})};const Di=new it("DappPostMessageTransport");class xl extends xn{constructor(e,t,r){super(e,t,r,_e.TRANSPORT_POSTMESSAGE_PEERS_DAPP)}startOpenChannelListener(){return Kn(this,void 0,void 0,function*(){return this.client.listenForChannelOpening(e=>Kn(this,void 0,void 0,function*(){Di.log("connect","received PostMessagePairingResponse",e),yield this.addPeer(e),this._isConnected=ut.CONNECTED,this.newPeerListener&&(this.newPeerListener(e),this.newPeerListener=void 0)}))})}listenForNewPeer(e){return Kn(this,void 0,void 0,function*(){Di.log("listenForNewPeer"),this.newPeerListener=e})}stopListeningForNewPeers(){return Kn(this,void 0,void 0,function*(){Di.log("stopListeningForNewPeers"),this.newPeerListener=void 0})}}var Gn=globalThis&&globalThis.__awaiter||function(i,e,t,r){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(l){try{f(r.next(l))}catch(v){c(v)}}function h(l){try{f(r.throw(l))}catch(v){c(v)}}function f(l){l.done?a(l.value):o(l.value).then(d,h)}f((r=r.apply(i,e||[])).next())})};const Ki=new it("DappP2PTransport");class Nl extends Mc{constructor(e,t,r,o,a,c){super(e,t,r,o,_e.TRANSPORT_P2P_PEERS_DAPP,a,c)}startOpenChannelListener(){return Gn(this,void 0,void 0,function*(){return this.client.listenForChannelOpening(e=>Gn(this,void 0,void 0,function*(){Ki.log("listenForNewPeer","new publicKey",e.publicKey),yield this.addPeer(e),this._isConnected=ut.CONNECTED,this.newPeerListener&&(this.newPeerListener(e),this.newPeerListener=void 0)}))})}listenForNewPeer(e){return Gn(this,void 0,void 0,function*(){Ki.log("listenForNewPeer"),this.newPeerListener=e})}stopListeningForNewPeers(){return Gn(this,void 0,void 0,function*(){Ki.log("stopListeningForNewPeers"),this.newPeerListener=void 0})}}var he=globalThis&&globalThis.__awaiter||function(i,e,t,r){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(l){try{f(r.next(l))}catch(v){c(v)}}function h(l){try{f(r.throw(l))}catch(v){c(v)}}function f(l){l.done?a(l.value):o(l.value).then(d,h)}f((r=r.apply(i,e||[])).next())})};const Ce=new it("DAppClient");class Ll extends da{constructor(e){var t,r,o,a;super(Object.assign({storage:e&&e.storage?e.storage:new ya},e)),this.events=new co,this.openRequests=new Map,this._activeAccount=new Me,this._activePeer=new Me,this.blockchains=new Map,this.events=new co(e.eventHandlers,(t=e.disableDefaultEvents)!==null&&t!==void 0?t:!1),this.blockExplorer=(r=e.blockExplorer)!==null&&r!==void 0?r:new Tl,this.preferredNetwork=(o=e.preferredNetwork)!==null&&o!==void 0?o:Oe.MAINNET,so((a=e.colorMode)!==null&&a!==void 0?a:Rn.LIGHT),this.disclaimerText=e.disclaimerText,this.appMetadataManager=new wa(this.storage),this.activeAccountLoaded=this.storage.get(_e.ACTIVE_ACCOUNT).then(c=>he(this,void 0,void 0,function*(){c?yield this.setActiveAccount(yield this.accountManager.getAccount(c)):yield this.setActiveAccount(void 0)})).catch(c=>he(this,void 0,void 0,function*(){yield this.setActiveAccount(void 0),console.error(c)})),this.handleResponse=(c,d)=>he(this,void 0,void 0,function*(){var h,f;const l=this.openRequests.get(c.id);if(Ce.log("handleResponse","Received message",c,d),c.version==="3"){const v=c;if(l&&v.message.type===Ae.Acknowledge)Ce.log(`acknowledge message received for ${c.id}`),console.timeLog(c.id,"acknowledge"),this.events.emit(U.ACKNOWLEDGE_RECEIVED,{message:v.message,extraInfo:{},walletInfo:yield this.getWalletInfo()}).catch(console.error);else if(l){const I=v.message.blockchainData.appMetadata;v.message.type===Ae.PermissionResponse&&I&&(yield this.appMetadataManager.addAppMetadata(I)),console.timeLog(v.id,"response"),console.timeEnd(v.id),v.message.type===Ae.Error?l.reject(v.message):l.resolve({message:c,connectionInfo:d}),this.openRequests.delete(v.id)}else if(v.message.type===Ae.Disconnect){const I=d.origin===pt.P2P?this.p2pTransport:(h=this.postMessageTransport)!==null&&h!==void 0?h:yield this.transport;if(I){const K=(yield I.getPeers()).find(V=>V.senderId===c.senderId);K?(yield I.removePeer(K),yield this.removeAccountsForPeers([K]),yield this.events.emit(U.CHANNEL_CLOSED)):Ce.error("handleDisconnect","cannot find peer for sender ID",c.senderId)}}else Ce.error("handleResponse","no request found for id ",c.id)}else{const v=c;if(l&&v.type===Ae.Acknowledge)Ce.log(`acknowledge message received for ${c.id}`),console.timeLog(c.id,"acknowledge"),this.events.emit(U.ACKNOWLEDGE_RECEIVED,{message:v,extraInfo:{},walletInfo:yield this.getWalletInfo()}).catch(console.error);else if(l)v.type===Ae.PermissionResponse&&v.appMetadata&&(yield this.appMetadataManager.addAppMetadata(v.appMetadata)),console.timeLog(v.id,"response"),console.timeEnd(v.id),v.type===Ae.Error||c.errorType?l.reject(v):l.resolve({message:c,connectionInfo:d}),this.openRequests.delete(v.id);else if(v.type===Ae.Disconnect||c.typedMessage.type===Ae.Disconnect){const I=d.origin===pt.P2P?this.p2pTransport:(f=this.postMessageTransport)!==null&&f!==void 0?f:yield this.transport;if(I){const K=(yield I.getPeers()).find(V=>V.senderId===c.senderId);K?(yield I.removePeer(K),yield this.removeAccountsForPeers([K]),yield this.events.emit(U.CHANNEL_CLOSED)):Ce.error("handleDisconnect","cannot find peer for sender ID",c.senderId)}}else Ce.error("handleResponse","no request found for id ",c.id)}})}initInternalTransports(){return he(this,void 0,void 0,function*(){const e=yield this.keyPair;this.postMessageTransport||this.p2pTransport||(this.postMessageTransport=new xl(this.name,e,this.storage),yield this.addListener(this.postMessageTransport),this.p2pTransport=new Nl(this.name,e,this.storage,this.matrixNodes,this.iconUrl,this.appUrl),yield this.addListener(this.p2pTransport))})}init(e){const t=Object.create(null,{init:{get:()=>super.init}});return he(this,void 0,void 0,function*(){if(this._initPromise)return this._initPromise;try{yield this.activeAccountLoaded}catch{}return this._initPromise=new Promise(r=>he(this,void 0,void 0,function*(){if(e)yield this.addListener(e),r(yield t.init.call(this,e));else if(this._transport.isSettled())yield(yield this.transport).connect(),r(yield t.init.call(this,yield this.transport));else{const o=yield this.getActiveAccount(),a=()=>{this.postMessageTransport&&this.postMessageTransport.stopListeningForNewPeers().catch(console.error),this.p2pTransport&&this.p2pTransport.stopListeningForNewPeers().catch(console.error)};if(yield this.initInternalTransports(),!this.postMessageTransport||!this.p2pTransport)return;if(this.postMessageTransport.connect().then().catch(console.error),o&&o.origin){const c=o.origin.type;c===pt.EXTENSION?r(yield t.init.call(this,this.postMessageTransport)):c===pt.P2P&&r(yield t.init.call(this,this.p2pTransport))}else{const c=this.p2pTransport,d=this.postMessageTransport;d.listenForNewPeer(h=>{Ce.log("init","postmessage transport peer connected",h),this.events.emit(U.PAIR_SUCCESS,h).catch(f=>console.warn(f)),this.setActivePeer(h).catch(console.error),this.setTransport(this.postMessageTransport).catch(console.error),a(),r(Qt.POST_MESSAGE)}).catch(console.error),c.listenForNewPeer(h=>{Ce.log("init","p2p transport peer connected",h),this.events.emit(U.PAIR_SUCCESS,h).catch(f=>console.warn(f)),this.setActivePeer(h).catch(console.error),this.setTransport(this.p2pTransport).catch(console.error),a(),r(Qt.P2P)}).catch(console.error),xn.getAvailableExtensions().then(()=>he(this,void 0,void 0,function*(){this.events.emit(U.PAIR_INIT,{p2pPeerInfo:()=>(c.connect().then().catch(console.error),c.getPairingRequestInfo()),postmessagePeerInfo:()=>d.getPairingRequestInfo(),preferredNetwork:this.preferredNetwork,abortedHandler:()=>{this._initPromise=void 0},disclaimerText:this.disclaimerText}).catch(h=>console.warn(h))})).catch(h=>{this._initPromise=void 0,console.error(h)})}}})),this._initPromise})}getActiveAccount(){return he(this,void 0,void 0,function*(){return this._activeAccount.promise})}setActiveAccount(e){return he(this,void 0,void 0,function*(){if(this._activeAccount.isSettled()?this._activeAccount=Me.resolve(e):this._activeAccount.resolve(e),e){const t=e.origin.type;yield this.initInternalTransports(),t===pt.EXTENSION?yield this.setTransport(this.postMessageTransport):t===pt.P2P&&(yield this.setTransport(this.p2pTransport));const r=yield this.getPeer(e);yield this.setActivePeer(r)}else yield this.setActivePeer(void 0),yield this.setTransport(void 0);yield this.storage.set(_e.ACTIVE_ACCOUNT,e?e.accountIdentifier:void 0),yield this.events.emit(U.ACTIVE_ACCOUNT_SET,e)})}clearActiveAccount(){return this.setActiveAccount()}setColorMode(e){return he(this,void 0,void 0,function*(){return so(e)})}getColorMode(){return he(this,void 0,void 0,function*(){return gr()})}getAppMetadata(){return he(this,void 0,void 0,function*(){return this.getOwnAppMetadata()})}showPrepare(){return he(this,void 0,void 0,function*(){const e=yield(()=>he(this,void 0,void 0,function*(){try{return yield this.getWalletInfo()}catch{return}}))();yield this.events.emit(U.SHOW_PREPARE,{walletInfo:e})})}hideUI(e){return he(this,void 0,void 0,function*(){yield this.events.emit(U.HIDE_UI,e)})}removeAccount(e){const t=Object.create(null,{removeAccount:{get:()=>super.removeAccount}});return he(this,void 0,void 0,function*(){const r=t.removeAccount.call(this,e),o=yield this.getActiveAccount();return o&&o.accountIdentifier===e&&(yield this.setActiveAccount(void 0)),r})}removeAllAccounts(){const e=Object.create(null,{removeAllAccounts:{get:()=>super.removeAllAccounts}});return he(this,void 0,void 0,function*(){yield e.removeAllAccounts.call(this),yield this.setActiveAccount(void 0)})}removePeer(e,t=!1){return he(this,void 0,void 0,function*(){const r=yield this.transport,o=r.removePeer(e);return yield this.removeAccountsForPeers([e]),t&&(yield this.sendDisconnectToPeer(e,r)),o})}removeAllPeers(e=!1){return he(this,void 0,void 0,function*(){const t=yield this.transport,r=yield t.getPeers(),o=t.removeAllPeers();if(yield this.removeAccountsForPeers(r),e){const a=r.map(c=>this.sendDisconnectToPeer(c,t));yield Promise.all(a)}return o})}subscribeToEvent(e,t){return he(this,void 0,void 0,function*(){yield this.events.on(e,t)})}checkPermissions(e){return he(this,void 0,void 0,function*(){if(e===Ae.PermissionRequest)return!0;const t=yield this.getActiveAccount();if(!t)throw yield this.sendInternalError("No active account set!");const r=t.scopes;switch(e){case Ae.OperationRequest:return r.includes(Tt.OPERATION_REQUEST);case Ae.SignPayloadRequest:return r.includes(Tt.SIGN);case Ae.BroadcastRequest:return!0;default:return!1}})}addBlockchain(e){this.blockchains.set(e.identifier,e),e.getWalletLists().then(t=>{Vc(t.desktopList),Wc(t.extensionList),Xc(t.webList),Yc(t.iOSList)})}removeBlockchain(e){this.blockchains.delete(e)}permissionRequest(e){return he(this,void 0,void 0,function*(){console.log("PERMISSION REQUEST");const t=this.blockchains.get(e.blockchainIdentifier);if(!t)throw new Error(`Blockchain "${e.blockchainIdentifier}" not supported by dAppClient`);const r=Object.assign(Object.assign({},e),{type:Ae.PermissionRequest,blockchainData:Object.assign(Object.assign({},e.blockchainData),{appMetadata:yield this.getOwnAppMetadata()})});console.log("REQUESTION PERMIMISSION V3","xxx",r);const{message:o,connectionInfo:a}=yield this.makeRequestV3(r).catch(h=>he(this,void 0,void 0,function*(){throw new Error("TODO")}));console.log("RESPONSE V3",o,a);const c=yield t.getAccountInfosFromPermissionResponse(o.message),d={accountIdentifier:c[0].accountId,senderId:o.senderId,origin:{type:a.origin,id:a.id},address:c[0].address,publicKey:c[0].publicKey,scopes:o.message.blockchainData.scopes,connectedAt:new Date().getTime(),chainData:o.message.blockchainData};return yield this.accountManager.addAccount(d),yield this.setActiveAccount(d),yield t.handleResponse({request:r,account:d,output:o,blockExplorer:this.blockExplorer,connectionContext:a,walletInfo:yield this.getWalletInfo()}),yield this.notifySuccess(r,{account:d,output:{address:c[0].address,network:{type:Oe.MAINNET},scopes:[Tt.OPERATION_REQUEST]},blockExplorer:this.blockExplorer,connectionContext:a,walletInfo:yield this.getWalletInfo()}),o.message})}request(e){return he(this,void 0,void 0,function*(){console.log("REQUEST",e);const t=this.blockchains.get(e.blockchainIdentifier);if(!t)throw new Error(`Blockchain "${t}" not supported by dAppClient`);yield t.validateRequest(e);const r=yield this.getActiveAccount();if(!r)throw yield this.sendInternalError("No active account!");const o=Object.assign(Object.assign({},e),{type:Ae.BlockchainRequest,accountId:r.accountIdentifier}),{message:a,connectionInfo:c}=yield this.makeRequestV3(o).catch(d=>he(this,void 0,void 0,function*(){throw console.error(d),new Error("TODO")}));return yield t.handleResponse({request:o,account:r,output:a,blockExplorer:this.blockExplorer,connectionContext:c,walletInfo:yield this.getWalletInfo()}),a.message})}requestPermissions(e){return he(this,void 0,void 0,function*(){const t={appMetadata:yield this.getOwnAppMetadata(),type:Ae.PermissionRequest,network:e&&e.network?e.network:{type:Oe.MAINNET},scopes:e&&e.scopes?e.scopes:[Tt.OPERATION_REQUEST,Tt.SIGN]},{message:r,connectionInfo:o}=yield this.makeRequest(t).catch(f=>he(this,void 0,void 0,function*(){throw yield this.handleRequestError(t,f)})),a=r.publicKey||r.pubkey||r.pubKey,c=yield zs(a),d={accountIdentifier:yield Hi(c,r.network),senderId:r.senderId,origin:{type:o.origin,id:o.id},address:c,publicKey:a,network:r.network,scopes:r.scopes,threshold:r.threshold,connectedAt:new Date().getTime()};yield this.accountManager.addAccount(d),yield this.setActiveAccount(d);const h=Object.assign(Object.assign({},r),{address:c,accountInfo:d});return yield this.notifySuccess(t,{account:d,output:h,blockExplorer:this.blockExplorer,connectionContext:o,walletInfo:yield this.getWalletInfo()}),h})}requestSignPayload(e){return he(this,void 0,void 0,function*(){if(!e.payload)throw yield this.sendInternalError("Payload must be provided");const t=yield this.getActiveAccount();if(!t)throw yield this.sendInternalError("No active account!");const r=e.payload;if(typeof r!="string")throw new Error("Payload must be a string");const o=(()=>{switch(e.signingType){case Ct.OPERATION:if(!r.startsWith("03"))throw new Error('When using signing type "OPERATION", the payload must start with prefix "03"');return Ct.OPERATION;case Ct.MICHELINE:if(!r.startsWith("05"))throw new Error('When using signing type "MICHELINE", the payload must start with prefix "05"');return Ct.MICHELINE;case Ct.RAW:default:return Ct.RAW}})(),a={type:Ae.SignPayloadRequest,signingType:o,payload:r,sourceAddress:e.sourceAddress||t.address},{message:c,connectionInfo:d}=yield this.makeRequest(a).catch(h=>he(this,void 0,void 0,function*(){throw yield this.handleRequestError(a,h)}));return yield this.notifySuccess(a,{account:t,output:c,connectionContext:d,walletInfo:yield this.getWalletInfo()}),c})}requestOperation(e){return he(this,void 0,void 0,function*(){if(!e.operationDetails)throw yield this.sendInternalError("Operation details must be provided");const t=yield this.getActiveAccount();if(!t)throw yield this.sendInternalError("No active account!");const r={type:Ae.OperationRequest,network:t.network||{type:Oe.MAINNET},operationDetails:e.operationDetails,sourceAddress:t.address||""},{message:o,connectionInfo:a}=yield this.makeRequest(r).catch(c=>he(this,void 0,void 0,function*(){throw yield this.handleRequestError(r,c)}));return yield this.notifySuccess(r,{account:t,output:o,blockExplorer:this.blockExplorer,connectionContext:a,walletInfo:yield this.getWalletInfo()}),o})}requestBroadcast(e){return he(this,void 0,void 0,function*(){if(!e.signedTransaction)throw yield this.sendInternalError("Signed transaction must be provided");const t=e.network||{type:Oe.MAINNET},r={type:Ae.BroadcastRequest,network:t,signedTransaction:e.signedTransaction},{message:o,connectionInfo:a}=yield this.makeRequest(r).catch(c=>he(this,void 0,void 0,function*(){throw yield this.handleRequestError(r,c)}));return yield this.notifySuccess(r,{network:t,output:o,blockExplorer:this.blockExplorer,connectionContext:a,walletInfo:yield this.getWalletInfo()}),o})}setActivePeer(e){return he(this,void 0,void 0,function*(){this._activePeer.isSettled()?this._activePeer=Me.resolve(e):this._activePeer.resolve(e),e&&(yield this.initInternalTransports(),e.type==="postmessage-pairing-response"?yield this.setTransport(this.postMessageTransport):e.type==="p2p-pairing-response"&&(yield this.setTransport(this.p2pTransport)))})}setTransport(e){const t=Object.create(null,{setTransport:{get:()=>super.setTransport}});return he(this,void 0,void 0,function*(){e||(this._initPromise=void 0);const r=t.setTransport.call(this,e);return yield this.events.emit(U.ACTIVE_TRANSPORT_SET,e),r})}sendInternalError(e){return he(this,void 0,void 0,function*(){throw yield this.events.emit(U.INTERNAL_ERROR,{text:e}),new Error(e)})}removeAccountsForPeers(e){return he(this,void 0,void 0,function*(){const t=yield this.accountManager.getAccounts(),r=e.map(d=>d.senderId),a=t.filter(d=>r.includes(d.senderId)).map(d=>d.accountIdentifier);yield this.accountManager.removeAccounts(a);const c=yield this.getActiveAccount();c&&a.includes(c.accountIdentifier)&&(yield this.setActiveAccount(void 0))})}handleRequestError(e,t){return he(this,void 0,void 0,function*(){if(Ce.error("handleRequestError","error response",t),t.errorType){const r=[];if(t.errorType===Te.NO_PRIVATE_KEY_FOUND_ERROR){const c=()=>he(this,void 0,void 0,function*(){const d=e;let h;if(d.sourceAddress&&d.network){const f=yield Hi(d.sourceAddress,d.network);h=yield this.getAccount(f),h&&(yield this.removeAccount(h.accountIdentifier))}});r.push({text:"Remove account",actionCallback:c})}const o=yield this.getPeer(),a=yield this.getActiveAccount();throw e.type===Ae.PermissionRequest&&(yield this.getActiveAccount())===void 0&&(this._initPromise=void 0,this.postMessageTransport=void 0,this.p2pTransport=void 0,yield this.setTransport(),yield this.setActivePeer()),this.events.emit(Dn[e.type].error,{errorResponse:t,walletInfo:yield this.getWalletInfo(o,a)},r).catch(c=>Ce.error("handleRequestError",c)),ct.getError(t.errorType,t.errorData)}throw t})}notifySuccess(e,t){return he(this,void 0,void 0,function*(){this.events.emit(Dn[e.type].success,t).catch(r=>console.warn(r))})}getWalletInfo(e,t){var r,o;return he(this,void 0,void 0,function*(){const a=t||(yield this.getActiveAccount()),c=e||(yield this.getPeer(a));let d;a&&(d=yield this.appMetadataManager.getAppMetadata(a.senderId));const h=c;d||(d={name:h.name,icon:h.icon});const f=(I,k)=>I&&k?I.toLowerCase()===k.toLowerCase():!1;let l,v;if(_n().find(I=>f(I.name,d==null?void 0:d.name))?(l=_n().find(I=>f(I.name,d==null?void 0:d.name)),v="mobile"):Xi().find(I=>f(I.name,d==null?void 0:d.name))?(l=Xi().find(I=>f(I.name,d==null?void 0:d.name)),v="web"):Jn().find(I=>f(I.name,d==null?void 0:d.name))?(l=Jn().find(I=>f(I.name,d==null?void 0:d.name)),v="desktop"):wn().find(I=>f(I.name,d==null?void 0:d.name))&&(l=wn().find(I=>f(I.name,d==null?void 0:d.name)),v="extension"),l){let I;return l.hasOwnProperty("links")?I=l.links[(r=a==null?void 0:a.network.type)!==null&&r!==void 0?r:this.preferredNetwork]:l.hasOwnProperty("deepLink")&&(I=l.deepLink),{name:d.name,icon:(o=d.icon)!==null&&o!==void 0?o:l.logo,deeplink:I,type:v}}return d})}getPeer(e){var t,r,o,a;return he(this,void 0,void 0,function*(){let c;if(e){Ce.log("getPeer","We have an account",e);const d=(r=yield(t=this.postMessageTransport)===null||t===void 0?void 0:t.getPeers())!==null&&r!==void 0?r:[],h=(a=yield(o=this.p2pTransport)===null||o===void 0?void 0:o.getPeers())!==null&&a!==void 0?a:[],f=[...d,...h];Ce.log("getPeer","Found peers",f,e),c=f.find(l=>l.senderId===e.senderId),c||(c=f.find(l=>l.extensionId===e.origin.id))}else c=yield this._activePeer.promise,Ce.log("getPeer","Active peer",c);if(!c)throw new Error("No matching peer found.");return c})}makeRequest(e){var t;return he(this,void 0,void 0,function*(){const r=yield Nt();if(console.time(r),Ce.log("makeRequest","starting"),yield this.init(),console.timeLog(r,"init done"),Ce.log("makeRequest","after init"),yield this.addRequestAndCheckIfRateLimited())throw this.events.emit(U.LOCAL_RATE_LIMIT_REACHED).catch(l=>console.warn(l)),new Error("rate limit reached");if(!(yield this.checkPermissions(e.type)))throw this.events.emit(U.NO_PERMISSIONS).catch(l=>console.warn(l)),new Error("No permissions to send this request to wallet!");if(!this.beaconId)throw yield this.sendInternalError("BeaconID not defined");const o=Object.assign({id:r,version:"2",senderId:yield on(yield this.beaconId)},e),a=new Me;this.addOpenRequest(o.id,a);const c=yield new Vt().serialize(o),d=yield this.getActiveAccount(),h=yield this.getPeer(d),f=yield this.getWalletInfo(h,d);Ce.log("makeRequest","sending message",o),console.timeLog(r,"sending");try{yield(yield this.transport).send(c,h)}catch(l){throw this.events.emit(U.INTERNAL_ERROR,{text:"Unable to send message. If this problem persists, please reset the connection and pair your wallet again.",buttons:[{text:"Reset Connection",actionCallback:()=>he(this,void 0,void 0,function*(){yield et(),this.disconnect()})}]}),console.timeLog(r,"send error"),l}return console.timeLog(r,"sent"),this.events.emit(Dn[e.type].sent,{walletInfo:Object.assign(Object.assign({},f),{name:(t=f.name)!==null&&t!==void 0?t:"Wallet"}),extraInfo:{resetCallback:()=>he(this,void 0,void 0,function*(){this.disconnect()})}}).catch(l=>console.warn(l)),a.promise})}makeRequestV3(e){var t;return he(this,void 0,void 0,function*(){const r=yield Nt();if(console.time(r),Ce.log("makeRequest","starting"),yield this.init(),console.timeLog(r,"init done"),Ce.log("makeRequest","after init"),yield this.addRequestAndCheckIfRateLimited())throw this.events.emit(U.LOCAL_RATE_LIMIT_REACHED).catch(v=>console.warn(v)),new Error("rate limit reached");if(!this.beaconId)throw yield this.sendInternalError("BeaconID not defined");const o={id:r,version:"3",senderId:yield on(yield this.beaconId),message:e},a=new Me;this.addOpenRequest(o.id,a);const c=yield new Vt().serialize(o),d=yield this.getActiveAccount(),h=yield this.getPeer(d),f=yield this.getWalletInfo(h,d);Ce.log("makeRequest","sending message",o),console.timeLog(r,"sending");try{yield(yield this.transport).send(c,h)}catch(v){throw this.events.emit(U.INTERNAL_ERROR,{text:"Unable to send message. If this problem persists, please reset the connection and pair your wallet again.",buttons:[{text:"Reset Connection",actionCallback:()=>he(this,void 0,void 0,function*(){yield et(),this.disconnect()})}]}),console.timeLog(r,"send error"),v}console.timeLog(r,"sent");const l=e.type;return this.events.emit(Dn[l].sent,{walletInfo:Object.assign(Object.assign({},f),{name:(t=f.name)!==null&&t!==void 0?t:"Wallet"}),extraInfo:{resetCallback:()=>he(this,void 0,void 0,function*(){this.disconnect()})}}).catch(v=>console.warn(v)),a.promise})}disconnect(){return he(this,void 0,void 0,function*(){this.postMessageTransport=void 0,this.p2pTransport=void 0,yield Promise.all([this.clearActiveAccount(),(yield this.transport).disconnect()])})}addOpenRequest(e,t){Ce.log("addOpenRequest",this.name,`adding request ${e} and waiting for answer`),this.openRequests.set(e,t)}}let ke;const as=async i=>({name:"Starlords App",iconUrl:"https://app.starlords.xyz/icon/favicon.png",preferredNetwork:i!=null?i:Oe.MAINNET,eventHandlers:{},colorMode:Rn.DARK}),Il=async(i,e)=>{const t=await ds({method:"get",url:"/assets/styles/beacon.css"}),r=new Promise((a,c)=>{us(document.body,d=>{const h=d;if(typeof h.id=="string"&&h.id.startsWith("beacon-alert-wrapper")){const f=h==null?void 0:h.shadowRoot;if(f){fs(f,t.data);const l=f.querySelector(".beacon-modal__close__wrapper");l&&l.addEventListener("click",()=>c("closed"))}return h.style.display="block",!0}return!1})}),o=i.requestPermissions(e);await Promise.race([r,o])},uo=async(i,e)=>{await i.client.getActiveAccount()||await Il(i,{network:e})},cs=async(i,e)=>{if(ke!==void 0)if((e==null?void 0:e.useCached)===!0){const a=ke;return await uo(a,{type:i}),a}else ke.disconnect(),ke.clearActiveAccount(),ke=void 0;const{BeaconWallet:t}=await $i(()=>import("./taquito-beacon-wallet.es6.9bce45ae.js"),["assets/taquito-beacon-wallet.es6.9bce45ae.js","assets/taquito.es6.dfe9fca4.js","assets/main.7e0bf420.js","assets/index.d368f00e.css","assets/taquito-local-forging.es6.f79e30f9.js","assets/taquito-utils.es6.4727928e.js","assets/index.36f35538.js"]),r=ke!=null?ke:new t(await as(i));return ke=r,await uo(r,{type:i}),r},Ol=async()=>{const{BeaconWallet:i}=await $i(()=>import("./taquito-beacon-wallet.es6.9bce45ae.js"),["assets/taquito-beacon-wallet.es6.9bce45ae.js","assets/taquito.es6.dfe9fca4.js","assets/main.7e0bf420.js","assets/index.d368f00e.css","assets/taquito-local-forging.es6.f79e30f9.js","assets/taquito-utils.es6.4727928e.js","assets/index.36f35538.js"]),e=ke!=null?ke:new i(await as());ke=e;const t=await e.client.getActiveAccount();return{active:!!t,networkId:t==null?void 0:t.network.type}},Cl=async(i="mainnet",e)=>{const{create_toolkit:t}=await $i(()=>import("./taquito.c80b5ca6.js"),["assets/taquito.c80b5ca6.js","assets/taquito.es6.dfe9fca4.js","assets/main.7e0bf420.js","assets/index.d368f00e.css","assets/taquito-local-forging.es6.f79e30f9.js","assets/taquito-utils.es6.4727928e.js","assets/index.36f35538.js"]),r=await t(e.rpc),o=await cs(i,e);r.setWalletProvider(o);const a=await o.client.getActiveAccount(),c=a!=null&&a.address?await r.rpc.getManagerKey(a==null?void 0:a.address):void 0;return{wallet:o,account:a==null?void 0:a.address,tezos:r,managerKey:c==null?void 0:c.toString()}},Pl=async()=>{ke==null||ke.disconnect(),ke=void 0},Ul=Object.freeze(Object.defineProperty({__proto__:null,create_beacon_wallet:cs,has_active_account:Ol,connect_beacon_wallet:Cl,disconnect_beacon_wallet:Pl},Symbol.toStringTag,{value:"Module"}));export{Ll as D,Tt as P,Ul as b,Cl as c,Pl as d};
