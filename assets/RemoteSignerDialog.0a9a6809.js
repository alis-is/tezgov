import{d as C,r as u,w as I,c as B,s as b,o as y,a as D,b as e,e as r,u as m,I as S,f as U,t as A,g as z,F as k,n as f,L as E,T as L,_ as F,p as N,h as P,j as T}from"./main.08ae0a6c.js";import{a as j,b as M}from"./rules.99b57bc2.js";import"./taquito-utils.es6.cecc5b7d.js";import"./index.e12de19b.js";const _=a=>(N("data-v-46dd3d90"),a=a(),P(),a),O={class:"center"},$={class:"card z-depth-2"},q={class:"content"},G=_(()=>e("div",{class:"icon-wrap center pv-2"},[e("i",{class:"las la-3x la-cloud"})],-1)),H=_(()=>e("div",{class:"headline pv-3"},"Connect your Remote Signer",-1)),J=_(()=>e("div",{class:"pt-1 space-1"},null,-1)),K={key:0,class:"error-text pt-2"},Q=_(()=>e("div",{class:"pv-2 space-2",style:{"grid-row":"9","grid-colum":"1"}},null,-1)),W={class:"buttons pt-0 pb-2"},X=C({__name:"RemoteSignerDialog",props:{context:null},emits:["cancel","confirm"],setup(a,{emit:g}){const s=a,h=j("Baker Address"),x=M("Remote Signer Url"),c=u(""),i=u(""),d=u(void 0),n=u(!1);let p=!1;I(()=>s.context.active,t=>{if(t)p=!1;else{n.value=!1,d.value=void 0;return}});const R=B(()=>n.value||b(h.value,t=>t(c.value)!==!0)||b(x.value,t=>t(i.value)!==!0));let l;const V=async()=>{try{n.value=!0;const{RemoteSession:t}=await F(()=>import("./RemoteSignerSession.8cdc65b4.js"),["assets/RemoteSignerSession.8cdc65b4.js","assets/main.08ae0a6c.js","assets/index.d4c003c6.css","assets/SessionBase.f2fdc96b.js","assets/taquito-utils.es6.cecc5b7d.js","assets/index.e12de19b.js","assets/DAppClient.cb3c3a29.js"]),o=await t.create(c.value,i.value,s.context.networkId,{rpc:s.context.rpc});if(p&&o){o.logout();return}typeof s.context.confirm=="function"&&s.context.confirm(o),g("confirm",o)}catch(t){d.value=`Failed to login with ledger!
Error: ${t.message}`,l==null||l.close()}finally{n.value=!1}},w=()=>{p=!0,l==null||l.close(),typeof s.context.cancel=="function"&&s.context.cancel(),g("cancel")};return(t,o)=>(y(),D(L,{to:"#dialog"},[e("div",{class:f(["modal",{"modal-active":a.context.active}]),key:"remoteSignerDialog"},[e("div",O,[e("div",$,[e("div",q,[G,H,r(S,{type:"text",modelValue:c.value,"onUpdate:modelValue":o[0]||(o[0]=v=>c.value=v),label:"Baker Address",hint:"Address of zour baker",rules:m(h)},null,8,["modelValue","rules"]),r(S,{type:"text",modelValue:i.value,"onUpdate:modelValue":o[1]||(o[1]=v=>i.value=v),label:"Remote Signer Url",hint:"Url pointing to your signer instance",rules:m(x)},null,8,["modelValue","rules"]),J,d.value?(y(),U("div",K,A(d.value),1)):z("",!0),Q,e("div",W,[r(k,{onClick:w,label:"Cancel"}),r(k,{class:f(["confirm-btn",{disabled:m(R)}]),onClick:V,label:"Connect"},null,8,["class"])])]),e("div",{class:f(["loader-wrap",{"loader-hidden":!n.value}])},[r(E,{class:"loader","is-indeterminate":!0,label:"Please confirm operation on your ledger..."})],2)])])],2)]))}});const oe=T(X,[["__scopeId","data-v-46dd3d90"]]);export{oe as default};
